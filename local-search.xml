<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Intro to LLM in a Non-Technical Perspective</title>
    <link href="/2023/11/27/Intro-to-LLM-in-a-Non-Technical-Perspective/"/>
    <url>/2023/11/27/Intro-to-LLM-in-a-Non-Technical-Perspective/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Intro-to-LLM-in-a-Non-Technical-Perspective"><a class="header-anchor" href="#Intro-to-LLM-in-a-Non-Technical-Perspective">Â¶</a>Intro to LLM in a Non-Technical Perspective</h1><p>This is a summary note of the talk presented by Andrej Karpathy at <a href="https://www.youtube.com/watch?v=zjkBMFhNj_g"> 1hr-talk Intro to Large Language Models</a>.</p><iframe width="560" height="315"src="https://www.youtube.com/embed/zjkBMFhNj_g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><h2 id="Architecture-in-Simple-Form"><a class="header-anchor" href="#Architecture-in-Simple-Form">Â¶</a>Architecture in Simple Form</h2><p>We can think of all Large Language Model as two files:</p><ol><li>parameters file (e.g. llama-2-70b 140 GB)  <u>why 140GB? 2B (float16) * 70b = 140GB</u></li><li>run.c  (500 lines of C Code)</li></ol><p>No network is required in this simplest setting. <code>run.c</code> will use the param file as inputs for text generation.</p><h2 id="Pre-Training-How-Do-We-Get-Parameters-File"><a class="header-anchor" href="#Pre-Training-How-Do-We-Get-Parameters-File">Â¶</a>Pre-Training: How Do We Get Parameters File?</h2><p>Chunk of the internet (~10TB of text) -&gt; 6000GPUs for 12 days, ~$2M ~1e24 FLOPS -&gt; ~140GB file</p><p>We can think of the 140 GB file as a compressed ZIP file, we get a lossy compression of the raw data (meaning the raw data cannot be recovered fully from the compressed file).</p><h2 id="Neural-Network-What-Do-We-Get-from-Training"><a class="header-anchor" href="#Neural-Network-What-Do-We-Get-from-Training">Â¶</a>Neural Network: What Do We Get from Training</h2><p>This neural network will simply predict the next word in the sequence<br><strong>An Example with context of 5 words</strong>:</p><figure class="highlight vim"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><pre><code class="hljs vim">promp<span class="hljs-variable">t:</span> <span class="hljs-keyword">cat</span> sat <span class="hljs-keyword">on</span> <span class="hljs-keyword">a</span><br>prediction: <span class="hljs-keyword">mat</span> (<span class="hljs-number">97</span>%)<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/image-20231127163339667.png" alt="image-20231127163339667"></p><p>More about the network:</p><ul><li><p>The objective of predicting the next word given a prompt is not an easy task.</p></li><li><p><strong>Hallucination:</strong> The network make up (parrot) incorrect contents in mimic of some real world content.</p></li></ul><h2 id="How-Does-Network-Work"><a class="header-anchor" href="#How-Does-Network-Work">Â¶</a>How Does Network Work?</h2><p>We do not know how exactly the network works as</p><ul><li>Billon of params are dispersed thru the network</li><li>We only know how to iteratively adjust them to make better prediction</li><li>We donâ€™t really know how the billions of params collaborate to do it.</li></ul><blockquote><p>Think of LLM as the mostly inscrutable artifact in opposite of any engineering discipline.</p></blockquote><p>Now we mostly treat LLM as a empirical artifact in which if we want to use it correctly, sophisticated evaluation is required.</p><h2 id="Fine-Tuning-Targeting-on-More-Specific-Task"><a class="header-anchor" href="#Fine-Tuning-Targeting-on-More-Specific-Task">Â¶</a>Fine-Tuning: Targeting on More Specific Task</h2><p>To target on a more specific task such as training a AI assistant (like Chat GPT), we do:</p><ol><li>Use the same pre-trained model</li><li>Swap the dataset (question answer dataset)</li><li>Continue training</li></ol><p>In contrast to the pre-training (low quality, large quantity), in this stage, we prefer higher quality over quantity.</p><p>Empirically, we found that LLM can learn the formatting of the expected answer from the dataset and utilize the knowledge learned from pre-training phase and fine-tuning phase to build up the answer.</p><h3 id="How-to-Train-Your-ChatGPT"><a class="header-anchor" href="#How-to-Train-Your-ChatGPT">Â¶</a>How to Train Your ChatGPT</h3><ol><li><strong>Stage 1: Pre-training (done ~ every year)</strong><ol><li>Download ~10TB of text</li><li>Get a cluster of ~6,000 GPUs</li><li>Compress the text into a neural network, pay ~2M$, wait ~12 days</li><li>Obtain the base model</li></ol></li><li><strong>Stage 2: Fine-tuning (done ~ week)</strong><ol><li>Write labeling instructions</li><li>Hire people, collect 100K high quality ideal Q&amp;A dataset</li><li>Fine-tune base model on this data, wait ~1 day.</li><li>Obtain assistant model</li><li>Run a lot of Evaluations</li><li>Deploy</li><li>Monitor, collect misbehaviors, go to step 1.</li></ol></li><li>Potentilly Stage 3:<ol><li>Reinforcement Learning from Human Feedback (RLHF)</li><li>Easier to do comparison than to generating one (select the better generated result from result candidates)</li></ol></li></ol><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/image-20231127163405242.png" alt="image-20231127163405242"></p><h2 id="LLM-Scaling-Laws"><a class="header-anchor" href="#LLM-Scaling-Laws">Â¶</a>LLM Scaling Laws</h2><p>Performance of LLMs is a smooth, well-bahaved, predictable function of :</p><ul><li>N: the number of parameters in this network</li><li>D: the amount of text we train on</li></ul><p>We observed that the trends do not show signs of â€œtopping outâ€, meaning that we can expect more intelligence â€œfor freeâ€ by scaling</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/image-20231127163436240.png" alt="image-20231127163436240"></p><p>Although we do not care about the next word accuracy in actual practice. in practice, we see that this accuracy is correlated to evaluations we care about.</p><p>Algorithmic progress is nice bonus but hard, but this scaling law provides a guaranteed path to success.</p><h2 id="LLM-Uses-Tools-just-like-Human-Do"><a class="header-anchor" href="#LLM-Uses-Tools-just-like-Human-Do">Â¶</a>LLM Uses Tools just like Human Do</h2><p>LLM can be equipped with tools such as browser, calculators to perform more complex task. Todayâ€™s ChatGPT already has some built-in tools it can invoke. some tools already available:</p><ol><li>Browser (Bing search)</li><li>Calculator</li><li>Python Interpreter (e.g. do tasks like plotting)</li><li>DALL-E Image Generation</li><li>Vision</li><li>Speech Communication</li></ol><p>This empowers LLM to accomplish sophisticate tasks, only requiring users to give tasks in any natural language.</p><p>Also, these tools allow ChatGPT to have <strong>multi-modality</strong> capabilities.</p><h2 id="Future-Challenges-Two-System-Self-improvment"><a class="header-anchor" href="#Future-Challenges-Two-System-Self-improvment">Â¶</a>Future Challenges: Two System &amp; Self-improvment</h2><p>From the book <strong>Thinking Fast And Slow</strong></p><p>Two types of brain systems are introduced:</p><ol><li>System 1: Quick, Instinctive, Automatic, No Effort, Emotion, Un-conscious (e.g. arithmetic 2+2)</li><li>System 2: Slow, Rational, Complex-Decision, Effortful, conscious (e.g. arithmetic 17 * 24)</li></ol><p>For now, current LLM is only capable of System 1, but not System 2.</p><p>How can we allow LLM to â€œthinkâ€? <strong>prefer accuracy over time</strong></p><p>AlphaGo is trained in two steps:</p><ol><li>Learn by imitating human players</li><li>Learn by self-improvement.</li></ol><p>What is the step 2 in the domain of LLM? Thereâ€™s a lack of reward criterion.</p><h2 id="A-New-Perspective-of-LLM-OS"><a class="header-anchor" href="#A-New-Perspective-of-LLM-OS">Â¶</a>A New Perspective of LLM OS</h2><p>Think LLM as a new emerging kernel process, just like Linux, where it is coordinating with a lot of resources (memory, tools, peripheral devices, ethernet).</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/image-20231127163501801.png" alt="image-20231127163501801"></p><p>We can also see analogies of proprietary OS and open-source OS with todayâ€™s proprietary LLMs and open-source competitors.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/image-20231127163518249.png" alt="image-20231127163518249"></p><h2 id="LLM-Security-Challenges"><a class="header-anchor" href="#LLM-Security-Challenges">Â¶</a>LLM Security Challenges</h2><p>Users can disguise the intention and jailbreaks LLM security in a lot of ways.</p><ul><li>Jailbreak attacks by the Grandmother prompt</li><li>Base 64 encoding prompt</li><li>Universal Transferable Suffix</li><li>Noise Pattern</li><li>Prompt Injection</li><li>Data poisoning/ Backdoor attacks</li><li>â€¦</li></ul>]]></content>
    
    
    <categories>
      
      <category>LLM</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LLM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetFlash Tutorial</title>
    <link href="/2022/05/12/tutorial-en/"/>
    <url>/2022/05/12/tutorial-en/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="What-is-LeetFlashğŸ¤”"><a href="#What-is-LeetFlashğŸ¤”" class="headerlink" title="What is LeetFlashğŸ¤”"></a>What is LeetFlashğŸ¤”</h2><span id="more"></span><div class="note note-success">            <p>ä¸­æ–‡æ•™ç¨‹è¯·<a href="https://lucheng.online/2022/04/14/leetflash">ç‚¹å‡»è¿™é‡Œ</a></p>          </div><p>Last Updateï¼š 2022/7/12 2.1.1 version</p><div class="note note-warning">            <p><strong>Old Usersï¼š Please enter Extension Dashboard and update the LeetFlashï¼</strong></p>          </div><p>LeetFlash is a website based on the idea of <a href="https://en.wikipedia.org/wiki/Spaced_repetition">Spaced repetition</a> to efficiently review LeetCode algorithm problems. After downloading and linking the Chrome plug-in, <strong>LeetFlash will automatically record your question activities and provide fully automatic review time suggestions</strong>. Inspired by Anki, this app is very suitable for those who have just started to prepare for algorithm questions but are troubled by often forgetting their thought process. In order to facilitate the use of both LeetCode and LeetCode-CN users, LeetFlash supports both sites.</p><p>The core purpose of LeetFlash is to use a scientific interval review time to improve your mastery of algorithm knowledge points. <strong>Please note, LeetFlash does not advocate rote memorization of topics.</strong></p><h2 id="How-to-use-LeetFlash-ğŸ˜"><a href="#How-to-use-LeetFlash-ğŸ˜" class="headerlink" title="How to use LeetFlash ğŸ˜"></a>How to use LeetFlash ğŸ˜</h2><h3 id="How-to-download-â¬‡ï¸"><a href="#How-to-download-â¬‡ï¸" class="headerlink" title="How to download â¬‡ï¸"></a>How to download â¬‡ï¸</h3><ol><li><p>Go to <a href="https://leetflash.com/">https://leetflash.com</a> to register an account</p><p>Now it supports two login methods: Google and email registration.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241526827.png" alt="Registration Page"></p></li><li><p>Open the settings page and copy the API Token.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241535876.gif" alt="Copy Token"></p></li><li><p>Enter the Chrome Extension Store to download the LeetFlash plug-in:</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241538652.gif" alt="Adding Extension"></p></li><li><p>Paste the copied API Token on the pop-up options page and click save. After receiving the following two notifications, linking is successful.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241543799.png" alt="Linking Success"></p></li><li><p>You can now start coding and submissions will be synced at LeetFlash.</p></li></ol><h3 id="How-to-use-ğŸ§"><a href="#How-to-use-ğŸ§" class="headerlink" title="How to use ğŸ§"></a>How to use ğŸ§</h3><h3 id="Workflow"><a href="#Workflow" class="headerlink" title="Workflow"></a>Workflow</h3><ol><li><p>Every time you submit a question successfully, you will receive a LeetFlash sync notification.</p><p>**If you donâ€™t want to review the current question (for example, this question is too easy for you!), after version 2.1.0, you can choose to archive the current question directly in the Chrome notification in the lower right corner. Archiving means that the question will not appear in your Daily Review list. **</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241557581.gif" alt="Sync Question"></p></li><li><p><del>If you open the webpage (<a href="https://leetflash.com/">https://leetflash.com</a>) while submitting the question, you will receive one of the following three popup windows: New, Review, and Early Review. Please see the <strong>Popup window</strong> section below.</del> **To simplify workflow, this feature is temporarily disabled. That is, after each question is submitted, the next review time will be automatically updated. **</p></li><li><p>When <strong>a next repetition date comes</strong>, you can view the details through <strong>Daily Review</strong> (Note: Daily Review will only display the questions due today or before).</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241613252.gif" alt="Daily Review"></p></li><li><p>You can sync notes from LeetCode as well.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241632839.gif" alt="Sync Notes"></p></li><li><p><del>After submitting the question, you can manually select the next review date or select the time through the pop-up window</del></p><p>**To simplify workflow, this feature is temporarily disabled. That is, after each question is submitted, the next review time will be automatically updated. **</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241636180.gif" alt="Review-Pop-up"></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241638274.gif" alt="Review-Manual"></p><p>The only difference between the two is that the pop-up window needs to be triggered by successfully submitting a question, and there is no trigger requirement for manual selection.</p><p>After completing all daily review questions, you can refresh the page, and you will be prompted that all the reviews have been completed today, good job! (â—â€™â—¡â€™â—)</p></li><li><p>You can switch to open either LeetCode or LeetCode CN and switch the question language.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241615228.gif" alt="Swtich Language"></p></li></ol><h3 id="More-Info"><a href="#More-Info" class="headerlink" title="More Info"></a>More Info</h3><h4 id="1ï¸âƒ£Popup"><a href="#1ï¸âƒ£Popup" class="headerlink" title="1ï¸âƒ£Popup"></a>1ï¸âƒ£Popup</h4><p><del>When you successfully log in, any page of the website will <strong>sync</strong> your practice activities, and a successful submission will pop up a window and ask your next review time.</del></p><p><del>Now the popup page of the website only allows <strong>one page</strong> (the lat est opened) of the same account to be synchronized.ã€‚</del></p><p>~~What each button represents:</p><ol><li><del>After the question is successfully submitted and passed, the website will record the current submission activity and set the next review date.</del></li><li><del><strong>(Early Review)</strong> If the next review time for the topic is in the future, the new submission will allow you to go directly to the next stage, and the default stage will not change.</del></li><li><del><strong>(Overdue review)</strong> If the next review time for the topic has passed, you can choose to review it tomorrow or three days later, and the default stage will not change.</del></li><li><del><strong>(Review in time)</strong> If the next review time for the topic is <strong>today</strong>, you can choose to review it tomorrow or go directly to the next stage. The default stage will not change.</del></li></ol><p><strong>Disabled from version 2.1.0</strong></p><h4 id="2ï¸âƒ£Daily-Review"><a href="#2ï¸âƒ£Daily-Review" class="headerlink" title="2ï¸âƒ£Daily Review"></a>2ï¸âƒ£Daily Review</h4><p>Under the Daily Review tab, you can browse the questions and notes with due dates on or before today. Here you can manually select:</p><ol><li>Review again tomorrow, staying at the current stage.</li><li>Go to the next stage.</li></ol><p>In this way, you can consider whether you need to consolidate your memory according to your understanding of each question.</p><p><del><strong>Notes</strong> are the notes you take using the notebook function in LeetCode. Taking into account some factors, now only the latest notes of a specific question (without distinguishing between CN and EN sites) will be synchronized.</del></p><h4 id="3ï¸âƒ£DashBoard"><a href="#3ï¸âƒ£DashBoard" class="headerlink" title="3ï¸âƒ£DashBoard"></a>3ï¸âƒ£DashBoard</h4><p>On this page you can see all the recorded questions, <strong>Version 2.1.1, you can click this icon to operate the question</strong></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202207122043892.png" alt="image-20220712204352777"></p><ol><li><strong>Only show questions that have not been archived</strong></li><li><strong>Archive multiple questions at once</strong></li><li><strong>Activate (re-enable) multiple issues at once</strong></li><li><strong>Reset multiple questions at once (re-enable and set question stage to initial value 1)</strong></li><li><strong>Delete multiple questions at once (delete all records for this question)</strong></li></ol><p>After selecting the operation you want, check the question, and the dashboard will be automatically updated after confirming</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202207122047588.png" alt="image-20220712204745515"></p><p>Features under development are:</p><ol><li>Allow filtering based on <code>Archive</code> and <code>Topic Tags</code>.</li><li>More and more are under discussion</li></ol><h1 id="About-LeetFlashğŸ˜Š"><a href="#About-LeetFlashğŸ˜Š" class="headerlink" title="About LeetFlashğŸ˜Š"></a>About LeetFlashğŸ˜Š</h1><p>Domainï¼š<a href="https://leetflash.com/">https://LeetFlash.com</a></p><p>LeetFlash is a free and open source website based on <a href="https://www.gnu.org/licenses/quick-guide-gplv3.html">GPLv3</a>. The core purpose is to help you review the questions more conveniently, efficiently.</p><p>If you are interested in development, welcome to pr! Source code warehouse address: <a href="https://github.com/q815101630/LeetFlash">GitHub</a></p><p>If you think LeetFlash is not bad, your donation is a huge encouragement to me, and it will also help the normal operation of the website~</p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204141458456.png" alt="" style="zoom: 50%;" />]]></content>
    
    
    <categories>
      
      <category>fullstack</category>
      
    </categories>
    
    
    <tags>
      
      <tag>leetflash</tag>
      
      <tag>react</tag>
      
      <tag>nestjs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetFlash ä¸Šçº¿å•¦</title>
    <link href="/2022/04/14/leetflash/"/>
    <url>/2022/04/14/leetflash/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="LeetFlash-æ˜¯ä»€ä¹ˆ-ğŸ¤”"><a href="#LeetFlash-æ˜¯ä»€ä¹ˆ-ğŸ¤”" class="headerlink" title="LeetFlash æ˜¯ä»€ä¹ˆ ğŸ¤”"></a>LeetFlash æ˜¯ä»€ä¹ˆ ğŸ¤”</h2><span id="more"></span><div class="note note-success">            <p>View English Tutorial <a href="https://lucheng.online/2022/05/12/tutorial-en">Here</a></p>          </div><p>æœ€åæ›´æ–°æ—¥æœŸï¼š 2022/7/12 2.1.1 version</p><div class="note note-warning">            <p><strong>è€ç”¨æˆ·ï¼š è¯·è¿›å…¥ extension é¡µé¢å¹¶ä¸”é€‰æ‹©æ›´æ–°æ’ä»¶ï¼</strong></p><p><strong>ç®¡ç†æ‰©å±•ç¨‹åº -&gt; æ›´æ–°ï¼ˆå·¦ä¸Šè§’ï¼‰</strong></p>          </div><p>LeetFlash æ˜¯ä¸€æ¬¾åŸºäº<a href="https://en.wikipedia.org/wiki/Spaced_repetition">Spaced repetition</a>æ€æƒ³è€Œå¼€å‘çš„é«˜æ•ˆå¤ä¹ ç®—æ³•é¢˜çš„ç½‘ç«™ã€‚åœ¨ä¸‹è½½å¹¶é“¾æ¥ç½‘ç«™æ’ä»¶æˆåŠŸåï¼Œæ’ä»¶ä¼šè‡ªåŠ¨è®°å½•ä½ çš„åˆ·é¢˜æ´»åŠ¨å¹¶ä¸”æä¾›å…¨è‡ªåŠ¨åŒ–çš„å¤ä¹ æ—¶é—´å»ºè®®ã€‚å¯å‘äºå„ç±»èƒŒå•è¯ APP, æœ¬ APP éå¸¸é€‚ç”¨äº<strong>åˆšåˆšå¼€å§‹åˆ·é¢˜ä½†è‹¦æ¼äºç»å¸¸å¿˜è®°æ€è·¯å’Œæ­£åœ¨ä¸ºé¢è¯•å†²åˆºçš„å°ä¼™ä¼´</strong>ã€‚ä¸ºäº†æ–¹ä¾¿æµ·å¤–å’Œå›½å†…çš„å°ä¼™ä¼´ä½¿ç”¨ï¼ŒLeetFlash åŒæ—¶æ”¯æŒ è‹±æ–‡åŒºå’Œå›½åŒºã€‚</p><p>LeetFlash çš„æ ¸å¿ƒç›®çš„ä¸ºåˆ©ç”¨ç§‘å­¦çš„é—´éš”å¤ä¹ æ—¶é—´æå‡ä½ å¯¹ç®—æ³•çŸ¥è¯†ç‚¹çš„æŒæ¡èƒ½åŠ›ã€‚<strong>è¯·æ³¨æ„</strong>ï¼ŒLeetFlash å¹¶ä¸å€¡å¯¼å¯¹é¢˜ç›®çš„æ­»è®°ç¡¬èƒŒã€‚</p><h2 id="æ€ä¹ˆä½¿ç”¨-LeetFlash-ğŸ˜-å›¾æ–‡æ•™ç¨‹"><a href="#æ€ä¹ˆä½¿ç”¨-LeetFlash-ğŸ˜-å›¾æ–‡æ•™ç¨‹" class="headerlink" title="æ€ä¹ˆä½¿ç”¨ LeetFlash ğŸ˜ (å›¾æ–‡æ•™ç¨‹)"></a>æ€ä¹ˆä½¿ç”¨ LeetFlash ğŸ˜ (å›¾æ–‡æ•™ç¨‹)</h2><h3 id="å¦‚ä½•ä¸‹è½½-â¬‡ï¸"><a href="#å¦‚ä½•ä¸‹è½½-â¬‡ï¸" class="headerlink" title="å¦‚ä½•ä¸‹è½½ â¬‡ï¸"></a>å¦‚ä½•ä¸‹è½½ â¬‡ï¸</h3><ol><li><p>è¿›å…¥ <a href="https://leetflash.com/">https://leetflash.com</a> æ³¨å†Œè´¦å·</p><p>ç°æ”¯æŒä¸¤ç§ç™»é™†æ–¹å¼ï¼šGoogle å’Œé‚®ç®±æ³¨å†Œ</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241526827.png" alt="æ³¨å†Œç•Œé¢"></p></li><li><p>æ‰“å¼€è®¾ç½®é¡µé¢ï¼Œå¤åˆ¶ API Token</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241535876.gif" alt="å¤åˆ¶å£ä»¤"></p></li><li><p>è¿›å…¥ chrome æ’ä»¶å•†åº—ä¸‹è½½ LeetFlash æ’ä»¶ï¼š<a href="https://chrome.google.com/webstore/detail/leetflash/gffjifokdnkmfcjihfgnalbabnghedjc">åœ°å€</a>ï¼Œ å¹¶å›ºå®šæ’ä»¶åœ¨å³ä¸Šè§’</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241538652.gif" alt="æ·»åŠ æ’ä»¶"></p></li><li><p>åœ¨å¼¹å‡ºçš„é€‰é¡¹é¡µé¢ï¼ˆæˆ–æ‰‹åŠ¨å³é”®æ’ä»¶å›¾æ ‡ï¼‰ç²˜è´´å¤åˆ¶å¥½çš„ API Tokenï¼Œç‚¹å‡» saveã€‚æ”¶åˆ°ä»¥ä¸‹ä¸¤æ¡é€šçŸ¥åï¼Œä¾¿è¯´æ˜é“¾æ¥æˆåŠŸ</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241543799.png" alt="é“¾æ¥æˆåŠŸä¿¡æ¯"></p></li><li><p>é“¾æ¥æˆåŠŸåï¼Œåˆ·é¢˜æ´»åŠ¨ï¼ˆä¾‹å¦‚æˆåŠŸæäº¤ç­”æ¡ˆï¼‰ä¾¿ä¼šè¢«è‡ªåŠ¨åŒæ­¥åˆ°ç½‘ç«™ï¼</p></li></ol><h3 id="å¦‚ä½•ä½¿ç”¨-ğŸ§"><a href="#å¦‚ä½•ä½¿ç”¨-ğŸ§" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ ğŸ§"></a>å¦‚ä½•ä½¿ç”¨ ğŸ§</h3><h3 id="å·¥ä½œæµ"><a href="#å·¥ä½œæµ" class="headerlink" title="å·¥ä½œæµ"></a>å·¥ä½œæµ</h3><ol><li><p>åœ¨é“¾æ¥å¥½ç½‘ç«™å’Œæ’ä»¶åï¼Œè¿›è¡Œæ—¥å¸¸åˆ·é¢˜ã€‚æ¯æ¬¡æˆåŠŸæäº¤é¢˜ç›®åï¼Œä¼šæ”¶åˆ° LeetFlash åŒæ­¥é€šçŸ¥</p><p><strong>å¦‚æœä½ å¹¶ä¸æƒ³å¤ä¹ å½“å‰é—®é¢˜ï¼ˆæ¯”å¦‚è¿™é“é¢˜å¯¹ä½ æ¥è¯´ç®€ç›´å¤ªç®€å•äº†ï¼ï¼‰ï¼Œåœ¨ 2.1.0 ç‰ˆæœ¬åï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å³ä¸‹è§’çš„ Chrome é€šçŸ¥é‡Œé€‰æ‹©æŠŠå½“å‰é—®é¢˜å½’æ¡£ã€‚å½’æ¡£æ„å‘³ç€è¿™é“é¢˜ç›®å°†ä¸ä¼šå‡ºç°åœ¨ä½ çš„ Daily Review åˆ—è¡¨é‡Œã€‚</strong></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241557581.gif" alt="æ·»åŠ é—®é¢˜"></p></li><li><p><del>å¦‚æœåœ¨åˆ·é¢˜åŒæ—¶æ‰“å¼€ç€ç½‘é¡µï¼ˆ<a href="https://leetflash.com)ï¼Œä¼šæ”¶åˆ°ä»¥ä¸‹ä¸‰ç§Popupå¼¹å‡ºçª—å£ï¼šæ–°é¢˜ç›®ï¼Œå¤ä¹ é¢˜ç›®ï¼Œå’Œæå‰å¤ä¹ é¢˜ç›®ã€‚å…·ä½“åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Œè¯·æŸ¥çœ‹ä¸‹é¢**Popupå¼¹å‡ºçª—å£**æ¿å—">https://leetflash.com)ï¼Œä¼šæ”¶åˆ°ä»¥ä¸‹ä¸‰ç§Popupå¼¹å‡ºçª—å£ï¼šæ–°é¢˜ç›®ï¼Œå¤ä¹ é¢˜ç›®ï¼Œå’Œæå‰å¤ä¹ é¢˜ç›®ã€‚å…·ä½“åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Œè¯·æŸ¥çœ‹ä¸‹é¢**Popupå¼¹å‡ºçª—å£**æ¿å—</a></del> <strong>ä¸ºäº†ç®€åŒ–å·¥ä½œæµï¼Œç°åœ¨æš‚æ—¶ç¦ç”¨æ‰äº†è¿™ä¸ªåŠŸèƒ½ã€‚å³æ¯æ¬¡æäº¤é¢˜ç›®åï¼Œä¸‹ä¸€æ¬¡å¤ä¹ æ—¶é—´å°†ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</strong></p></li><li><p>å½“<strong>ä¸€é“é¢˜ç›®åˆ°å¤ä¹ æ—¥æœŸæ—¶(next repetition)<strong>ï¼Œå¯ä»¥é€šè¿‡</strong>Daily Review</strong> æŸ¥çœ‹è¯¦æƒ… <strong>ï¼ˆæ³¨æ„ï¼šDaily Review åªä¼šæ˜¾ç¤º Next Repetition åœ¨ä»Šå¤©æˆ–ä¹‹å‰çš„é¢˜ç›®ï¼‰</strong></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241613252.gif" alt="æ¯æ—¥å¤ä¹ "></p></li><li><p>LeetCode ç°åœ¨æ”¯æŒå¯¹é—®é¢˜æ·»åŠ ç¬”è®°ï¼Œåœ¨ LeetCode ä¸Šçš„ç¬”è®°ä¹Ÿä¼šè¢« LeetFlash åŒæ­¥å“¦ã€‚</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241632839.gif" alt="æ·»åŠ ç¬”è®°"></p></li><li><p><del>æäº¤é¢˜ç›®åï¼Œå¯ä»¥é€šè¿‡å¼¹çª—é€‰æ‹©æ—¶é—´</del> <strong>ä¸ºäº†ç®€åŒ–å·¥ä½œæµï¼Œç°åœ¨æš‚æ—¶ç¦ç”¨æ‰äº†è¿™ä¸ªåŠŸèƒ½ã€‚å³æ¯æ¬¡æäº¤é¢˜ç›®åï¼Œä¸‹ä¸€æ¬¡å¤ä¹ æ—¶é—´å°†ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</strong></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241636180.gif" alt="å¤ä¹ é¢˜ç›®-å¼¹çª—"></p><p><strong>å¦‚æœä½ æ‡’å¾—æ‰“å¼€ç½‘ç«™å†åˆ·ä¸€éï¼Œä½ å¯ä»¥ç›´æ¥åœ¨é¡µé¢å³ä¸‹è§’æ ‡è®°è¿›å…¥ Next Stage</strong></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241638274.gif" alt="å¤ä¹ é¢˜ç›®-æ‰‹åŠ¨"></p><p>å®Œæˆæ‰€æœ‰ daily review é¢˜ç›®åï¼Œå¯ä»¥åˆ·æ–°é¡µé¢ï¼Œä¼šæç¤ºä»Šå¤©æ‰€æœ‰å¤ä¹ å·²å®Œæˆï¼Œgood jobï¼(â—â€™â—¡â€™â—)</p></li><li><p>å¯ä»¥é€šè¿‡<strong>åˆ‡æ¢è¯­è¨€</strong>åˆ‡æ¢æ‰“å¼€å›½åŒºæˆ–å›½é™…åŒº LeetCode ç½‘ç«™</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204241615228.gif" alt="åˆ‡æ¢è¯­è¨€"></p></li></ol><h3 id="å…·ä½“ä¿¡æ¯"><a href="#å…·ä½“ä¿¡æ¯" class="headerlink" title="å…·ä½“ä¿¡æ¯"></a>å…·ä½“ä¿¡æ¯</h3><h4 id="1ï¸âƒ£-Daily-Review-æ¯æ—¥å¤ä¹ "><a href="#1ï¸âƒ£-Daily-Review-æ¯æ—¥å¤ä¹ " class="headerlink" title="1ï¸âƒ£ Daily Review æ¯æ—¥å¤ä¹ "></a>1ï¸âƒ£ Daily Review æ¯æ—¥å¤ä¹ </h4><p>åœ¨æ¯æ—¥å¤ä¹  tab ä¸‹ï¼Œä½ å¯ä»¥æµè§ˆåˆ°æˆªæ­¢æ—¥æœŸåœ¨ä»Šå¤©æˆ–ä¹‹å‰çš„æ‰€æœ‰é¢˜çš„é¢˜ç›®å’Œç¬”è®°ã€‚åœ¨è¿™é‡Œä½ å¯ä»¥æ‰‹åŠ¨é€‰æ‹©ï¼š</p><ol><li>æ˜å¤©å†æ¬¡å¤ä¹ ï¼Œåœç•™å½“å‰ stageã€‚</li><li>è¿›å…¥ä¸‹ä¸€ä¸ª stageã€‚</li><li>Archive å½“å‰é—®é¢˜</li></ol><p>è¿™æ ·ä½ å¯ä»¥æ ¹æ®å¯¹æ¯é“é¢˜çš„æŒæ¡èƒ½åŠ›è€ƒè™‘æ˜¯å¦éœ€è¦å·©å›ºä¸‹è®°å¿†ã€‚</p><p>ç¬”è®°ä¸ºä½ åœ¨ LeetCodeï¼ˆæ”¯æŒå›½é™…åŒºå’Œå›½åŒºï¼‰ä½¿ç”¨ç¬”è®°æœ¬åŠŸèƒ½è®°å½•çš„ç¬”è®°ã€‚è€ƒè™‘åˆ°ä¸€äº›å› ç´ ï¼Œç°åœ¨åªä¼šæ ¹æ®å…·ä½“ä¸€é“é¢˜çš„æœ€æ–°ç¬”è®°ï¼ˆä¸åŒºåˆ†å›½é™…åŒºå’Œå›½åŒºï¼‰è¿›è¡ŒåŒæ­¥ã€‚</p><p><del><em>Daily Review tab å’Œ Popup çš„åŒºåˆ«åœ¨äº Popup åªæœ‰åœ¨æˆåŠŸæäº¤é¢˜ç›®æ—¶æ‰ä¼šè§¦å‘ï¼Œé»˜è®¤ä¸ä¼šæ”¹å˜ stage</em></del></p><h4 id="2ï¸âƒ£-DashBoard-é¢æ¿"><a href="#2ï¸âƒ£-DashBoard-é¢æ¿" class="headerlink" title="2ï¸âƒ£ DashBoard é¢æ¿"></a>2ï¸âƒ£ DashBoard é¢æ¿</h4><p>åœ¨è¿™ä¸ªé¡µé¢ä½ å¯ä»¥çœ‹åˆ°æ‰€æœ‰è¢«è®°å½•çš„é¢˜ç›®ï¼Œ<strong>2.1.1 åï¼Œä½ å¯ä»¥ç‚¹å‡»è¿™ä¸ªå›¾æ ‡å¯¹é—®é¢˜è¿›è¡Œæ“ä½œ</strong></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202207122043892.png" alt="image-20220712204352777"></p><ol><li><strong>åªæ˜¾ç¤ºå°šæœª archive çš„é—®é¢˜</strong></li><li><strong>ä¸€æ¬¡æ€§ archive å¤šä¸ªé—®é¢˜</strong></li><li><strong>ä¸€æ¬¡æ€§ activateï¼ˆé‡æ–°å¯ç”¨ï¼‰å¤šä¸ªé—®é¢˜</strong></li><li><strong>ä¸€æ¬¡æ€§ reset å¤šä¸ªé—®é¢˜ï¼ˆé‡æ–°å¯ç”¨å¹¶è®¾ç½®é—®é¢˜çš„ stage åˆ°åˆå§‹å€¼ 1ï¼‰</strong></li><li><strong>ä¸€æ¬¡æ€§åˆ é™¤å¤šä¸ªé—®é¢˜ï¼ˆåˆ é™¤å¯¹æ­¤é¢˜çš„æ‰€æœ‰è®°å½•ï¼‰</strong></li></ol><p>é€‰æ‹©ä½ æƒ³è¦çš„æ“ä½œåï¼Œå‹¾é€‰é—®é¢˜ï¼Œconfirm åå°±ä¼šè‡ªåŠ¨æ›´æ–° dashboard</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202207122047588.png" alt="image-20220712204745515"></p><p>æ­£åœ¨å¼€å‘çš„åŠŸèƒ½æœ‰ï¼š</p><ol><li>å…è®¸æ ¹æ®<code>Archive</code> å’Œ <code>Topic Tags</code> è¿›è¡Œç­›é€‰ã€‚</li><li>æ›´å¤šæ›´å¤šæ­£åœ¨çƒ­çƒˆè®¨è®ºä¸­</li></ol><h4 id="3ï¸âƒ£-Popup-å¼¹å‡ºçª—å£"><a href="#3ï¸âƒ£-Popup-å¼¹å‡ºçª—å£" class="headerlink" title="3ï¸âƒ£ Popup å¼¹å‡ºçª—å£"></a>3ï¸âƒ£ <del>Popup å¼¹å‡ºçª—å£</del></h4><p><del>å½“ä½ æˆåŠŸç™»é™†åï¼Œåœ¨ç½‘ç«™çš„ä»»ä½•é¡µé¢éƒ½ä¼š<strong>å®æ—¶åŒæ­¥</strong>ä½ çš„åˆ·é¢˜æ´»åŠ¨ï¼ŒæˆåŠŸçš„æäº¤ä¼šå¼¹å‡ºçª—å£å¹¶ä¸”è¯¢é—®ä½ çš„ä¸‹ä¸€æ¬¡å¤ä¹ æ—¶é—´ã€‚</del></p><p><del>ç°åœ¨ç½‘ç«™çš„ Popup åŠŸèƒ½åªå…è®¸å¯¹åŒä¸€ä¸ªè´¦å·çš„<strong>ä¸€ä¸ªé¡µé¢</strong>ï¼ˆæœ€æ–°æ‰“å¼€çš„ï¼‰è¿›è¡ŒåŒæ­¥ã€‚</del></p><p><del>1. æˆåŠŸæäº¤ç­”æ¡ˆå¹¶é€šè¿‡åï¼Œç½‘ç«™ä¼šè®°å½•ä¸‹å½“å‰çš„æäº¤æ´»åŠ¨ï¼Œå¹¶ä¸”è®¾å®šä¸‹æ¬¡çš„å¤ä¹ æ—¥æœŸã€‚</del></p><p><del>2. ï¼ˆæå‰å¤ä¹ ï¼‰å¦‚æœé¢˜ç›®çš„ä¸‹ä¸€æ¬¡å¤ä¹ æ—¶é—´æ˜¯åœ¨<strong>æœªæ¥</strong>ï¼Œæ–°çš„æäº¤ä¼šå…è®¸ä½ ç›´æ¥è¿›å…¥ä¸‹ä¸€ä¸ª stageï¼Œé»˜è®¤ stage ä¸ä¼šæ”¹å˜ã€‚</del><br><del>3. ï¼ˆOverdue å¤ä¹ ï¼‰å¦‚æœé¢˜ç›®çš„ä¸‹ä¸€æ¬¡å¤ä¹ æ—¶é—´<strong>å·²ç»è¿‡å»</strong>ï¼Œä½ å¯ä»¥é€‰æ‹©åœ¨æ˜å¤©æˆ–è€…ä¸‰å¤©åå¤ä¹ ï¼Œé»˜è®¤ stage ä¸ä¼šæ”¹å˜ã€‚</del><br><del>4. ï¼ˆåŠæ—¶å¤ä¹ ï¼‰å¦‚æœé¢˜ç›®çš„ä¸‹ä¸€æ¬¡å¤ä¹ æ—¶é—´æ˜¯åœ¨<strong>ä»Šå¤©</strong>ï¼Œä½ å¯ä»¥é€‰æ‹©åœ¨æ˜å¤©å¤ä¹ æˆ–è€…ç›´æ¥è¿›å…¥ä¸‹ä¸€ä¸ª stageï¼Œé»˜è®¤ stage ä¸ä¼šæ”¹å˜ã€‚</del></p><p><strong>åœ¨æœ€æ–°ç‰ˆæœ¬ä¸­ç¦ç”¨äº†å¼¹å‡ºçª—å£</strong></p><h1 id="Change-Logs"><a href="#Change-Logs" class="headerlink" title="Change Logs"></a>Change Logs</h1><p>2022/7/9 2.1.0 version <strong>Allow users to archive questions from notification directly</strong></p><p>2022/7/12 2.1.1 version <strong>Allow users to archive/reset/delete/activate multiple questions from dashboard</strong></p><h1 id="å…³äº-LeetFlashğŸ˜Š"><a href="#å…³äº-LeetFlashğŸ˜Š" class="headerlink" title="å…³äº LeetFlashğŸ˜Š"></a>å…³äº LeetFlashğŸ˜Š</h1><p>ä¸»ç«™ï¼š<a href="https://leetflash.com/">https://LeetFlash.com</a></p><p>LeetFlash æ˜¯ä¸€æ¬¾åŸºäº<a href="https://www.gnu.org/licenses/quick-guide-gplv3.html">GPLv3</a>çš„å…è´¹å¼€æºç½‘ç«™ã€‚æ ¸å¿ƒç›®çš„æ˜¯å¸®åŠ©æ­£åœ¨åˆ·é¢˜çš„ä½ æä¾›ä¸€ä¸ªæ›´æ–¹ä¾¿ï¼Œé«˜æ•ˆï¼Œè‡ªåŠ¨åŒ–çš„å®šæœŸå¤ä¹ é¢˜ç›®çš„å°å¸®æ‰‹~</p><p>å¦‚æœä½ å¯¹å¼€å‘æ„Ÿå…´è¶£çš„è¯ï¼Œæ¬¢è¿ prï¼æºç ä»“åº“åœ°å€ï¼š<a href="https://github.com/q815101630/LeetFlash">GitHub</a></p><p>å¦‚æœä½ è§‰å¾— LeetFlash è¿˜ä¸é”™ï¼Œä½ çš„æåŠ©æ˜¯å¯¹æˆ‘çš„å·¨å¤§é¼“åŠ±ï¼Œä¹Ÿä¼šç»™ç½‘ç«™çš„æ­£å¸¸è¿ä½œå¸¦æ¥å¸®åŠ©~</p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202204141458456.png" alt="" style="zoom: 50%;" />]]></content>
    
    
    <categories>
      
      <category>fullstack</category>
      
    </categories>
    
    
    <tags>
      
      <tag>leetflash</tag>
      
      <tag>react</tag>
      
      <tag>nestjs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C++ Advance Notes</title>
    <link href="/2022/03/23/c-advanced/"/>
    <url>/2022/03/23/c-advanced/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Some C++ Advanced Usage Example Notes</p><p>ä¸€äº›ä¸ªäººC++çš„å­¦ä¹ ç¬”è®°</p><span id="more"></span><p>è¿™ç¯‡postä¸»è¦è®°å½•åœ¨å†™CS126ä»£ç æ—¶å€™ï¼Œé‡åˆ°çš„ä¸€äº›c++é—®é¢˜ï¼Œç•™ä»¥è®°å½•ã€‚</p><p>é¦–å…ˆå¼ºæ¨è¿™ä¸ªYoutuber C++ç³»åˆ—ï¼Œéå¸¸ç›´è§‚+å¾ˆæœ‰å¸®åŠ©ï¼š</p><p><a href="https://www.youtube.com/channel/UCQ-W1KE9EYfdxhL6S4twUNw">https://www.youtube.com/channel/UCQ-W1KE9EYfdxhL6S4twUNw</a></p><p>è¿™ç¯‡postä¸»è¦å›´ç»•CS126 HW9 çš„ä¸€ç³»åˆ—å°é—®é¢˜å±•å¼€</p><h1 id="Pointers-and-References"><a class="header-anchor" href="#Pointers-and-References">Â¶</a>Pointers and References</h1><blockquote><p>You need to write a function swap two <code>int</code>s. You remember there are three ways to do it but unfortunately you canâ€™t remember what the best way is. Why not try all three ways, then?</p><p>If a function is impossible to implement, return <code>false</code>. Otherwise, swap the numbers and return <code>true</code>.</p></blockquote><p><strong>Answer:</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">SwapByValue</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">SwapByPointer</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> temp =  *a;<br>    *a = *b;<br>    *b = temp;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">SwapByReference</span><span class="hljs-params">(<span class="hljs-keyword">int</span> &amp;a, <span class="hljs-keyword">int</span> &amp;b)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> temp = a;<br>    a = b;<br>    b = temp;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Explanation:</strong></p><ol><li>Swap by Value æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºä¸¤ä¸ªå‚æ•°éƒ½åªæ˜¯ä¸¤ä»½copyï¼ŒåŸå˜é‡æ— ä»»ä½•å˜åŒ–ã€‚</li><li>Swap by Pointer åŸå˜é‡è¢«ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘å¹¶ä¸”ä¼ å…¥å‚æ•°ï¼Œé‚£ä¹ˆåªéœ€è¦Dereferenceåå¾—åˆ°Aliasï¼Œäº¤æ¢å€¼åä¸¤ä¸ªå˜é‡å†…å­˜åœ°å€ä¸Šçš„å€¼å°±ä¼šè¢«äº¤æ¢.</li><li>Swap by Referenceï¼š Referenceå°±æ˜¯å˜é‡çš„Aliasï¼Œæ”¹å˜ç›´æ¥ååº”åˆ°å˜é‡çš„å†…å­˜åœ°å€ä¸Šã€‚</li></ol><h1 id="Iterators"><a class="header-anchor" href="#Iterators">Â¶</a>Iterators</h1><blockquote><p>You realize that Git uses linked lists internally, so you decide to implement your own version control system! This should be easy, right? Start by implementing the following iterator functions, so you can iterate over a list of commits.</p><p>When youâ€™re done, your iterator should be able to be used in the following <code>for</code> loop:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++">CommitHistory history;<br>history.Push(<span class="hljs-string">&quot;First commit&quot;</span>);<br>history.Push(<span class="hljs-string">&quot;Second commit&quot;</span>);<br><span class="hljs-comment">// ...</span><br><br><span class="hljs-keyword">for</span> (CommitHistory::Iterator it = history.begin(); it != history.end(); ++it) &#123;<br>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> message = *it;<br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>For reference, the header file is included below:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> once</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommitHistory</span> &#123;</span><br>  <span class="hljs-keyword">public</span>:<br>    CommitHistory();<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Push</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> message)</span></span>;<br><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Iterator</span> &#123;</span><br>      <span class="hljs-keyword">public</span>:<br>        Iterator(Commit *curr);<br><br>        Iterator&amp; <span class="hljs-keyword">operator</span>++();<br>        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; <span class="hljs-keyword">operator</span>*() <span class="hljs-keyword">const</span>;<br>        <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>!=(<span class="hljs-keyword">const</span> Iterator&amp; other) <span class="hljs-keyword">const</span>;<br><br>      <span class="hljs-keyword">private</span>:<br>        Commit *curr_;<br>    &#125;;<br><br>    <span class="hljs-function">Iterator <span class="hljs-title">begin</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function">Iterator <span class="hljs-title">end</span><span class="hljs-params">()</span></span>;<br><br>  <span class="hljs-keyword">private</span>:<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Commit</span> &#123;</span><br>        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> message_;<br>        Commit *next_;<br>    &#125;;<br><br>    Commit *head_;<br>&#125;;<br></code></pre></td></tr></table></figure><p>Hint: Each function should be roughly one line of code.</p></blockquote><p>**Answer: **</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;commit_history.h&quot;</span></span><br><br><br>CommitHistory::CommitHistory() &#123;<br>    head_ = <span class="hljs-literal">nullptr</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">CommitHistory::Push</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> message)</span> </span>&#123;<br>    Commit *commit = <span class="hljs-keyword">new</span> Commit();<br>    commit-&gt;message_ = message;<br>    commit-&gt;next_ = head_;<br><br>    head_ = commit;<br>&#125;<br><br>CommitHistory::Iterator::Iterator(Commit *curr) &#123;<br>    curr_ = curr;<br>&#125;<br><br><span class="hljs-keyword">bool</span> CommitHistory::Iterator::<span class="hljs-keyword">operator</span>!=(<span class="hljs-keyword">const</span> Iterator&amp; other) <span class="hljs-keyword">const</span> &#123;<br>    <span class="hljs-keyword">return</span> curr_ != other.curr_;<br>&#125;<br><br>CommitHistory::Iterator&amp; CommitHistory::Iterator::<span class="hljs-keyword">operator</span>++() &#123;<br>    curr_ = curr_-&gt;next_;<br>    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br><br><span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; CommitHistory::Iterator::<span class="hljs-keyword">operator</span>*() <span class="hljs-keyword">const</span> &#123;<br>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; message = curr_-&gt;message_;<br>    <span class="hljs-keyword">return</span> message;<br>&#125;<br><br><span class="hljs-function">CommitHistory::Iterator <span class="hljs-title">CommitHistory::begin</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> CommitHistory::Iterator(head_);<br>&#125;<br><br><span class="hljs-function">CommitHistory::Iterator <span class="hljs-title">CommitHistory::end</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> CommitHistory::Iterator(<span class="hljs-literal">nullptr</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œè¿­ä»£å™¨ä¸»è¦å®ç°äº†6ä¸ªmethodï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ol><li>Constructor <code> CommitHistory::Iterator::Iterator(Commit *curr)</code></li><li>operator!=    <code>bool CommitHistory::Iterator::operator!=(const Iterator&amp; other) const</code></li><li>operator++   <code>CommitHistory::Iterator&amp; CommitHistory::Iterator::operator++()</code></li><li>dereference operator   <code>std::string&amp; CommitHistory::Iterator::operator*() const</code></li><li>begin()       <code>CommitHistory::Iterator CommitHistory::begin() </code></li><li>end()          <code>CommitHistory::Iterator CommitHistory::end()</code></li></ol><h1 id="Templating"><a class="header-anchor" href="#Templating">Â¶</a>Templating</h1><blockquote><p>Youâ€™re writing a general-purpose geometry library, butâ€¦ itâ€™s not general enough! Use templating to add support for <code>float</code>s, <code>long</code>s, and other numeric types in the <code>Rectangle</code> class.</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> once</span><br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> &#123;</span><br>  <span class="hljs-keyword">public</span>:<br>    Rectangle(T w, T h);<br>    <span class="hljs-function">T <span class="hljs-title">CalculateArea</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function">T <span class="hljs-title">CalculatePerimeter</span><span class="hljs-params">()</span></span>;<br><br>  <span class="hljs-keyword">private</span>:<br>    T w_;<br>    T h_;<br>&#125;;<br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br>Rectangle&lt;T&gt;::Rectangle(T w, T h) &#123;<br>    w_ = w;<br>    h_ = h;<br>&#125;<br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br>T Rectangle&lt;T&gt;::CalculateArea() &#123;<br>    <span class="hljs-keyword">return</span> w_ * h_;<br>&#125;<br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br>T Rectangle&lt;T&gt;::CalculatePerimeter() &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * w_ + <span class="hljs-number">2</span> * h_;<br>&#125;<br></code></pre></td></tr></table></figure><p>Templating çš„é‡ç‚¹åœ¨äºï¼šåœ¨å®ç°æ¯ä¸ªmethod æ—¶å€™ï¼Œä¸ä»…ä»…éœ€è¦ç”¨ä¸Š<code>template</code>ï¼Œ åŒæ—¶éœ€è¦æ”¾å…¥å¯¹åº”çš„signatureå½“ä¸­ã€‚</p><h1 id="The-Big-5"><a class="header-anchor" href="#The-Big-5">Â¶</a>The Big 5</h1><blockquote><p>You want to write a backend program to keep track of this seasonâ€™s Big 10 basketball games, so you can display live scores on your website. In your opinion, the only thing more exciting than the Big 10 conference is the Big 5 resource management functions, so you decide to implement them for the <code>Team</code> class.</p><ol><li>Destructor</li><li>Copy Constructor</li><li>Copy Assignment Operator</li><li>Move Constructor</li><li>Move Assignment Operator</li></ol><p>For reference, the header file is included below:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> once</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Team</span> &#123;</span><br>  <span class="hljs-keyword">public</span>:<br>    Team();<br><br>    ~Team();<br>    Team(<span class="hljs-keyword">const</span> Team &amp;other);<br>    Team&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-keyword">const</span> Team&amp; other);<br>    Team(Team&amp;&amp; other) <span class="hljs-keyword">noexcept</span>;<br>    Team&amp; <span class="hljs-keyword">operator</span>=(Team&amp;&amp; other) <span class="hljs-keyword">noexcept</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EditLineup</span><span class="hljs-params">(<span class="hljs-keyword">size_t</span> idx, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> player)</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ShootFreeThrow</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ShootTwo</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ShootThree</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>* <span class="hljs-title">lineup</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">score</span><span class="hljs-params">()</span></span>;<br><br>  <span class="hljs-keyword">private</span>:<br>    <span class="hljs-keyword">size_t</span> kLineupSize = <span class="hljs-number">5</span>;<br><br>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> *lineup_;<br>    <span class="hljs-keyword">int</span> score_;<br>&#125;;<br></code></pre></td></tr></table></figure></blockquote><p><strong>Answer:</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;team.h&quot;</span></span><br><br>Team::Team() &#123;<br>    lineup_ = <span class="hljs-keyword">new</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>[kLineupSize];<br>    score_ = <span class="hljs-number">0</span>;<br>&#125;<br><br>Team::~Team() &#123;<br>    <span class="hljs-keyword">delete</span>[] lineup_;<br>&#125;<br><br>Team::Team(<span class="hljs-keyword">const</span> Team&amp; other) : score_(other.score_) &#123;<br>    lineup_ = <span class="hljs-keyword">new</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>[kLineupSize];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; kLineupSize; ++i )&#123;<br>         lineup_[i] = other.lineup_[i];<br>    &#125;<br>&#125;<br><br>Team&amp; Team::<span class="hljs-keyword">operator</span>=(<span class="hljs-keyword">const</span> Team&amp; other) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != &amp;other)&#123;<br>        <br>        <span class="hljs-keyword">delete</span>[] lineup_;<br>        score_ = other.score_;<br>        lineup_ = <span class="hljs-keyword">new</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>[kLineupSize];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; kLineupSize; ++i )&#123;<br>             lineup_[i] = other.lineup_[i];<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br><br>Team::Team(Team&amp;&amp; other) <span class="hljs-keyword">noexcept</span> &#123;<br>    score_ = other.score_;<br>    lineup_ = other.lineup_;<br>    <br>    other.score_ = <span class="hljs-number">0</span>;<br>    other.lineup_ = <span class="hljs-literal">nullptr</span>;<br>    <br>&#125;<br><br>Team&amp; Team::<span class="hljs-keyword">operator</span>=(Team&amp;&amp; other) <span class="hljs-keyword">noexcept</span> &#123;<br>    <br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != &amp;other)&#123;<br>        <span class="hljs-keyword">delete</span>[] lineup_;<br>    <br>        score_ = other.score_;<br>        lineup_ = other.lineup_;<br>        <br>        other.score_ = <span class="hljs-number">0</span>;<br>        other.lineup_ = <span class="hljs-literal">nullptr</span>;<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Team::EditLineup</span><span class="hljs-params">(<span class="hljs-keyword">size_t</span> idx, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> player)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (idx &gt;= <span class="hljs-number">0</span> &amp;&amp; idx &lt; kLineupSize) &#123;<br>        lineup_[idx] = player;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Team::ShootFreeThrow</span><span class="hljs-params">()</span> </span>&#123;<br>    score_++;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Team::ShootTwo</span><span class="hljs-params">()</span> </span>&#123;<br>    score_ += <span class="hljs-number">2</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Team::ShootThree</span><span class="hljs-params">()</span> </span>&#123;<br>    score_ += <span class="hljs-number">3</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>* <span class="hljs-title">Team::lineup</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> lineup_;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Team::score</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> score_;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Destructor"><a class="header-anchor" href="#Destructor">Â¶</a>Destructor</h2><p>å½“destruct objectæ—¶ï¼Œdestructorä¼šè¢«invokeï¼Œå¦‚æœæˆ‘ä»¬ç”¨äº†ä»»ä½•heap spaceï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨destructorä¸­è°ƒç”¨<code>delete</code> ç”¨æ¥ free heap space</p><h2 id="Copy-Constructor"><a class="header-anchor" href="#Copy-Constructor">Â¶</a>Copy Constructor</h2><p>å¦‚æœæˆ‘ä»¬éœ€è¦deep copyï¼Œå¯ä»¥è‡ªå·±å®šä¹‰copy constructor (é»˜è®¤çš„è¯æ˜¯shallow copy)ã€‚</p><h2 id="Copy-Assignment-Operator"><a class="header-anchor" href="#Copy-Assignment-Operator">Â¶</a>Copy Assignment Operator</h2><p>åœ¨å¯¹å·²ç»åˆ†é…ç©ºé—´åçš„å¯¹è±¡ä¸Šåšassignmentï¼Œå’ŒCopy Constructor éå¸¸ç±»ä¼¼ï¼Œä½†æ˜¯éœ€è¦check self-assignment å¹¶ä¸”deleteä¸éœ€è¦çš„heap spaceã€‚</p><h2 id="Move-Constructor"><a class="header-anchor" href="#Move-Constructor">Â¶</a>Move Constructor</h2><p>å¦‚æœæˆ‘ä»¬åˆå§‹åŒ–å¯¹è±¡çš„å‚æ•°åªæ˜¯rvalueï¼Œå³åªæ˜¯ä¸´æ—¶çš„ï¼Œæˆ‘ä»¬ä¸éœ€è¦copyä¸€éå†åˆå§‹åŒ–ï¼Œè€Œæ˜¯ç›´æ¥moveã€‚è®°å¾—æŠŠåŸæ¥å‚æ•°æŒ‡å‘<code>nullptr</code>.</p><h2 id="Move-Assignment-Operator"><a class="header-anchor" href="#Move-Assignment-Operator">Â¶</a>Move Assignment Operator</h2><p>åœ¨å·²åˆ†é…ç©ºé—´åçš„å¯¹è±¡ä¸Šåšmove assignmentï¼Œå’Œmove constructorç±»ä¼¼ã€‚</p><p>è¿™é‡Œä¸»è¦è®°å½•æ¯ä¸€ç§å¯¹åº”çš„æ¦‚å¿µpracticeï¼Œä¾›æœªæ¥å‚è€ƒã€‚å¯¹äºæ¦‚å¿µæˆ‘è§‰å¾—å¼€å§‹æ¨çš„é‚£ä¸ªæ²¹ç®¡ä¸»è®²çš„éå¸¸å¥½ï¼Œå¦‚æœçœ‹ä¸æ˜ç™½è¿™é‡Œçš„ä»£ç ï¼Œå¼ºæ¨ä»–çš„c++ç³»åˆ—è§†é¢‘ï¼</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>How to Write Good Tests?</title>
    <link href="/2022/01/20/how-to-write-good-tests/"/>
    <url>/2022/01/20/how-to-write-good-tests/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>The banner image shows a picture of a bridge called å—æ¡¥ (Nan Qiao, literally means the South Bridge.) This bridge is located at Dujiangyan, which is a small city 50km away from Chengdu, Sichuan, China. Since I had my high-school in Dujiangyan, I have a lot of precious memories there. I miss the people, inexpensive but delicious food, the way of living, and the memory when I rode a bike to travel between Chengdu and Dujiangyan with my best friends (around 100 km in total.)</p></blockquote><p>Recently I am reading a book called <a href="https://www.amazon.com/Art-Readable-Code-Practical-Techniques-ebook/dp/B0064CZ1XE">The Art of Readable Code</a> by Dustin Boswell. This is a textbook for a code-review class that I am taking. I think it is a good idea to share about some contents with you so that 1) I can deepen my understanding, 2) You can learn something from here!</p><h1 id="Chapter-14-Testing-and-Readability"><a class="header-anchor" href="#Chapter-14-Testing-and-Readability">Â¶</a>Chapter 14: Testing and Readability</h1><blockquote><p>KEY IDEA: Test code should be readable so that other coders are comfortable changing or adding tests.</p></blockquote><ol><li><p><strong>Test should be more readable</strong></p><ul><li>When writing a test, we should hide less important details.</li></ul></li><li><p><strong>Minimize the test statement</strong></p><ul><li>We should make the input/ expectation of a test <strong>clear</strong> so that it is very easy to add more tests.</li></ul></li><li><p><strong>Helper function</strong></p><ul><li>By extract some unimportant logics into a separate function, we can focus on the main implementation of the test itself.</li></ul></li><li><p><strong>Make error message readable</strong></p><ul><li><p>Utilize better assert in the language <code>assertEqual</code> in python, for example.</p></li><li><p>Create custom error message like:</p></li></ul></li></ol><figure class="highlight sas"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><pre><code class="hljs sas">CheckScoresBeforeAfter() failed,<br><span class="hljs-meta">Input</span>: <span class="hljs-string">&quot;-5, 1, 4, -99998.7, 3&quot;</span><br>Expected <span class="hljs-meta">Output</span>: <span class="hljs-string">&quot;4, 3, 1&quot;</span><br>Actual <span class="hljs-meta">Output</span>: <span class="hljs-string">&quot;1, 3, 4&quot;</span><br></code></pre></td></tr></table></figure><ol start="5"><li><strong>Choose good input</strong></li></ol><blockquote><p>In general, you should pick the simplest set of inputs that completely exercise the code.</p></blockquote><ol start="6"><li><p><strong>Simplifying the Input Values</strong></p><ul><li>The simple test that achieves the purpose is the best!</li></ul></li><li><p><strong>Multiple tests</strong></p><ul><li>multiple tests for multiple purposes with clear input/expectation</li></ul></li><li><p><strong>Naming</strong></p><ul><li><p>Name the test as the description.</p></li><li><p><code> Test__&lt;FunctionName&gt;_&lt;Situation&gt;()</code></p></li></ul></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">void</span> <span class="hljs-function"><span class="hljs-title">Test_SortAndFilterDocs_BasicSorting</span>(<span class="hljs-params"></span>)</span> &#123;<br>...<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>For helper function, we can name it differently as â€œtest-unwareâ€.</li></ul><blockquote><p>If you write your code knowing youâ€™ll be writing a test for it later, a funny thing happens: you start designing your code so that itâ€™s easy to test! Fortunately, coding this way also means that you create better code in general. Test-friendly designs often lead naturally to wellorganized code, with separate parts to do separate things.</p></blockquote><div class="note note-success">            <p>â€‹I hope this helps, but I strongly recommend you to read this book because it contains a lot of examples of good/bad practices. It is concise and very helpful for me and you who want to be a professional programmer!</p>          </div><p>2022/1/21</p><h1 id="Some-add-on"><a class="header-anchor" href="#Some-add-on">Â¶</a>Some add-on</h1><p>Programs have to be written with two goals in mind:</p><ul><li>Communicating with computer</li><li>Communicating with people</li></ul><h1 id="Three-themes"><a class="header-anchor" href="#Three-themes">Â¶</a>Three themes:</h1><ol><li><strong>Safe from bugs</strong>:</li></ol><ul><li>Correctness</li><li>Defensiveness: correctness in future</li></ul><ol start="2"><li><strong>Easy to understand</strong>:<ul><li>communicate with future programmers</li><li>good design helps future you/maintainers</li></ul></li><li><strong>Ready to change</strong></li></ol><h1 id="Software-Engineering-is-not-Hacking"><a class="header-anchor" href="#Software-Engineering-is-not-Hacking">Â¶</a>Software Engineering is not Hacking</h1><p>Engineers are pessimists, so:</p><ol><li>write a little bit at a time, testing as you go.</li><li>document the assumptions that code depends on</li><li>defend code against carelessness.</li></ol><h1 id="Git-Commit-Message"><a class="header-anchor" href="#Git-Commit-Message">Â¶</a>Git Commit Message</h1><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201211709003.png" alt="image-20220121170914865"></p><p>We can use a concise and helpful commit message format such as :</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-params">&lt;type&gt;</span>: <span class="hljs-params">&lt;Message&gt;</span><br><span class="hljs-symbol">feat:</span> blablabla<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>general</category>
      
    </categories>
    
    
    <tags>
      
      <tag>test</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Microservice-Auth Service (3)</title>
    <link href="/2022/01/15/microservice-3/"/>
    <url>/2022/01/15/microservice-3/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Microservice-3"><a class="header-anchor" href="#Microservice-3">Â¶</a>Microservice (3)</h1><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201151709190.png" alt="Untitled"></p><ul><li>Setup tsconfig with <code>tsc â€”init</code></li><li><code>index.ts</code></li><li><code>Dockerfile</code> <code>Dockerignore</code></li><li><code>auth-depl.yaml</code></li><li><code>ingress-srv.yaml</code></li><li><code>skaffold.yml</code> <code>skaffold dev</code></li></ul><p>As we are using microservice architecture, we need to standardize the way of transmitting errors to clients.</p><p>We can create a specific error handler (with four params) to handle all errors!</p><figure class="highlight plain"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><pre><code class="hljs tsx">import &#123; ValidationError &#125; from &quot;express-validator&quot;;<br><br>export class RequestValidationError extends Error &#123;<br>  constructor(public errors: ValidationError[]) &#123;<br>      super();<br>      <br><br>      &#x2F;&#x2F;Only because we are extending a built in class<br>      Object.setPrototypeOf(this, RequestValidationError.prototype);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201151711817.png" alt="Untitled"></p><p>We can use abstract class that force the custom error class to implement several functionalities</p><div class="note note-warning">            <p>Check the code base for details</p>          </div><h2 id="MongoDB"><a class="header-anchor" href="#MongoDB">Â¶</a>MongoDB</h2><p>We will create <strong>One MongoDB for one service</strong></p><div class="note note-warning">            <p>è¿™é‡Œå’Œmicroserviceæ²¡å¤ªå¤§å…³ç³»ï¼Œ å…·ä½“çœ‹ä»£ç </p>          </div><p>æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦ç”¨</p><p><code>import &quot;express-async-errors&quot;;</code> ä¸ç„¶åœ¨expressé‡Œçš„ <code>async</code>  å‡½æ•°æ— æ³•<code>throw</code> errorï¼</p><h2 id="Authentication"><a class="header-anchor" href="#Authentication">Â¶</a>Authentication</h2><p>How to authenticate can be a difficult problem in Microservices</p><ol><li><p>Sync request (No Event Bus) with a centralized auth service:</p><p><strong>BAD:</strong></p><ol><li><strong>coupling</strong></li><li><strong>single break point of the whole system</strong></li></ol></li><li><p>Each service have its own JWT/Cookie to check</p><p><strong>BAD:</strong></p><ol><li><strong>Hard to implement</strong></li><li>cannot instantly reflect the current status of a user in all services as user has 100% control of the token!</li></ol></li></ol><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201151711514.png" alt="Untitled"></p><p>Right now ,our strategy is as follow:</p><ol><li>user login through auth service, issued with a 15 mins of token</li><li>if a admin user sends a request to ban a user, a <code>UserBanned</code> event is emitted to Event Bus</li><li>all services will be listening to this event, and store the banned user into its own <code>redis</code> cache for 15 mins</li><li>If a user reached a service, service can know if it is allowed through <code>redis</code> !</li></ol><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201151711808.png" alt="Untitled"></p><h2 id="JWT-Cookie"><a class="header-anchor" href="#JWT-Cookie">Â¶</a>JWT/Cookie</h2><p>Cookie is sent through <code>Set-Cookie</code> and managed by the browser. Server side can normally be guaranteed requests will have to the access of the settled cookie</p><p>JWT is handled by client code but not the browser. JWT token is sent through <code>header</code> every time of the request.</p><p>Cookieâ€™s expiration date can be ignored as it is handled by the browser.</p><p>JWT is a more common and easy to handle technique as it is understood by other languages easily.</p><div class="note note-warning">            <p>One important advantage to use microservice is that services can be implemented by different languages!</p>          </div><p>Because of server side rendering, the first time a user request to a URL cannot attach any authentication information as normal SPA can do. Therefore, we must store the JWT in cookie! JWT itself is not secret. However, we can use Signing key to check if a JWT is verified or not.</p><p>We need <code>cookie-session</code> to store session data in cookie! , JWT is naturally temper-resistant,</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201151711782.png" alt="Untitled"></p><div class="note note-warning">            <p>æ‰å‘ç°ï¼Œ<code>_id</code> ä¼šè¢« mongodb è‡ªåŠ¨è½¬åŒ–ä¸º property <code>id</code>of string type</p>          </div><h2 id="Secrete-in-k8s"><a class="header-anchor" href="#Secrete-in-k8s">Â¶</a>Secrete in k8s</h2><p>Secret object can be created and share through pods</p><p>Secret object can then be treated as <code>env variable</code> for all pods.</p><p>Imperative approach to create a secret object!</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">kubectl</span> <span class="hljs-string">create</span> <span class="hljs-string">secret</span> <span class="hljs-string">generic</span> <span class="hljs-string">jwt-secret</span> <span class="hljs-string">--from-literal=JWT_KEY=asdf</span><br></code></pre></td></tr></table></figure><p>We then can put the secret into the container through the <code>Deployment</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">containers:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">auth</span><br>          <span class="hljs-attr">image:</span> <span class="hljs-string">hughqing/auth</span><br>          <span class="hljs-attr">env:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">JWT_KEY</span><br>              <span class="hljs-attr">valueFROM:</span><br>                <span class="hljs-attr">secretKeyRef:</span><br>                  <span class="hljs-attr">name:</span> <span class="hljs-string">jwt-secret</span> <span class="hljs-comment"># the name of the secret</span><br>                  <span class="hljs-attr">key:</span> <span class="hljs-string">JWT_KEY</span><br></code></pre></td></tr></table></figure><h2 id="id"><a class="header-anchor" href="#id">Â¶</a>_id</h2><p><code>JSON.stringify()</code> can be overwritten by <code>toJSON()</code> function in the object</p><h1 id="Testing"><a class="header-anchor" href="#Testing">Â¶</a>Testing</h1><p>Main quesstion: Whatâ€™s the scope of our tests?</p><ul><li>Single middleware â†’ Unit test</li><li>Single pipe</li><li>The whole service</li><li>different services?</li></ul><p>æ²¡å†™è¿™ï¼Œå¦‚æœè¦ç”¨ç›´æ¥çœ‹è§†é¢‘å§</p><p>We need to split the logic of <code>Express App</code> and <code>Start Up</code> into two files</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201151711194.png" alt="Untitled"></p><p>See code for details please!</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tsx">it(&quot;returns a 400 with missing email or password&quot;, async () &#x3D;&gt; &#123;<br>  await request(app)<br>    .post(&quot;&#x2F;api&#x2F;users&#x2F;signup&quot;)<br>    .send(&#123;<br>      password: &quot;testple@ad.com&quot;,<br>    &#125;)<br>    .expect(400);<br><br>  return request(app)<br>    .post(&quot;&#x2F;api&#x2F;users&#x2F;signup&quot;)<br>    .send(&#123;<br>      email: &quot;testple@ad.com&quot;,<br>    &#125;)<br>    .expect(400);<br>&#125;);<br></code></pre></td></tr></table></figure><div class="note note-success">            <p>æ€»ç»“ä»¥ä¸‹æœ¬å°ç»“ï¼š</p><ul><li><p>One MongoDB for each service!</p></li><li><p><code>import &quot;express-async-errors&quot;;</code> ä¸ç„¶åœ¨expressé‡Œçš„ <code>async</code>  å‡½æ•°æ— æ³•<code>throw</code> errorï¼</p></li><li><p>Authentication can be difficult:</p><ul><li>Sync request (No Event Bus) with a centralized auth service:<ul><li><strong>coupling</strong></li><li><strong>single break point of the whole system</strong></li></ul></li><li>Each service have its own JWT/Cookie to check<ul><li><strong>Hard to implement</strong></li><li>cannot instantly reflect the current status of a user in all services as user has 100% control of the token</li></ul></li></ul></li><li><p>Our stategy:</p><p>Right now ,our strategy is as follow:</p><ol><li>user login through auth service, issued with a 15 mins of token</li><li>if a admin user sends a request to ban a user, a <code>UserBanned</code> event is emitted to Event Bus</li><li>all services will be listening to this event, and store the banned user into its own <code>redis</code> cache for 15 mins</li><li>If a user reached a service, service can know if it is allowed through <code>redis</code> !</li></ol></li><li><p><code>JSON.stringify()</code> can be overwritten by <code>toJSON()</code> function in the object</p></li><li><p>æ‰å‘ç°ï¼Œ<code>_id</code> ä¼šè¢« mongodb è‡ªåŠ¨è½¬åŒ–ä¸º property <code>id</code>of string type</p></li><li><p>Test çœ‹ä»£ç </p></li></ul>          </div>]]></content>
    
    
    <categories>
      
      <category>backend</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
      <tag>react</tag>
      
      <tag>microservice</tag>
      
      <tag>node.js</tag>
      
      <tag>express.js</tag>
      
      <tag>k8s</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Microservice - Deploy with K8s (2)</title>
    <link href="/2022/01/13/microservice-kube/"/>
    <url>/2022/01/13/microservice-kube/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>MicroService Deployment with Docker + Kubernetes + Skaffold</p><p>This one is pretty long but very helpful to understand what is going on with Kubernetes and how different pods get connected with each other!</p><span id="more"></span><blockquote><p>The banner image is Dao Cheng (ç¨»åŸ), which is a famous natural reserve in Sichuan province. I have never been there but always heard it. I have to say that Sichuan province is gifted as it has so many natural sceneries that cannot be missed. Really wish to visit there after I back there! btw, really missing Sichuan hometown food~~</p></blockquote><h1 id="Microservice-Deployment"><a class="header-anchor" href="#Microservice-Deployment">Â¶</a>Microservice - Deployment</h1><h1 id="Kubernetes-Docker"><a class="header-anchor" href="#Kubernetes-Docker">Â¶</a>Kubernetes + Docker</h1><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201131950966.png" alt="Untitled"></p><p>We will have a common message channel that routes events to each node separately!</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201131956685.png" alt="Untitled"></p><blockquote><p>Windows:</p><p><code>minikube start --vm=true</code></p><p><code>minikube start --driver=hyperv</code></p><p><code>minikube start --driver=virtualbox</code></p></blockquote><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201131956865.png" alt="Untitled"></p><p>Service is a general API that handle access to a running container</p><figure class="highlight yaml"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">posts</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">containers:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">posts</span><br>      <span class="hljs-attr">image:</span> <span class="hljs-string">hughqing/posts:0.0.1</span><br></code></pre></td></tr></table></figure><p><code>kubectl apply -f posts.yaml</code></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201131956796.png" alt="Untitled"></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201131956092.png" alt="Untitled"></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201131956210.png" alt="Untitled"></p><h2 id="Deployment"><a class="header-anchor" href="#Deployment">Â¶</a>Deployment</h2><p>Deployment controls a set of same-type pods for updating, re-creating new podsâ€¦etc</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">kubectl</span> <span class="hljs-string">delete</span> <span class="hljs-string">deployment</span> <span class="hljs-string">&lt;name&gt;</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">deployment</span> <span class="hljs-string">./posts-depl.yaml</span><br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">posts-depl</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">posts</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">posts</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">containers:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">posts</span><br>          <span class="hljs-attr">image:</span> <span class="hljs-string">hughqing/posts:0.0.1</span><br></code></pre></td></tr></table></figure><h1 id="Update-Make-Change-to-Deployment"><a class="header-anchor" href="#Update-Make-Change-to-Deployment">Â¶</a>Update - Make Change to Deployment</h1><p>use <code>latest</code> in <code>posts-depl.yaml</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">kubectl rollout restart deployment [depl_name]<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201131956115.png" alt="Untitled"></p><h1 id="Service"><a class="header-anchor" href="#Service">Â¶</a>Service</h1><p>Between each pod, Service is used to communicate between each other</p><p>Service is used as a general API of the pods.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201131956165.png" alt="Untitled"></p><ul><li>Within each pod, we use Cluster IP</li><li>In the Dev stage, we can use the port to connect with the web browser</li><li>In the Prod stage, Load Balancer is used</li></ul><p>For now, we use Node Port for fun</p><p><img src="C:/Users/q8151/Desktop/Microservice%20-%20Deployment%2014accbc294f842c7990a4c25b9347f6e/Untitled%208.png" alt="Untitled"></p><p><code>nodePort</code> is a randomly assigned port to access the service outside of the <code>Node</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx">kubectl apply -f posts-srv.yaml<br>kubectl get services<br></code></pre></td></tr></table></figure><p>One type of pod will get one service</p><p>To communicate from Event-Bus to another pod, we are basically communicating from  <code>posts-clusterip-srv</code> and <code>event-bus-srv</code></p><p>Here a <code>cluster</code> is a set of same-type <code>service</code></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201131956075.png" alt="Untitled"></p><h3 id="A-general-procedure-of-creating-a-deployment-service"><a class="header-anchor" href="#A-general-procedure-of-creating-a-deployment-service">Â¶</a>A general procedure of creating a deployment+service</h3><ol><li>Build an image for the Service ( event bus, in this step)</li><li>Push the image to Docker Hub</li><li>Create a deployment for Event Bus</li><li>Create a cluster IP service for event bus and posts</li><li>Wire them up</li></ol><p>We can write <code>deployment config</code> and <code>service config</code> in one config file</p><p>I <code>type: ClusterIP</code> in <code>spec</code> will be the default</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">event-bus-depl</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">event-bus</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">event-bus</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">containers:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">event-bus</span> <br>          <span class="hljs-attr">image:</span> <span class="hljs-string">hughqing/event-bus</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">event-bus-srv</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">ClusterIP</span>  <span class="hljs-comment">#defualt</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">event-bus</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">event-bus</span><br>      <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span><br>      <span class="hljs-attr">port:</span> <span class="hljs-number">4005</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">4005</span><br></code></pre></td></tr></table></figure><p>â€‹</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201131956820.png" alt="Untitled"></p><p>Once <code>ClusterIp</code> service is setted up, it can directly communicate within cluster with</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">http://&lt;service_name&gt;:&lt;port&gt;</span><br></code></pre></td></tr></table></figure><p>This finishes our last step of wiring up.</p><p>We then do the similar steps from</p><ul><li>Build container image</li><li>Push</li><li>Create deployment file</li><li><code>kubectl apply -f .</code></li><li>wire them in <code>event-bus</code></li><li><code>kubectl rollout restart deployment &lt;name&gt;</code> if need</li></ul><h1 id="Load-Balancer-Nginx-Ingress"><a class="header-anchor" href="#Load-Balancer-Nginx-Ingress">Â¶</a>Load Balancer - Nginx/ Ingress</h1><p><strong>Load Balancer Service:</strong> A config file for a LoadBalancer Service is to let Cloud platform provision a Load Balancer outside of a cluster so that traffic can be routed into cluster.</p><p><strong>Ingress:</strong> A pod with a set of routing rules to distribute traffic to other services</p><p><a href="https://kubernetes.github.io/ingress-nginx/deploy/#quick-start">https://kubernetes.github.io/ingress-nginx/deploy/#quick-start</a></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201131956175.png" alt="Untitled"></p><blockquote><p>Nginx ingress controller uses LoadBalancer type service actually as entrypoint to the cluster. Then is checks ingress rules and distributes the load.</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># ingress-srv.yaml</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">networking.k8s.io/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Ingress</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">ingress-srv</span><br>  <span class="hljs-attr">annotations:</span><br>    <span class="hljs-attr">kubernetes.io/ingress.class:</span> <span class="hljs-string">nginx</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">rules:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">host:</span> <span class="hljs-string">posts.com</span><br>      <span class="hljs-attr">http:</span><br>        <span class="hljs-attr">paths:</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-attr">path:</span> <span class="hljs-string">/posts</span><br>            <span class="hljs-attr">pathType:</span> <span class="hljs-string">Prefix</span><br>            <span class="hljs-attr">backend:</span><br>              <span class="hljs-attr">service:</span><br>                <span class="hljs-attr">name:</span> <span class="hljs-string">posts-clusterip-srv</span>      <span class="hljs-comment"># service name</span><br>                <span class="hljs-attr">port:</span><br>                  <span class="hljs-attr">number:</span> <span class="hljs-number">4000</span><br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201131956085.png" alt="Untitled"></p><h1 id="Skaffold"><a class="header-anchor" href="#Skaffold">Â¶</a>Skaffold</h1><p>As the process of deploying app so annoying, we can use this tool to expedite our development.</p><p>è¿™é‡Œå…·ä½“çœ‹ä»£ç </p><div class="note note-success">            <p>ç»ˆäºæå®Œè¿™ä¸ªäº†ï¼Œå­¦åˆ°äº†å‡ ç‚¹ï¼š</p><ol><li>The way of interactions between micro-services is by HTTP requests (or we can use gRPC in future.</li><li>Each service will send event to <code>Event Bus</code> , which is pretty similar to how REDUX works.</li><li>Each service will have a event listener as well.</li><li>Each service will need <code>Deployment</code> , <code>ClusterIP Service</code> to communicate within a cluster.</li><li>A <code>ingress-nginx</code> pod is created to match different routes to specific ports based on route rules. (through nginx)</li><li>A <code>LoadBalancer type</code> Service is automatically initialized with <code>ingress-nginx</code>. It is solely responsible to communicate with <code>ingress-nginx</code> pod.</li><li>Skaffold is able to detech changes made inside  source files by connecting <code>depl.yml, Dockerfile, skaffold.yml</code>Note that we need to use <code>nodemon, star:dev</code> to allow for hot reload.</li></ol>          </div>]]></content>
    
    
    <categories>
      
      <category>backend</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
      <tag>react</tag>
      
      <tag>microservice</tag>
      
      <tag>node.js</tag>
      
      <tag>express.js</tag>
      
      <tag>k8s</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Microservice Basic - Blog (1)</title>
    <link href="/2022/01/12/microservice-basic/"/>
    <url>/2022/01/12/microservice-basic/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>MicroService Basic + Blog Example</p><p>Quite interested at learning new thingsâ€¦ Thus, why not start learning Microservice from now?</p><span id="more"></span><blockquote><p>The banner image shows a traditional snack å†°ç²‰ (bing fen) that I used to have almost every day in my home city. It has both a sour and sweet taste with ice underneath. Different vendors have their different recipes with what items you can put into, but they all share items such as watermelon, bing fen (the transparent, jellyfish-like thing.)<br>My memory about bingfen always comes with the mid-summer where there is no better dessert compared to a bowl of bingfen that can cool me down. In fact, it is not hard to make bingfen at home. Even here in the states, I found there is bingfen powder in Asian supermarkets that allows you to directly make it in your kitchen. Interestingly, the origin of bingfen is seeds of the shoo-fly plant, which is also called the apple of Peru originated from South America.</p></blockquote><h1 id="Microservice-Basic"><a class="header-anchor" href="#Microservice-Basic">Â¶</a>Microservice Basic</h1><h1 id="Basics-Post-Example"><a class="header-anchor" href="#Basics-Post-Example">Â¶</a>Basics + Post Example</h1><p>What is microservice</p><h3 id="Monolithic-Server"><a class="header-anchor" href="#Monolithic-Server">Â¶</a>Monolithic Server</h3><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121208549.png" alt="Untitled"></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121207335.png" alt="Untitled"></p><h3 id="Microservice"><a class="header-anchor" href="#Microservice">Â¶</a>Microservice</h3><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121208702.png" alt="Untitled"></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121208903.png" alt="Untitled"></p><p><strong>Each service is self-contained!</strong></p><p>In summary: A single microservice contains all</p><ul><li>Routing</li><li>Middlewares</li><li>Business Logic</li><li>Database access</li></ul><p>to implement one feature of our app</p><h3 id="Data-Management-Problem"><a class="header-anchor" href="#Data-Management-Problem">Â¶</a>Data Management Problem</h3><p>Microservice has a problem of <strong>data management between services</strong></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121208380.png" alt="Untitled"></p><p>Note:</p><ol><li>Each service has its own database (<strong>database per service)</strong></li><li>Service will <strong>never</strong> reach into another serviceâ€™s database<ol><li><strong>good scale capability</strong></li><li><strong>low coupling (less dependency, more reliability, no single point of failure)</strong></li><li>optimize by choosing the best-fitted database</li></ol></li></ol><blockquote><p>In monolithic design, adding new service is easy as it only access to a single DB</p></blockquote><p>In microservice, it is really hard!</p><blockquote></blockquote><h2 id="General-strategy-to-solve-data-communication-problem"><a class="header-anchor" href="#General-strategy-to-solve-data-communication-problem">Â¶</a>General strategy to solve data communication problem</h2><ul><li>Sync<ul><li>direct requests between services</li><li><strong>drawback</strong>:<ul><li>dependency between services, forming <strong>net of dependency</strong></li><li>single point of failure!</li><li>slowest request is determinant</li></ul></li></ul></li><li>Async<ul><li>events driven<ul><li>all services wire to Event Bus, let Event Bus handle what should each service do in response to event</li><li><strong>drawback:</strong><ul><li>almost same as Sync service</li></ul></li></ul></li><li>let the additional service has its own database<ul><li>other service can emit events to event bus so that other can listen to it and update DB accordingly.</li><li><strong>Good:</strong><ul><li>No dependency</li><li>Extremely fast</li></ul></li><li>Drawback:<ul><li>data duplication (extra storage, however, is relatively free nowadays)</li><li>hard to understand</li></ul></li></ul></li></ul></li></ul><div class="note note-info">            <p>æ¥äº†ä¸€ä¸ª ä¸‰å°æ—¶å¤šçš„ hands-on app <code>blog</code> ğŸ¥² å¥½é•¿</p><p><a href="https://github.com/q815101630/microservice-simple-blog">https://github.com/q815101630/microservice-simple-blog</a></p>          </div><h2 id="Async-Event-Driven-Fetch-Posts-Comments"><a class="header-anchor" href="#Async-Event-Driven-Fetch-Posts-Comments">Â¶</a>Async Event Driven Fetch Posts+Comments</h2><p>We see that to achieve the purpose of GET+POST, we need to do multiple requests to the same route, which is not efficient at all.</p><p>We can introduce a Query Service that assembles all of the blogs + comments into an efficient data structure.</p><p>When other services emit the event, Query service receives and does thing regarding it</p><p>â†’ Send event</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121208332.png" alt="Untitled"></p><p>â†’ Create a post (in query service)</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121208648.png" alt="Untitled"></p><p>â†’ Send event</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121208008.png" alt="Untitled"></p><p>â†’ Create comments (in query service)</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121208876.png" alt="Untitled"></p><p>This type of solution</p><ul><li>Good: has no dependency</li><li>Good: query service is very fast</li><li>Bad: duplicate data</li><li>Bad: hard to hard</li></ul><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121208916.png" alt="Untitled"></p><h1 id="Event-Bus"><a class="header-anchor" href="#Event-Bus">Â¶</a>Event Bus</h1><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121208063.png" alt="Untitled"></p><p>Event bus did what events should be emit to other services</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121208969.png" alt="Untitled"></p><h2 id="Comment-Moderation"><a class="header-anchor" href="#Comment-Moderation">Â¶</a>Comment Moderation</h2><p>In a comment moderation service, the best approach is to let moderation handled by the comment service and emits a generic event <code>CommentUpdated</code> . We do not want too many types that require each service to handle!</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201121208298.png" alt="Untitled"></p><p>Therefore, the overall data flows like:</p><ol><li>User submit comments</li><li>Event <code>CommentCreated</code> event to Event Bus</li><li>Moderation and Query service received this event</li><li>Moderation Emit <code>CommentModerated</code> with a updated event</li><li>Comments service received the event and change status to <code>Approved</code></li><li>Emit <code>CommentUpdated</code> event to Event Bus</li><li>Query Service update the comments based on event</li></ol><h2 id="Exceptions"><a class="header-anchor" href="#Exceptions">Â¶</a>Exceptions</h2><p>If one of the service is lost, how do we handle it?</p><ol><li><strong>Sync Requests,</strong> fetching posts/comments from query service at all time and sync with its local DB</li><li><strong>Direct DB Access,</strong> sync serviceâ€™s local database with each other once a event is emitted.</li><li><strong>Store Event</strong>, Store events in a Event Bus Data Store.</li></ol><p>See the third approach in the example code base!</p><div class="note note-success">            <p>Thank you for reading along this article</p>          </div><h2 id="Ref"><a class="header-anchor" href="#Ref">Â¶</a>Ref</h2><p><a href="https://github.com/q815101630/microservice-simple-blog">https://github.com/q815101630/microservice-simple-blog</a></p>]]></content>
    
    
    <categories>
      
      <category>backend</category>
      
    </categories>
    
    
    <tags>
      
      <tag>react</tag>
      
      <tag>microservice</tag>
      
      <tag>node.js</tag>
      
      <tag>express.js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¾®ä¿¡é€šçŸ¥Twikooæ–°æ¶ˆæ¯æé†’ï¼ˆVercelç‰ˆæœ¬ï¼‰</title>
    <link href="/2022/01/09/wechat-message-vercel/"/>
    <url>/2022/01/09/wechat-message-vercel/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨æŒ‰ç…§ä¸Šé¢æ–‡ç« å®ç°å¾®ä¿¡é€šçŸ¥twikooæ–°æ¶ˆæ¯æé†’æ—¶ï¼Œå› ä¸ºæˆ‘æ˜¯åˆ©ç”¨Verceléƒ¨ç½²çš„Twikooï¼Œå‘ç°å’Œæ•™ç¨‹æœ‰ä¸€äº›å‡ºå…¥ï¼Œç‰¹æ­¤å†™ä¸€ä¸‹å¦‚ä½•ç”¨Vercel åˆ›å»ºäº‘å‡½æ•°ã€‚</p><div class="note note-info">            <p>æœ¬æ•™ç¨‹åŸºäºhttps://guole.fun/posts/626/</p>          </div><h2 id="åˆ›å»ºVercel-äº‘å‡½æ•°"><a class="header-anchor" href="#åˆ›å»ºVercel-äº‘å‡½æ•°">Â¶</a>åˆ›å»ºVercel äº‘å‡½æ•°</h2><p>ä¹‹å‰åˆ›å»ºä¼ä¸šå¾®ä¿¡çš„æ­¥éª¤è·Ÿä¸Šé¢æ–‡ç« èµ°å°±è¡Œã€‚åœ¨åˆ›å»ºAPIäº‘å‡½æ•°æ—¶å€™ï¼Œé¦–å…ˆæ‰¾åˆ°ä½ éƒ¨ç½²twikooåˆ°Vercel çš„æ–‡ä»¶å¤¹ï¼ˆå¦‚æœè¿˜æ²¡æœ‰cloneåˆ°æœ¬åœ°è¿‡å°±å…ˆcloneä¸€éã€‚ï¼‰</p><p>è¿›å…¥åº”ç”¨æ–‡ä»¶å¤¹ã€‚åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹ <code>pipenv install requests</code> (å¦‚æœè¿˜æ²¡ä¸‹è½½è¿‡pipenv çš„å…ˆä¸‹è½½pipenv)</p><p>è¿›å…¥<code>/api</code> æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º<code>python.py</code> çš„æ–‡ä»¶å¹¶è´´å…¥ä»¥ä¸‹ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></div></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> http.server <span class="hljs-keyword">import</span> BaseHTTPRequestHandler<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> urllib.parse <span class="hljs-keyword">import</span> parse_qs<br><span class="hljs-comment"># -*- coding: utf8 -*-</span><br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">handler</span>(<span class="hljs-params">BaseHTTPRequestHandler</span>):</span><br>    <br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">do_GET</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getTocken</span>(<span class="hljs-params"><span class="hljs-built_in">id</span>, secert, msg, agentId</span>):</span><br>            url = <span class="hljs-string">&quot;https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=&quot;</span> + \<br>                <span class="hljs-built_in">id</span> + <span class="hljs-string">&quot;&amp;corpsecret=&quot;</span> + secert<br><br>            r = requests.get(url)<br>            tocken_json = json.loads(r.text)<br>            <span class="hljs-comment"># print(tocken_json[&#x27;access_token&#x27;])</span><br>            sendText(tocken=tocken_json[<span class="hljs-string">&#x27;access_token&#x27;</span>], agentId=agentId, msg=msg)<br><br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sendText</span>(<span class="hljs-params">tocken, agentId, msg</span>):</span><br>            sendUrl = <span class="hljs-string">&quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&quot;</span> + tocken<br>            <span class="hljs-comment"># print(sendUrl)</span><br>            data = json.dumps(&#123;<br>                <span class="hljs-string">&quot;safe&quot;</span>: <span class="hljs-number">0</span>,<br>                <span class="hljs-string">&quot;touser&quot;</span>: <span class="hljs-string">&quot;@all&quot;</span>,<br>                <span class="hljs-string">&quot;msgtype&quot;</span>: <span class="hljs-string">&quot;text&quot;</span>,<br>                <span class="hljs-string">&quot;agentid&quot;</span>: agentId,<br>                <span class="hljs-string">&quot;text&quot;</span>: &#123;<br>                    <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-built_in">str</span>(msg)<br>                &#125;<br>            &#125;)<br>            requests.post(sendUrl, data)<br>            <br>        <span class="hljs-keyword">try</span>:<br>            params = parse_qs(self.path[<span class="hljs-number">12</span>:])<br>            apiid = params[<span class="hljs-string">&#x27;id&#x27;</span>][<span class="hljs-number">0</span>]<br>            apisecert = params[<span class="hljs-string">&#x27;secert&#x27;</span>][<span class="hljs-number">0</span>]<br>            apiagentId = params[<span class="hljs-string">&#x27;agentId&#x27;</span>][<span class="hljs-number">0</span>]<br>            apimsg = params[<span class="hljs-string">&#x27;msg&#x27;</span>][<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">except</span>:<br>            apimsg = self.path<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment">#try:</span><br>            <span class="hljs-comment"># æ‰§è¡Œä¸»ç¨‹åº</span><br>            getTocken(<span class="hljs-built_in">id</span>=apiid, secert=apisecert,<br>                        msg=apimsg, agentId=apiagentId)<br>            <span class="hljs-comment">#except:</span><br>            <span class="hljs-comment">#    status = 1</span><br>            <span class="hljs-comment">#    apimsg = &#x27;ä¸»ç¨‹åºè¿è¡Œæ—¶å‡ºç°é”™è¯¯ï¼Œè¯·æ£€æŸ¥å‚æ•°æ˜¯å¦å¡«å†™æ­£ç¡®ã€‚è¯¦æƒ…å¯ä»¥å‚é˜…ï¼šhttps://blog.zhheo.com/p/1e9f35bc.html&#x27;</span><br>            <span class="hljs-comment">#else:</span><br>            <span class="hljs-comment">#    status = 0</span><br>        <span class="hljs-comment"># print(event)</span><br>        <span class="hljs-comment"># print(&quot;Received event: &quot; + json.dumps(event, indent = 2))</span><br>        <span class="hljs-comment"># print(&quot;Received context: &quot; + str(context))</span><br>        <span class="hljs-comment"># print(&quot;Hello world&quot;)</span><br><br>        self.send_response(<span class="hljs-number">200</span>)<br>        self.send_header(<span class="hljs-string">&#x27;Content-type&#x27;</span>, <span class="hljs-string">&#x27;text/plain&#x27;</span>)<br>        self.end_headers()<br>        self.wfile.write(apimsg)<br>        <span class="hljs-keyword">return</span><br><br></code></pre></td></tr></table></figure><p>æ­¤ä»£ç æ˜¯ä¿®æ”¹äºä¸Šç¯‡æ–‡ç« çš„äº‘å‡½æ•°ä»£ç ï¼Œæ‰€ä»¥åªæ”¹äº†å¿…è¦æ”¹çš„åœ°æ–¹ï¼Œæ³¨é‡Šäº†ä¸éœ€è¦çš„åœ°æ–¹ã€‚æœ¬æ¥æƒ³ç”¨JS é‡å†™ä¸€ä¸‹ä½†æ˜¯æƒ³ç€èƒ½ç”¨å°±è¡Œã€‚</p><p>pushå½“å‰çš„æ›´æ”¹ä¹‹åï¼Œå½“Vercelå®Œæˆéƒ¨ç½²åï¼Œä½ å¯ä»¥åˆ°</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">https:<span class="hljs-string">//</span>&lt; vercel_app_address&gt;<span class="hljs-string">/api/python</span>?id=&lt;ww.<span class="hljs-string">...</span>&gt;&amp;secert=&lt;secret.<span class="hljs-string">..</span>&gt;&amp;agentId=&lt;agentId.<span class="hljs-string">..</span>&gt;&amp;msg=æµ‹è¯•ä¸€ä¸‹å§<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ä½ çš„è®¿é—®è·¯å¾„æ˜¯å¦æœ‰æ•ˆ ï¼ˆåœ¨å¯¹åº”çš„ä½ç½®å¡«å…¥ä½ çš„ä¿¡æ¯ï¼‰ã€‚</p><p>å¦‚æœæˆåŠŸçš„è¯ä½ çš„æ‰‹æœºä¼šæ¥æ”¶åˆ°å¯¹åº”çš„æ¨é€ï¼ˆå¦‚æœä½ çš„ä¼ä¸šå¾®ä¿¡æ³¨å†ŒæˆåŠŸä¸”æ‰€å¡«ä¿¡æ¯æ­£ç¡®ï¼‰ã€‚</p><p>æ³¨æ„æ–‡ä»¶åå‘½åå¿…é¡»æ˜¯<code>python.py</code> å¦åˆ™ä½ å¯èƒ½éœ€è¦æ›´æ”¹ è·å–query parameters éƒ¨åˆ†çš„ä»£ç ã€‚</p><p>ä¹‹ååªéœ€è¦å›åˆ°ä¸Šç¯‡æ–‡ç« å†åšTwikooé…ç½®å¹¶ä¸”å…³è”åˆ°å¾®ä¿¡å°±å¤§åŠŸå‘Šæˆï¼</p><p>æœ‰é—®é¢˜å¯ä»¥ä¸‹é¢è¯„è®ºå‘Šè¯‰æˆ‘ã€‚Happy coding!</p>]]></content>
    
    
    <categories>
      
      <category>general</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git Review Basics</title>
    <link href="/2022/01/07/Git-Review-Basic/"/>
    <url>/2022/01/07/Git-Review-Basic/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Git-Review-Basic"><a href="#Git-Review-Basic" class="headerlink" title="Git Review Basic"></a>Git Review Basic</h1><span id="more"></span><p><a href="https://learngitbranching.js.org/?locale=en_US">https://learngitbranching.js.org/?locale=en_US</a></p><p><a href="https://github.com/pcottle/learnGitBranching">https://github.com/pcottle/learnGitBranching</a></p><p>A way of learning git with visualization.</p><div class="note note-warning">            <p>Since this blog post, I will bring some of my personal life into the site to make it more vivid. </p>          </div><blockquote><p>This index page image is one of the famous sceneries in my hometown â€“Chengdu, Sichuan, China. The mixture of green bamboo, red walls, and emerald tiles depict a beautiful, peaceful Chinese garden painting in a traditional Chinese style. It is reminiscent of my childhood in summer where I played with my friends in a park (called æ¢¨å›­ Liyuan, removed years ago for the purpose to rebuild that part of the Chengdu city.) </p></blockquote><h1 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h1><h2 id="Commit"><a href="#Commit" class="headerlink" title="Commit"></a>Commit</h2><ul><li><code>git commit</code> : simply a snapshot of all the <strong>tracked</strong> files in the directory</li></ul><h2 id="Branch"><a href="#Branch" class="headerlink" title="Branch"></a>Branch</h2><p>Branches are simply <strong>pointers to specific commit</strong>. No extra memory/ storage overhead with making many branches. </p><p><em>A branch can be translated as : want to include the work of this commits and all parent commits.</em> </p><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">git branch [branchname]<br>git checkout [branchname]<br><span class="hljs-comment"># Equivalent to the following</span><br>git checkout -b [branchname]<br></code></pre></td></tr></table></figure><h2 id="Merging"><a href="#Merging" class="headerlink" title="Merging"></a>Merging</h2><p>Merge is to <strong>combine the work from two different branches together</strong>.</p><p>Meging creates a special commit that has two unique parents. </p><p><em>A commit with two parents can be translated as : want to include all the work from from these two parents and the set of all their parents.</em></p><p>Note that: <code>git merge [branchname]</code> is to take all the commits from another branch and merge with current branch!</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201071651473.png" alt="Untitled"></p><h2 id="Rebasing"><a href="#Rebasing" class="headerlink" title="Rebasing"></a>Rebasing</h2><p>Rebasing is to take a set of commits, copy them, and plop them down somewhere else.</p><p>If currently we are on <code>C3</code>, and we do<code>git rebase main</code> </p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201071651132.png" alt="Untitled"></p><p><code>C3</code> will be the next commit of main, and that is essentially what <code>rebase</code> do.  main is the ancestor of <code>bugFix</code>.</p><p>then we will do the <code>git rebase bugFix</code> on <code>main</code> . Git notice <code>main</code>  is the ancestor of <code>bugFix</code> so it simply moves <code>main</code>  branch reference forward in history.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201071651490.png" alt="Untitled"></p><p><em>Rebasing can be translated to: reallocate current branch to be the next branch of some branch so that a sequential commit history is shown.</em></p><h2 id="HEAD"><a href="#HEAD" class="headerlink" title="HEAD"></a>HEAD</h2><p>HEAD: A symbolic name for the <strong>currently checked out commit,</strong> itâ€™s essentially <strong>what commit youâ€™re working on top of.</strong> </p><p><em>HEAD can be translate to your current position in the tree</em></p><ul><li>HEAD always points to the most recent commit branch.</li><li>HEAD points to a branch name such as <code>bugFix</code>. When commit, the status of <code>bugFix</code> is changed through looking at <code>HEAD</code></li></ul><p>To detach HEAD means to go back to a specific commit (not specific branch though, a branch name can be seen as the default HEAD of that branch)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git checkout [commitHash]<br></code></pre></td></tr></table></figure><h2 id="Relative-Refs"><a href="#Relative-Refs" class="headerlink" title="Relative Refs"></a>Relative Refs</h2><ul><li>Moving upwards one commit at a time with <code>^</code> (Caret)</li><li>Moving upwards a number of times with <code>~&lt;num&gt;</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># find the last (parent) commit of main, set HEAD there</span><br>git checkout main^<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201071651688.png" alt="Untitled"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># (find parent and set HEAD there) x3</span><br>git checkout C3<br>git checkout HEAD^<br>git checkout HEAD^<br>git checkout HEAD^<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201071651277.png" alt="Untitled"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Go 4 levels up the tree!</span><br>git checkout HEAD~4<br></code></pre></td></tr></table></figure><h3 id="Branch-forcing"><a href="#Branch-forcing" class="headerlink" title="Branch forcing"></a>Branch forcing</h3><p>Notice that this only reassign different branch name onto another commit, but not changing the work tree. </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># move a branch to a specific place by force</span><br><span class="hljs-comment"># git branch -f [branchname] [destination]</span><br>git branch -f main HEAD~3 <br></code></pre></td></tr></table></figure><h2 id="Reversing-Changes"><a href="#Reversing-Changes" class="headerlink" title="Reversing Changes"></a>Reversing Changes</h2><h3 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h3><p>Reset is to reverse changes by moving a branch reference backwards in time to an older commit. </p><p>git reset can be translated as rewrite the history as if the commit had never been made in the first place. </p><p>use <code>git reset</code> when you have committed in your local machine but wants to discard it.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># git reset [destination]</span><br>git reset HEAD~1<br></code></pre></td></tr></table></figure><h3 id="git-revert"><a href="#git-revert" class="headerlink" title="git revert"></a>git revert</h3><p>git reset works well on local machine ,but it cannot share this reset with remote repo</p><p>git revert can do this job.</p><p><code>git revert</code> introduces a new changes that happens to reset all changes made by <code>C2</code>.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202201071651724.png" alt="Untitled"></p><h1 id="Intermediate"><a href="#Intermediate" class="headerlink" title="Intermediate"></a>Intermediate</h1><p><a href="https://www.notion.so/Git-Review-Intermediate-188b651b1da94ac49b06802913e6ec19">Git Review Intermediate</a></p>]]></content>
    
    
    <categories>
      
      <category>general</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NestJs-Notes</title>
    <link href="/2021/12/16/NestJs-Notes/"/>
    <url>/2021/12/16/NestJs-Notes/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Nest.js Course</p><span id="more"></span><h1 id="Nest-js-Course"><a class="header-anchor" href="#Nest-js-Course">Â¶</a>Nest.js Course</h1><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/Untitasdled.png" alt="Untitled"></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161129474.png" alt="Untitled"></p><p>NestJs provides special tools to control the flow.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130316.png" alt="Untitled"></p><h2 id="NestJs-decorators"><a class="header-anchor" href="#NestJs-decorators">Â¶</a>NestJs decorators</h2><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130694.png" alt="Untitled"></p><h2 id="Validate-data"><a class="header-anchor" href="#Validate-data">Â¶</a>Validate data</h2><p>ValidationPipe</p><figure class="highlight plain"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><pre><code class="hljs tsx">import &#123; NestFactory &#125; from &#39;@nestjs&#x2F;core&#39;;<br>import &#123; MessagesModule &#125; from &#39;.&#x2F;messages&#x2F;messages.module&#39;;<br><br>import &#123; ValidationPipe &#125; from &#39;@nestjs&#x2F;common&#39;;<br><br>async function bootstrap() &#123;<br>  const app &#x3D; await NestFactory.create(MessagesModule);<br><br>  app.useGlobalPipes(new ValidationPipe());<br><br>  await app.listen(3000);<br>&#125;<br>bootstrap();<br></code></pre></td></tr></table></figure><p><strong>Validation workflow</strong></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130307.png" alt="Untitled"></p><h2 id="Service-â†”-Repository"><a class="header-anchor" href="#Service-â†”-Repository">Â¶</a>Service â†” Repository</h2><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130133.png" alt="Untitled"></p><p>One services may include multiple repositories.</p><h1 id="Dependency-Injection"><a class="header-anchor" href="#Dependency-Injection">Â¶</a>Dependency Injection</h1><blockquote><p>making use of inversion of control with minimal number of instance</p></blockquote><p>Motivation:</p><p>â†’ : dependent on</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130861.png" alt="Untitled"></p><p>Pipe â†’ MessagesController â†’ Messages Service â†’ Messages Repository</p><p>å¦‚æœæˆ‘ä»¬åœ¨ <code>Service constructor</code> é‡Œé¢ instantiate the <code>repository</code></p><p>é‚£ä¹ˆæˆ‘ä»¬å°±è¿åäº† inversion of control principle</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130365.png" alt="Untitled"></p><p>åœ¨Briefly 2.0é‡Œï¼Œ çŠ¯äº†è¿™ä¸ªé”™è¯¯ï¼Œæ‰€ä»¥å¯¼è‡´æ¯ä¸ªç±»éƒ½åŸºäº ä¸€ä¸ª machine learning model</p><p>In this example, we define an <code>interface</code> , in which the interface defines a list of methods that can be performed.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130792.png" alt="Untitled"></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130578.png" alt="Untitled"></p><p>To make a controller with inversion of control, we need:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tsx">const repo &#x3D; new Messages Repository();<br>const service &#x3D; new MessagesService(repo);<br>const controller &#x3D; new MessagesController(service);<br><br>const controller &#x3D; new MessagesController();<br></code></pre></td></tr></table></figure><p>With dependency injection, we can minimize the amount of code</p><h2 id="DI-Container-Injectors"><a class="header-anchor" href="#DI-Container-Injectors">Â¶</a>DI Container/Injectors</h2><p>A place to store all classes and their dependencies AND instances that I have created</p><p>Internally, when we feed our controller to Nest, it will look over the <code>constructor</code> of the controller and register all dependencies into the DI container. Then it will create such dependency instance so a controller can be created.</p><p><strong>The benefit of doing this is that we only create one copy of dependency and share it through controllers (i.e. services, repository)!</strong></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130660.png" alt="Untitled"></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130869.png" alt="Untitled"></p><p><code>Injectable</code> marks a class to register in container</p><p>add these classes into <code>module decorator providers</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs tsx"> export class MessagesService &#123;<br>messagesRepo: MessagesRepository;<br>constructor(messagesRepo: MessagesRepository)&#123;<br>this.messagesRepo &#x3D; messagesRepo;<br>&#125;<br>&#125;<br>&#x2F;&#x2F;Same as <br>export class MessagesService &#123;<br>constructor(public messagesRepo: MessagesRepository)&#123;&#125;<br>&#125;<br><br>export class MessagesService &#123;<br>constructor(private messagesRepo: MessagesRepository)&#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="DI-inside-a-module"><a class="header-anchor" href="#DI-inside-a-module">Â¶</a>DI inside a module</h3><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130949.png" alt="Untitled"></p><h3 id="DI-between-modules"><a class="header-anchor" href="#DI-between-modules">Â¶</a>DI between modules</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tsx">&#x2F;&#x2F; power.modules.ts<br>import &#123; Module &#125; from &quot;@nestjs&#x2F;common&quot;;<br>import &#123; PowerService &#125; from &quot;.&#x2F;power.service;<br><br>@Module(&#123;<br>providers: [PowerService],<br>exports: [PowerService]<br>&#125;)<br>export class PowerModule&#123;&#125;<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130581.png" alt="Untitled"></p><h1 id="About-Typeorm"><a class="header-anchor" href="#About-Typeorm">Â¶</a>About Typeorm</h1><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130705.png" alt="Untitled"></p><p>To create a entity:</p><ol><li>Connect with db at <code>app.module</code></li><li>Create <code>User</code> entity</li><li>import <code>TypeOrmModule.forFeature([User])</code> at <code>User.module</code></li><li>import <code>User</code> at <code>app.module</code></li></ol><h2 id="Connection-with-SQLite"><a class="header-anchor" href="#Connection-with-SQLite">Â¶</a>Connection with SQLite</h2><p><code>forRoot</code> means the connection is shared through all modules!</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tsx">@Module(&#123;<br>  imports: [<br>    TypeOrmModule.forRoot(&#123;<br>      type: &#39;sqlite&#39;,<br>      database: &#39;db.sqlite&#39;,<br>      entities: [],      &#x2F;&#x2F;at last, add User into this list<br>      synchronize: true, &#x2F;&#x2F; only in dev: automatically update SQL table<br>    &#125;),<br>    UsersModule,<br>    ReportsModule,<br>  ],<br>  controllers: [AppController],<br>  providers: [AppService],<br>&#125;)<br>export class AppModule &#123;&#125;<br></code></pre></td></tr></table></figure><h2 id="Auto-create-repository-for-user"><a class="header-anchor" href="#Auto-create-repository-for-user">Â¶</a>Auto create repository for user</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tsx">import &#123; Module &#125; from &#39;@nestjs&#x2F;common&#39;;<br>import &#123; TypeOrmModule &#125; from &#39;@nestjs&#x2F;typeorm&#39;;<br>import &#123; UsersController &#125; from &#39;.&#x2F;users.controller&#39;;<br>import &#123; UsersService &#125; from &#39;.&#x2F;users.service&#39;;<br><br>import &#123; User &#125; from &#39;.&#x2F;user.entity&#39;;<br>@Module(&#123;<br>  imports: [TypeOrmModule.forFeature([User])], &#x2F;&#x2F;auto-create repo<br>  controllers: [UsersController],<br>  providers: [UsersService],<br>&#125;)<br>export class UsersModule &#123;&#125;<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130038.png" alt="Untitled"></p><h2 id="validation-pipe"><a class="header-anchor" href="#validation-pipe">Â¶</a>validation pipe</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tsx">async function bootstrap() &#123;<br>  const app &#x3D; await NestFactory.create(AppModule);<br>  app.useGlobalPipes(<br>    new ValidationPipe(&#123;<br>      whitelist: true, &#x2F;&#x2F; means: only allow those I defined in DTO to be validate<br>    &#125;),<br>  );<br>  await app.listen(3000);<br>&#125;<br>bootstrap();<br></code></pre></td></tr></table></figure><h2 id="Inject-Repo-into-Service"><a class="header-anchor" href="#Inject-Repo-into-Service">Â¶</a>Inject Repo into Service</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; Injectable &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; Repository &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;typeorm&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; InjectRepository &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/typeorm&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; User &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./user.entity&#x27;</span>;<br><br>@Injectable()<br><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsersService</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">@InjectRepository(User) private repo: Repository&lt;User&gt;</span>)</span> &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>the decorator <code>InjectRepository(User)</code> is needed for the generic type <code>&lt;User&gt;</code></p><p><code>this.repo.create(&#123;email, password&#125;);</code> creates an entity.</p><p><code>this.repo.save(user);</code> persists the data into DB.</p><p>Why we need to split them into two is that: if validation is set on the entity directly, we can validate them between <code>create</code> and <code>save</code>.</p><h2 id="Hooks"><a class="header-anchor" href="#Hooks">Â¶</a>Hooks</h2><p>Hooks are basically the <code>Trigger</code> in SQL</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">//user.entity.ts</span><br><span class="hljs-keyword">import</span> &#123;<br>  AfterInsert,<br>  AfterRemove,<br>  AfterUpdate,<br>  Entity,<br>  Column,<br>  PrimaryGeneratedColumn,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;typeorm&#x27;</span>;<br><br>@Entity()<br><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>  @PrimaryGeneratedColumn()<br>  id: number;<br><br>  @Column()<br>  email: string;<br><br>  @Column()<br>  password: string;<br><br>  @AfterInsert()<br>  <span class="hljs-function"><span class="hljs-title">logInsert</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Inserted User: &#x27;</span>, <span class="hljs-built_in">this</span>.id);<br>  &#125;<br><br>  @AfterUpdate()<br>  <span class="hljs-function"><span class="hljs-title">logUpdate</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Updated User: &#x27;</span>, <span class="hljs-built_in">this</span>.id);<br>  &#125;<br><br>  @AfterRemove()<br>  <span class="hljs-function"><span class="hljs-title">logRemove</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Removed User: &#x27;</span>, <span class="hljs-built_in">this</span>.id);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Saving User entity (by create - save) instance will trigger <code>Hook</code>, directly saving  (only by save) will not trigger hook.</p><p>Similar with <code>save()</code> with <code>insert()</code> <code>update()</code></p><p><code>save()</code> is called with a user entity object, <code>insert()</code> <code>update()</code> is called with a SQL record</p><p>Similar to <code>remove()</code> with <code>delete()</code> .</p><h2 id="Update-Partial"><a class="header-anchor" href="#Update-Partial">Â¶</a>Update / Partial</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">update</span>(<span class="hljs-params">id: number, attrs: Partial&lt;User&gt;</span>)</span> &#123;<br>    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.findOne(id);<br>    <span class="hljs-keyword">if</span> (!user) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;User not found&#x27;</span>);<br>    &#125;<br>    <span class="hljs-built_in">Object</span>.assign(user, attrs);<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.repo.save(user);<br>  &#125;<br></code></pre></td></tr></table></figure><p>if we want to use <code>entity</code> , we need to first fetch the entity from DB and then update the entity. <code>Object.assign</code> allows attrs to be expanded and overwrites/add all attributes of <code>user</code> object. Then we call <code>save(user)</code></p><h2 id="controller-CRUD-parseInt"><a class="header-anchor" href="#controller-CRUD-parseInt">Â¶</a>controller CRUD / parseInt</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx">@Get(<span class="hljs-string">&#x27;/:id&#x27;</span>)<br>  <span class="hljs-function"><span class="hljs-title">findUser</span>(<span class="hljs-params">@Param(<span class="hljs-string">&#x27;id&#x27;</span>) id: string</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.usersService.findOne(<span class="hljs-built_in">parseInt</span>(id));<br>  &#125;<br><br>@Get(<span class="hljs-string">&#x27;/&#x27;</span>)<br>  <span class="hljs-function"><span class="hljs-title">findAllusers</span>(<span class="hljs-params">@Query(<span class="hljs-string">&#x27;email&#x27;</span>) email: string</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.usersService.find(email);<br>  &#125;<br><span class="hljs-comment">//... and more, check out code base</span><br></code></pre></td></tr></table></figure><h2 id="Error-handling"><a class="header-anchor" href="#Error-handling">Â¶</a>Error handling</h2><p>We cannot handle <code>NotFoundException</code> at the service level because other transmitting protocol such as <code>WebSocket</code> does not support suck error handling.  But in our case, we can do so as we do not aim to utilize this service in other protocols at this time.</p><h2 id="Exclude-attrs-from-an-entity"><a class="header-anchor" href="#Exclude-attrs-from-an-entity">Â¶</a>Exclude attrs from an entity</h2><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130426.png" alt="Untitled"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">//user.entity.ts</span><br>...<br>  @Exclude()<br>  @Column()<br>  password: string;<br>...<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">//users.controller.ts</span><br>  @UseInterceptors(ClassSerializerInterceptor)<br>  @Get(<span class="hljs-string">&#x27;/:id&#x27;</span>)<br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">findUser</span>(<span class="hljs-params">@Param(<span class="hljs-string">&#x27;id&#x27;</span>) id: string</span>)</span> &#123;<br>    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.usersService.findOne(<span class="hljs-built_in">parseInt</span>(id));<br>    <span class="hljs-keyword">if</span> (!user) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotFoundException(<span class="hljs-string">&#x27;User not found&#x27;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> user;<br>  &#125;<br></code></pre></td></tr></table></figure><p>This approach is not the best because it is not customizable.</p><h2 id="A-new-approach-custom-interceptor"><a class="header-anchor" href="#A-new-approach-custom-interceptor">Â¶</a><strong>A new approach: custom interceptor</strong></h2><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130513.png" alt="Untitled"></p><p>We can apply our custom interceptor on all routes, controllers, global levels!</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161130519.png" alt="Untitled"></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161131762.png" alt="Untitled"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// interceptors/serialize.interceptor.ts</span><br><span class="hljs-keyword">import</span> &#123; NestInterceptor, ExecutionContext, CallHandler, UseInterceptors &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; Observable &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rxjs&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; map &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rxjs/operators&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; plainToClass &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;class-transformer&#x27;</span>;<br><br><span class="hljs-comment">// check it must be a class</span><br>interface ClassConstructor &#123;<br>  <span class="hljs-keyword">new</span> (...args: any[]): &#123;&#125;;<br>&#125;<br><br><span class="hljs-comment">//wrap a decorator around a class</span><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Serialize</span>(<span class="hljs-params">dto: ClassConstructor </span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> UseInterceptors(<span class="hljs-keyword">new</span> SerializeInterceptor(dto));<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SerializeInterceptor</span> <span class="hljs-title">implements</span> <span class="hljs-title">NestInterceptor</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">private dto: ClassConstructor </span>)</span> &#123;&#125;<br><br>  intercept(context: ExecutionContext, <span class="hljs-attr">next</span>: CallHandler): Observable&lt;any&gt; &#123;<br>    <span class="hljs-comment">//Here runs before the handler</span><br>    <span class="hljs-comment">// console.log(&#x27;Before...&#x27;);</span><br><br>    <span class="hljs-comment">//Here runs after the handler but before the response is sent</span><br>    <span class="hljs-keyword">return</span> next.handle().pipe(<br>      map(<span class="hljs-function">(<span class="hljs-params">data: any</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> plainToClass(<span class="hljs-built_in">this</span>.dto, data, &#123;<br>          excludeExtraneousValues: <span class="hljs-literal">true</span>,<br>        &#125;);<br>      &#125;),<br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// users.controller.ts</span><br><br><span class="hljs-comment">//@UseInterceptors(new SerializeInterceptor(UserDto));</span><br>  @Serialize(UserDto)<br>  @Get(<span class="hljs-string">&#x27;/:id&#x27;</span>)<br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">findUser</span>(<span class="hljs-params">@Param(<span class="hljs-string">&#x27;id&#x27;</span>) id: string</span>)</span> &#123;<br>    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.usersService.findOne(<span class="hljs-built_in">parseInt</span>(id));<br>    <span class="hljs-keyword">if</span> (!user) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotFoundException(<span class="hljs-string">&#x27;User not found&#x27;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> user;<br>  &#125;<br></code></pre></td></tr></table></figure><p>Or we can apply to the whole controller</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">@Controller(<span class="hljs-string">&#x27;auth&#x27;</span>)<br>@Serialize(UserDto)<br><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsersController</span> </span>&#123;...&#125;<br></code></pre></td></tr></table></figure><h1 id="Authentication"><a class="header-anchor" href="#Authentication">Â¶</a>Authentication</h1><p>Create a new Auth service is very scalable if we have more auth feature in the future!</p><h2 id="Session"><a class="header-anchor" href="#Session">Â¶</a>Session</h2><p>To use session</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">npm install @type/cookie-session cookie-session<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">//main.ts</span><br><span class="hljs-keyword">import</span> &#123; NestFactory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/core&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; AppModule &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./app.module&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; ValidationPipe &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;<br><span class="hljs-keyword">const</span> cookieSession = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;cookie-session&#x27;</span>);<br><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bootstrap</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> NestFactory.create(AppModule);<br>  app.use(<br>    cookieSession(&#123;<br>      keys: [<span class="hljs-string">&#x27;asdasd&#x27;</span>], <span class="hljs-comment">//for encryption purpose</span><br>    &#125;),<br>  );<br>  app.useGlobalPipes(<br>    <span class="hljs-keyword">new</span> ValidationPipe(&#123;<br>      whitelist: <span class="hljs-literal">true</span>, <span class="hljs-comment">// means: only allow those I defined in DTO to be validate</span><br>    &#125;),<br>  );<br>  <span class="hljs-keyword">await</span> app.listen(<span class="hljs-number">3000</span>);<br>&#125;<br>bootstrap();<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx">@Post(<span class="hljs-string">&#x27;/signin&#x27;</span>)<br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">signinUser</span>(<span class="hljs-params">@Body() body: CreateUserDto, @Session() session</span>)</span> &#123;<br>    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.authService.signin(body.email, body.password);<br>    session.userId = user.id;<br>    <span class="hljs-keyword">return</span> user;<br>  &#125;<br><br>@Post(<span class="hljs-string">&#x27;/signout&#x27;</span>)<br>  <span class="hljs-function"><span class="hljs-title">signOut</span>(<span class="hljs-params">@Session() session</span>)</span> &#123;<br>    session.userId = <span class="hljs-literal">null</span>;<br>  &#125;<br></code></pre></td></tr></table></figure><p>This directly store session userId</p><h2 id="Custom-decorator"><a class="header-anchor" href="#Custom-decorator">Â¶</a>Custom decorator</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; ExecutionContext, createParamDecorator &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> CurrentUser = createParamDecorator(<br>  (data: never, <span class="hljs-attr">context</span>: ExecutionContext) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;hi!&#x27;</span>;<br>  &#125;,<br>);<br></code></pre></td></tr></table></figure><p><code>data</code> is the params passed to the decorator!</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">//current-user.decorator.ts</span><br><span class="hljs-keyword">import</span> &#123; ExecutionContext, createParamDecorator &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> CurrentUser = createParamDecorator(<br>  (data: never, <span class="hljs-attr">context</span>: ExecutionContext) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> request = context.switchToHttp().getRequest();<br>    <span class="hljs-keyword">return</span> request.currentUser;<br>  &#125;,<br>);<br><br><span class="hljs-comment">//current-user.interceptor.ts</span><br><span class="hljs-keyword">import</span> &#123;<br>  NestInterceptor,<br>  ExecutionContext,<br>  CallHandler,<br>  Injectable,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;<br><br><span class="hljs-keyword">import</span> &#123; UsersService &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../users.service&#x27;</span>;<br><br>@Injectable()<br><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CurrentUserInterceptor</span> <span class="hljs-title">implements</span> <span class="hljs-title">NestInterceptor</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">private usersService: UsersService</span>)</span> &#123;&#125;<br><br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">intercept</span>(<span class="hljs-params">context: ExecutionContext, handler: CallHandler</span>)</span> &#123;<br>    <span class="hljs-keyword">const</span> request = context.switchToHttp().getRequest();<br>    <span class="hljs-keyword">const</span> &#123; userId &#125; = request.session || &#123;&#125;;<br><br>    <span class="hljs-keyword">if</span> (userId) &#123;<br>      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.usersService.findOne(userId);<br>      request.currentUser = user;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> handler.handle();<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>Since the decorator is not part of the dependency injection system, we need to use an interceptor to access <code>UsersService</code> to retrieve the current user based on the stored session <code>userId</code></p><p>If we do not use the <code>decorator</code> we then need to pass <code>@Request() request: Request</code> in the controller method.</p><p>Donâ€™t forget to add <code>CurrentUserInterceptor</code> into <code>provider</code> of <code>users. module.ts</code></p><p>We need to apply <code>CurrentUserInterceptor</code> to the controller to make <code>CurrentUser</code> decorator into effect</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">@Controller(<span class="hljs-string">&#x27;auth&#x27;</span>)<br>@Serialize(UserDto)<br>@UseInterceptors(CurrentUserInterceptor)<br><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsersController</span> </span>&#123;&#125;<br></code></pre></td></tr></table></figure><p>Or, we can apply <code>interceptors</code> globally!</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx">@Module(&#123;<br>  imports: [TypeOrmModule.forFeature([User])],<br>  controllers: [UsersController],<br>  providers: [<br>    UsersService,<br>    AuthService,<br>    &#123;<br>      provide: APP_INTERCEPTOR,<br>      useClass: CurrentUserInterceptor,<br>    &#125;,<br>  ],<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsersModule</span> </span>&#123;&#125;<br></code></pre></td></tr></table></figure><p>This allows <code>CurrentUserInterceptor</code> to be globally applied</p><p><code>Handler</code> is same as <code>controller method</code></p><h2 id="Guard"><a class="header-anchor" href="#Guard">Â¶</a>Guard</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; CanActivate, ExecutionContext &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthGuard</span> <span class="hljs-title">implements</span> <span class="hljs-title">CanActivate</span> </span>&#123;<br>  canActivate(context: ExecutionContext): boolean &#123;<br>    <span class="hljs-keyword">const</span> request = context.switchToHttp().getRequest();<br>    <span class="hljs-keyword">return</span> request.session.userId;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Q: why we need <code>ExecutionContext</code> there?</p><p>A: We need to make sure what kind of protocol we are using!</p><h1 id="Test"><a class="header-anchor" href="#Test">Â¶</a>Test</h1><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161131857.png" alt="Untitled"></p><p><code>providers</code> array is a list of injectables we want to register in our testing DI container!</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tsx">providers: [<br>      AuthService,<br>      &#123;<br>        provide: UsersService,<br>        useValue: fakeUsersService,<br>      &#125;,<br>    ],<br></code></pre></td></tr></table></figure><p><code>AuthService</code> will be registered as normally, when it is initialized in the DI container, the container will look over all its dependencies and try to create the instance.</p><p>The point comes: the second object means if any injectables or controller need to initialize a service <code>UsersService</code>, then DI container will use <code>fakeUsersService</code>!</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tsx">&#x2F;&#x2F;Create a fake copy of the usersService<br>  const fakeUsersService &#x3D; &#123;<br>    find: () &#x3D;&gt; Promise.resolve([]),<br>    create: (email: string, password: string) &#x3D;&gt;<br>      Promise.resolve(&#123; id: 1, email, password &#125;),<br>  &#125;;<br></code></pre></td></tr></table></figure><p>This <code>fakeUsersService</code> object implements several methods that are needed for initializing <code>AuthService</code>!</p><p><code>find()</code> and <code>create()</code> are all async, we need to return <code>Promise</code></p><p><code>Promise. resolve()</code>immediately return a resolved promise with the given value.</p><p>To help TypeScript to infer the needed methods for <code>fakeUsersService</code></p><p>We can use <code>Partial&lt;UsersService&gt;</code> on <code>fakeUsersService</code></p><p>since <code>create()</code> expects to return a user entity, the fake user entity is an object without method such as <code>logRemove</code> etcâ€¦ Therefore, we can enforce it to <code>User</code> entity type.</p><p>The full code:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs tsx">import &#123; Test &#125; from &#39;@nestjs&#x2F;testing&#39;;<br>import &#123; AuthService &#125; from &#39;.&#x2F;auth.service&#39;;<br>import &#123; User &#125; from &#39;.&#x2F;user.entity&#39;;<br>import &#123; UsersService &#125; from &#39;.&#x2F;users.service&#39;;<br><br>describe(&#39;AuthService&#39;, () &#x3D;&gt; &#123;<br>  let service: AuthService;<br><br>  &#x2F;&#x2F; For every single test, gets a new AuthService<br>  beforeEach(async () &#x3D;&gt; &#123;<br>    &#x2F;&#x2F;Create a fake copy of the usersService<br>    const fakeUsersService: Partial&lt;UsersService&gt; &#x3D; &#123;<br>      find: () &#x3D;&gt; Promise.resolve([]),<br>      create: (email: string, password: string) &#x3D;&gt;<br>        Promise.resolve(&#123; id: 1, email, password &#125; as User),<br>    &#125;;<br><br>    &#x2F;&#x2F; this is a DI container<br>    const module &#x3D; await Test.createTestingModule(&#123;<br>      providers: [<br>        AuthService,<br>        &#123;<br>          provide: UsersService,<br>          useValue: fakeUsersService,<br>        &#125;,<br>      ],<br>    &#125;).compile();<br>    &#x2F;&#x2F; Create a test Service<br>    service &#x3D; module.get(AuthService);<br>  &#125;);<br><br>  it(&#39;can create an instance of auth service&#39;, async () &#x3D;&gt; &#123;<br>    expect(service).toBeDefined();<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">&quot;test:watch&quot;: &quot;jest --watch --maxWorkers&#x3D;1&quot;<br></code></pre></td></tr></table></figure><p>Speed up testing</p><h2 id="More-test"><a class="header-anchor" href="#More-test">Â¶</a>More test</h2><p>If two tests require two different methods implementation,</p><p>we need to set the <code>fakeUsersService</code> to global scope and tweek the implementation of <code>find()</code>  in the respective test</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs tsx">it(&#39;throws an error if user signs up with email that is in use.&#39;, async () &#x3D;&gt; &#123;<br>    fakeUsersService.find &#x3D; () &#x3D;&gt;<br>      Promise.resolve([<br>        &#123; id: 1, email: &#39;abc@abc.com&#39;, password: &#39;qwe&#39; &#125; as User,<br>      ]);<br>    expect.assertions(2);<br>    &#x2F;&#x2F; We expect it to fail in try, and catch allows test to be done<br>    &#x2F;&#x2F; Jest will assume test is fail if it does not finish in 5 seconds<br>    try &#123;<br>      await service.signup(&#39;qwe@qwe.com&#39;, &#39;qwe&#39;);<br>    &#125; catch (error) &#123;<br>      expect(error).toBeInstanceOf(BadRequestException);<br>      expect(error.message).toEqual(&#39;User already exists&#39;);<br>    &#125;<br>  &#125;);<br><br>it(&#39;throws an error if user signs in with unused email&#39;, async () &#x3D;&gt; &#123;<br>    expect.assertions(2);<br>    try &#123;<br>      await service.signin(&#39;asdasdasdqw@asdasda.com&#39;, &#39;qwe&#39;);<br>    &#125; catch (error) &#123;<br>      expect(error).toBeInstanceOf(BadRequestException);<br>      expect(error.message).toEqual(&quot;User doesn&#39;t exist&quot;);<br>    &#125;<br>  &#125;);<br></code></pre></td></tr></table></figure><h2 id="Password-comparison"><a class="header-anchor" href="#Password-comparison">Â¶</a>Password comparison</h2><p>Please refer to the github codebase</p><p><a href="https://github.com/q815101630/nestJs_mycv/blob/main/src/users/auth.service.spec.ts">https://github.com/q815101630/nestJs_mycv/blob/main/src/users/auth.service.spec.ts</a></p><h2 id="Controller-testing"><a class="header-anchor" href="#Controller-testing">Â¶</a>Controller testing</h2><p>Refers to test</p><p><a href="https://github.com/q815101630/nestJs_mycv/blob/main/src/users/users.controller.spec.ts">https://github.com/q815101630/nestJs_mycv/blob/main/src/users/users.controller.spec.ts</a></p><h1 id="End-To-End-Test"><a class="header-anchor" href="#End-To-End-Test">Â¶</a>End-To-End Test</h1><h2 id="problem"><a class="header-anchor" href="#problem">Â¶</a>problem</h2><p>A brand new server is created for each test</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161131111.png" alt="Untitled"></p><p>E2E Test skips main.ts, which means there are no pipes, and session</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161131425.png" alt="Untitled"></p><p>Two way to solve this, first is easy, but not nest-way.</p><p>Second way is that , we can apply a global <code>pipe</code> and <code>middleware</code> in <code>App Module</code>!</p><p>original main.ts</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs tsx">import &#123; NestFactory &#125; from &#39;@nestjs&#x2F;core&#39;;<br>import &#123; AppModule &#125; from &#39;.&#x2F;app.module&#39;;<br>import &#123; ValidationPipe &#125; from &#39;@nestjs&#x2F;common&#39;;<br>const cookieSession &#x3D; require(&#39;cookie-session&#39;);<br><br>async function bootstrap() &#123;<br>  const app &#x3D; await NestFactory.create(AppModule);<br>  app.use(<br>    cookieSession(&#123;<br>      keys: [&#39;super&#39;], &#x2F;&#x2F;for encryption purpose<br>    &#125;),<br>  );<br>  app.useGlobalPipes(<br>    new ValidationPipe(&#123;<br>      whitelist: true, &#x2F;&#x2F; means: only allow those I defined in DTO to be validate<br>    &#125;),<br>  );<br>  await app.listen(3000);<br>&#125;<br>bootstrap();<br></code></pre></td></tr></table></figure><p>original <code>app.module.ts</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs tsx">import &#123; Module &#125; from &#39;@nestjs&#x2F;common&#39;;<br>import &#123; AppController &#125; from &#39;.&#x2F;app.controller&#39;;<br>import &#123; AppService &#125; from &#39;.&#x2F;app.service&#39;;<br>import &#123; UsersModule &#125; from &#39;.&#x2F;users&#x2F;users.module&#39;;<br>import &#123; ReportsModule &#125; from &#39;.&#x2F;reports&#x2F;reports.module&#39;;<br><br>import &#123; TypeOrmModule &#125; from &#39;@nestjs&#x2F;typeorm&#39;;<br>import &#123; User &#125; from &#39;.&#x2F;users&#x2F;user.entity&#39;;<br>import &#123; Report &#125; from &#39;.&#x2F;reports&#x2F;report.entity&#39;;<br>@Module(&#123;<br>  imports: [<br>    TypeOrmModule.forRoot(&#123;<br>      type: &#39;sqlite&#39;,<br>      database: &#39;db.sqlite&#39;,<br>      entities: [User, Report],<br>      synchronize: true,<br>    &#125;),<br>    UsersModule,<br>    ReportsModule,<br>  ],<br>  controllers: [AppController],<br>  providers: [AppService],<br>&#125;)<br>export class AppModule &#123;&#125;<br></code></pre></td></tr></table></figure><h2 id="pipe-in-module"><a class="header-anchor" href="#pipe-in-module">Â¶</a>pipe in module</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs tsx">@Module(&#123;<br>  imports: [<br>    TypeOrmModule.forRoot(&#123;<br>      type: &#39;sqlite&#39;,<br>      database: &#39;db.sqlite&#39;,<br>      entities: [User, Report],<br>      synchronize: true,<br>    &#125;),<br>    UsersModule,<br>    ReportsModule,<br>  ],<br>  controllers: [AppController],<br>  providers: [<br>    AppService,<br>    &#123;<br>      provide: APP_PIPE,<br>      useValue: new ValidationPipe(&#123;<br>        whitelist: true,<br>      &#125;),<br>    &#125;,<br>  ],<br>&#125;)<br>export class AppModule &#123;&#125;<br></code></pre></td></tr></table></figure><p>This means, if the app module needs <code>APP_PIPE</code> (which automatically runs through each request) ,then use the <code>validation pipe</code></p><h2 id="middleware-cookie-session-in-module"><a class="header-anchor" href="#middleware-cookie-session-in-module">Â¶</a>middleware (cookie-session) in module</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs tsx">&#x2F;&#x2F;app.module.ts<br><br>...<br>export class AppModule &#123;<br>  configure(consumer: MiddlewareConsumer) &#123;<br>    consumer<br>      .apply(<br>        cookieSession(&#123;<br>          keys: [&#39;super&#39;], &#x2F;&#x2F;for encryption purpose<br>        &#125;),<br>      )<br>      .forRoutes(&#39;*&#39;);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Downside of doing all this is that we migrate our pipe, middleware setting into <code>app.module</code> which is not very clear what we are doing with pipe and middleware</p><p><em>I would prefer the first simple methodâ€¦then. For detail ,seeing the video</em></p><h2 id="repeat-test-problem"><a class="header-anchor" href="#repeat-test-problem">Â¶</a>repeat test problem</h2><p>We need two DB, one for development, one for testing.</p><p>To achieve this, we need environment variable</p><h1 id="Environment-Variable"><a class="header-anchor" href="#Environment-Variable">Â¶</a>Environment Variable</h1><p>Nest environement variable is incredibly complicated, but we shall still use it in this case of learning purpose.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs tsx">&#x2F;&#x2F;app.module.ts<br>const cookieSession &#x3D; require(&#39;cookie-session&#39;);<br><br>@Module(&#123;<br>  imports: [<br>    ConfigModule.forRoot(&#123;<br>      isGlobal: true,<br>      envFilePath: &#96;.env.$&#123;process.env.NODE_ENV&#125;&#96;,<br>    &#125;),<br>    TypeOrmModule.forRootAsync(&#123;<br>      inject: [ConfigService],<br>      useFactory: (config: ConfigService) &#x3D;&gt; &#123;<br>        return &#123;<br>          type: &#39;sqlite&#39;,<br>          database: config.get&lt;string&gt;(&#39;DB_NAME&#39;),<br>          synchronize: true,<br>          entities: [User, Report],<br>        &#125;;<br>      &#125;,<br>    &#125;),<br>    &#x2F;&#x2F; TypeOrmModule.forRoot(&#123;<br>    &#x2F;&#x2F;   type: &#39;sqlite&#39;,<br>    &#x2F;&#x2F;   database: &#39;db.sqlite&#39;,<br>    &#x2F;&#x2F;   entities: [User, Report],<br>    &#x2F;&#x2F;   synchronize: true,<br>    &#x2F;&#x2F; &#125;),<br>    UsersModule,<br>    ReportsModule,<br>  ],<br>  controllers: [AppController],<br>  providers: [<br>    AppService,<br>    &#123;<br>      provide: APP_PIPE,<br>      useValue: new ValidationPipe(&#123;<br>        whitelist: true,<br>      &#125;),<br>    &#125;,<br>  ],<br>&#125;)<br>export class AppModule &#123;<br>  configure(consumer: MiddlewareConsumer) &#123;<br>    consumer<br>      .apply(<br>        cookieSession(&#123;<br>          keys: [&#39;super&#39;], &#x2F;&#x2F;for encryption purpose<br>        &#125;),<br>      )<br>      .forRoutes(&#39;*&#39;);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Now we have two seperate database for <code>development</code> and <code>test</code></p><p>We can delete the test database for each test suit!</p><p>To seperate each test, we need also to close their connection!</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs tsx">&#x2F;&#x2F;test&#x2F;jest-e2e.json<br>&#123;<br>  &quot;moduleFileExtensions&quot;: [&quot;js&quot;, &quot;json&quot;, &quot;ts&quot;],<br>  &quot;rootDir&quot;: &quot;.&quot;,<br>  &quot;testEnvironment&quot;: &quot;node&quot;,<br>  &quot;testRegex&quot;: &quot;.e2e-spec.ts$&quot;,<br>  &quot;transform&quot;: &#123;<br>    &quot;^.+\\.(t|j)s$&quot;: &quot;ts-jest&quot;<br>  &#125;,<br>  &quot;setupFilesAfterEnv&quot;:[&quot;&lt;rootDir&gt;&#x2F;setup.ts&quot;]<br>&#125;<br><br>&#x2F;&#x2F;test&#x2F;setup.ts<br>import &#123; rm &#125; from &#39;fs&#x2F;promises&#39;;<br>import &#123; join &#125; from &#39;path&#39;;<br>import &#123; getConnection &#125; from &#39;typeorm&#39;;<br><br>global.beforeEach(async () &#x3D;&gt; &#123;<br>  try &#123;<br>    await rm(join(__dirname, &#39;..&#39;, &#39;test.sqlite&#39;));<br>  &#125; catch (e) &#123;&#125;<br>&#125;);<br><br>global.afterEach(async () &#x3D;&gt; &#123;<br>  try &#123;<br>    await getConnection().close();<br>  &#125; catch (e) &#123;&#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p>More e2e test:</p><p><a href="https://github.com/q815101630/nestJs_mycv/blob/main/test/auth.e2e-spec.ts">https://github.com/q815101630/nestJs_mycv/blob/main/test/auth.e2e-spec.ts</a></p><h1 id="Association"><a class="header-anchor" href="#Association">Â¶</a>Association</h1><ul><li>Many to One</li><li>One to Many</li><li>Many to Many</li><li>One to One</li></ul><p>Many to One will cause the change</p><ul><li>First argument is to wrap a class with a function so that circular dependency can be solved.</li><li>Second argument is a issue of TypeORM: we need to state how the instance can go from the associated object back to itself.</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tsx">&#x2F;&#x2F;user.entity<br>@OneToMany(()&#x3D;&gt; Report, (report)&#x3D;&gt; report.user)<br>  reports: Report[];<br><br>&#x2F;&#x2F;report.entity<br>@ManyToOne(() &#x3D;&gt; User, (user) &#x3D;&gt; user.reports)<br>  user: User;<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161131220.png" alt="Untitled"></p><p>fetching a user <strong>will not</strong> automatically fetch the reports</p><p>fetching a report <strong>will not</strong> automatically fetch the user.</p><h1 id="Authorization-Middleware"><a class="header-anchor" href="#Authorization-Middleware">Â¶</a>Authorization/ Middleware</h1><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/202112161131544.png" alt="Untitled"></p><p>Interceptor is special because it can perform before and after the handler.</p><p>However, if we use something defined in interceptor stage in guard stage, we will have an issue .</p><p>Therefore, we need to turn the <code>currentUser</code> interceptor into a <code>middleware</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs tsx">declare global &#123;<br>  namespace Express &#123;<br>    interface Request &#123;<br>      currentUser?: User;<br>    &#125;<br>  &#125;<br>&#125;<br><br>@Injectable()<br>export class CurrentUserMiddleware implements NestMiddleware &#123;<br>  constructor(private usersService: UsersService) &#123;&#125;<br><br>  async use(req: Request, res: Response, next: NextFunction) &#123;<br>    const &#123; userId &#125; &#x3D; req.session || &#123;&#125;;<br>    if (userId) &#123;<br>      const user &#x3D; await this.usersService.findOne(userId);<br>      req.currentUser &#x3D; user;<br>    &#125;<br>    next();<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tsx">&#x2F;&#x2F;users.module.ts<br>export class UsersModule &#123;<br>  configure(consumer: MiddlewareConsumer) &#123;<br>    consumer.apply(CurrentUserMiddleware).forRoutes(&#39;*&#39;);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>We then need to apply into into user module</p><p>Besides, since in our query or param <code>@Param(&quot;xxx&quot;)</code> and <code>@Query()</code> in either Patch, put, get, it will parse all either string or number into string. therefore, we need to transform them in dto</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tsx">@Get()<br>  getEstimate(@Query() query: GetEstimateDto) &#123;<br>    console.log(query);<br>  &#125;<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs tsx">export class GetEstimateDto &#123;<br>  @IsString()<br>  make: string;<br><br>  @IsString()<br>  model: string;<br><br>  @Transform((&#123; value &#125;) &#x3D;&gt; parseInt(value))<br>  @IsNumber()<br>  @Min(1900)<br>  @Max(2050)<br>  year: number;<br><br>  @Transform((&#123; value &#125;) &#x3D;&gt; parseInt(value))<br>  @Min(0)<br>  mileage: number;<br><br>  @Transform((&#123; value &#125;) &#x3D;&gt; parseFloat(value))<br>  @IsLongitude()<br>  lng: number;<br><br>  @Transform((&#123; value &#125;) &#x3D;&gt; parseFloat(value))<br>  @IsLatitude()<br>  lat: number;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="createQueryBuilder"><a class="header-anchor" href="#createQueryBuilder">Â¶</a>createQueryBuilder</h1><p>This is just another way of building SQL, I am thinking to use another ORM though.</p><h1 id="To-Production"><a class="header-anchor" href="#To-Production">Â¶</a>To Production</h1><p>Several things we need to take care on the path to production</p><h2 id="Environment-variable"><a class="header-anchor" href="#Environment-variable">Â¶</a>Environment variable</h2><p>Take advantage of <code>ConfigService</code>, we can inject <code>ConfigService</code> in anywhere we need and call <code>this.configService.get(&quot;xxx&quot;)</code></p><h2 id="Synchronize"><a class="header-anchor" href="#Synchronize">Â¶</a>Synchronize</h2><p>Type-orm synchronize with the database regarding entities. It may cause losing data during production.</p><p>Therefore, we shall use <code>Migration File</code> to explicitly dictate what we want to do with DB change.</p><h2 id="Migration"><a class="header-anchor" href="#Migration">Â¶</a>Migration</h2>]]></content>
    
    
    <categories>
      
      <category>backend</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nestJs</tag>
      
      <tag>TS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker Review</title>
    <link href="/2021/12/14/Docker-Review/"/>
    <url>/2021/12/14/Docker-Review/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Docker Review Note</p><span id="more"></span><h1 id="Docker-Review"><a class="header-anchor" href="#Docker-Review">Â¶</a>Docker Review</h1><h1 id="Why-docker"><a class="header-anchor" href="#Why-docker">Â¶</a>Why docker?</h1><p>webserver â†’ DB â†’ messaging â†’ orchestration</p><ol><li>the architecture of these components are varying over time!</li><li>setting environment is painful!</li><li>development team members have different OS environment</li></ol><ul><li>Container utilize the same OS Kernel (handling with hardware), which differs from VM</li></ul><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/Untitled.png" alt="Untitled"></p><h1 id="Commands"><a class="header-anchor" href="#Commands">Â¶</a>Commands</h1><p>some Commands I donâ€™t know:</p><ul><li><code>docker pull &lt;image&gt;</code> only pull image from DockerHub to local</li><li><code>docker exec &lt;container name&gt; &lt;command&gt;</code></li><li><code>docker run -d</code>   run in detach</li><li><code>docker run -it centos bash</code> run a base image and gets into bash</li><li><code>docker attach &lt;container name&gt;</code> run some detached app in foreground</li></ul><h1 id="Run"><a class="header-anchor" href="#Run">Â¶</a>Run</h1><ul><li><code>docker run redis:4.0</code>  specify a tag</li><li><code>docker run -it</code> runs interactively with terminal</li><li><code>docker run -v /opt/datadir:/var/lib/mysql mysql</code> mount volume</li><li><code>docker logs &lt;container name&gt;</code>  logs out the container status</li><li><code>docker run ubuntu cat /etc/*release*</code> run a command of a ubuntu image and exit container</li><li><code>docker attach &lt;container name&gt;</code>   pull a container to foreground</li><li><code>docker build &lt;Dockerfile name&gt; -t &lt;xxx/xxxx&gt;</code> build an image</li><li><code>docker push &lt;xxx/xxx&gt;</code> push a docker image to dockerhub</li><li><code>cat &gt; Dockerfile</code> input to a file <code>Dockerfile</code></li><li><code>docker run -e &lt;ENV NAME&gt;=&lt;ENV VALUE&gt; &lt;image name&gt;</code>  set a environement variable</li><li><code>docker inspect &lt;container name&gt;</code></li></ul><h1 id="CMD-V-S-Entrypoint"><a class="header-anchor" href="#CMD-V-S-Entrypoint">Â¶</a>CMD V.S Entrypoint</h1><p><code>CMD</code> simply refers to run a command</p><p><code>ENTRYPOINT</code> allows us to append further params to <code>CMD</code>!</p><figure class="highlight jsx"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs jsx">FROM Ubuntu<br>ENTRYPOINT [<span class="hljs-string">&quot;sleep&quot;</span>]<br>CMD [<span class="hljs-string">&quot;5&quot;</span>]<br></code></pre></td></tr></table></figure><p><code>ENTRYPOINT</code> means that the user can interrupt the flow of <code>Dockerfile</code> and input some params into it.</p><p>We can also overwrite ENTRYPOINT by <code>--entrypoint</code> in <code>docker run</code></p><h1 id="Compose"><a class="header-anchor" href="#Compose">Â¶</a>Compose</h1><p>If we do not want Docker to pull images from dockerhub, we can replace <code>image</code>  to <code>build</code> in <code>docker-compose.yml</code> so that it knows to build the image from local</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/Untitled%201.png" alt="Untitled"></p><h1 id="Docker-engine"><a class="header-anchor" href="#Docker-engine">Â¶</a>Docker engine</h1><p>Docker engine is composed of :</p><ol><li>Docker CLI</li><li>REST API</li><li>Docker Deamon</li></ol><p>Docker uses namespace to differentiate main system and child system</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/Untitled%202.png" alt="Untitled"></p><h2 id="cgroups"><a class="header-anchor" href="#cgroups">Â¶</a>cgroups</h2><p>cgroups can be used to ensure the limit of CPU usages</p><p><code>docker run --cpus=0.5 ubuntu</code></p><p><code>docker run --memory=100m ubuntu</code></p><h1 id="Docker-storage"><a class="header-anchor" href="#Docker-storage">Â¶</a>Docker storage</h1><p>We can view docker files at  <code>/var/lib/docker</code></p><p>Docker uses layered architecture</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/Untitled%203.png" alt="Untitled"></p><h2 id="COPY-ON-WRITE"><a class="header-anchor" href="#COPY-ON-WRITE">Â¶</a>COPY-ON-WRITE</h2><p>In the container layer, all files are writeable, however. Files on image layers are not writable. But we can copy them into the container layer and change them, but we need to rebuild the image then.</p><h2 id="Volume-Mounting"><a class="header-anchor" href="#Volume-Mounting">Â¶</a>Volume Mounting</h2><p>mount a piece of memory to a named volume, different containers can share this volume</p><h2 id="Bind-mounting"><a class="header-anchor" href="#Bind-mounting">Â¶</a>Bind mounting</h2><p>mount a folder location to a folder location in the container.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/Untitled%204.png" alt="Untitled"></p><h1 id="Network"><a class="header-anchor" href="#Network">Â¶</a>Network</h1><ul><li><code>bridge</code> is the default network</li><li><code>none</code> is an isolated network</li><li><code>host</code> is a direct mapping with the host network</li><li><code>docker network create</code> create new user-defined network</li><li>Docker has DNS setting so that a container name is directly mapped with the container IP!</li></ul><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/Untitled%205.png" alt="Untitled"></p><h1 id="Orchestration"><a class="header-anchor" href="#Orchestration">Â¶</a>Orchestration</h1><p>A solution to host multiple containers at the same time.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">docker service create --replicas=<span class="hljs-number">100</span> nodejs<br></code></pre></td></tr></table></figure><ul><li>Docker Swarm</li><li>Kubernetes</li><li>Mesos</li></ul>]]></content>
    
    
    <categories>
      
      <category>backend</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginx Learning Note</title>
    <link href="/2021/12/12/Nginx-Learning-Note/"/>
    <url>/2021/12/12/Nginx-Learning-Note/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Nginx Learning Note</p><span id="more"></span><h1 id="Nginx-Learning-Note"><a class="header-anchor" href="#Nginx-Learning-Note">Â¶</a>Nginx Learning Note</h1><p>Nginx VS Apache</p><ul><li>Apache: prefork: each process handle one request at a time</li><li>Nginx: asynchronous design: dynamic content is handled by another process separately<ul><li>Faster static resources</li><li>High concurrency</li><li>thousands of requests per process</li><li>Load balancer</li><li>Mail server</li></ul></li></ul><blockquote><p>â­ Nginx interprets incoming requests as URI locations, Apache prefers to interpret requests as filesystem locations.</p></blockquote><p>Nginx Features:</p><ol><li>High performance</li><li>High Concurrency</li><li>Low Resource Usage</li></ol><h1 id="Installation"><a class="header-anchor" href="#Installation">Â¶</a>Installation</h1><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#ubuntu</span><br>apt-get update<br>apt-get install nginx<br>ps aux | grep nginx<br>ifconfig  <span class="hljs-comment">#we can see the link to nginx server after installing/autorun it </span><br><span class="hljs-comment">#centos</span><br><br><span class="hljs-comment"># Remove host history</span><br>ssh-keygen -R 111.11.11.11<br><br>yum install epel-release<br>yum install nginx<br><span class="hljs-comment"># not auto-run</span><br>systemctl start nginx.service<br>ps aux | grep nginx<br></code></pre></td></tr></table></figure><h2 id="Another-way-to-install"><a class="header-anchor" href="#Another-way-to-install">Â¶</a>Another way to install</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt-get update<br>wget https://nginx.org/download/nginx-1.21.4.tar.gz<br>ls -l<br>&gt; nginx-1.21.4.tar.gz<br>tar -zxvf nginx-1.21.4.tar.gz<br><span class="hljs-built_in">cd</span> ./nginx-1.21.4<br>apt-get build-essential<br>./configure  <span class="hljs-comment"># install prerequsites</span><br>&gt; ...<br>apt-get install libpcre3 libpcre3-dev zlib1g zlib1g-dev libssl-dev<br>./configure<br></code></pre></td></tr></table></figure><h2 id="configure"><a class="header-anchor" href="#configure">Â¶</a>./configure</h2><p>Then, we can configure our Nginx server</p><p><a href="https://nginx.org/en/docs/configure.html">https://nginx.org/en/docs/configure.html</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">./configure --sbin-path=/usr/bin/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/<span class="hljs-built_in">log</span>/nginx/error.log --http-log-path=/var/<span class="hljs-built_in">log</span>/nginx/access.log --with-pcre --pid-path=/var/run/nginx.pid --with-http_ssl_module<br><span class="hljs-comment"># To compile</span><br>make <br>make install<br>ls -l /etc/nginx/<br>nginx -V <span class="hljs-comment"># show version and configuration we installed</span><br>&gt; nginx version: nginx/1.xx.xx<br>ps aux | grep nginx<br></code></pre></td></tr></table></figure><p><strong>Two types of modules:</strong></p><ol><li>Nginx 3rd party modules</li><li>Bundle modules  â€”with</li></ol><p><a href="https://nginx.org/en/docs/">https://nginx.org/en/docs/</a> Modules reference</p><h2 id="Systemd-Add-Service-Command"><a class="header-anchor" href="#Systemd-Add-Service-Command">Â¶</a>Systemd: Add Service/ Command</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">nginx -h<br>nginx -s stop<br></code></pre></td></tr></table></figure><p><a href="https://www.nginx.com/resources/wiki/start/topics/examples/systemd/">https://www.nginx.com/resources/wiki/start/topics/examples/systemd/</a></p><blockquote><p>Save this file as <code>/lib/systemd/system/nginx.service</code></p></blockquote><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Unit]</span><span class="hljs-attr">Description</span>=The NGINX HTTP and reverse proxy server<br><span class="hljs-attr">After</span>=syslog.target network-<span class="hljs-literal">on</span>line.target remote-fs.target nss-lookup.target<br><span class="hljs-attr">Wants</span>=network-<span class="hljs-literal">on</span>line.target<br><br><span class="hljs-section">[Service]</span><span class="hljs-attr">Type</span>=forking<br><span class="hljs-attr">PIDFile</span>=/var/run/nginx.pid            <span class="hljs-comment"># changed</span><br><span class="hljs-attr">ExecStartPre</span>=/usr/bin/nginx -t        <span class="hljs-comment"># changed </span><br><span class="hljs-attr">ExecStart</span>=/usr/bin/nginx<br><span class="hljs-attr">ExecReload</span>=/usr/bin/nginx -s reload<br><span class="hljs-attr">ExecStop</span>=/bin/kill -s QUIT <span class="hljs-variable">$MAINPID</span><br><span class="hljs-attr">PrivateTmp</span>=<span class="hljs-literal">true</span><br><br><span class="hljs-section">[Install]</span><span class="hljs-attr">WantedBy</span>=multi-user.target<br></code></pre></td></tr></table></figure><p>Use <code>systemd</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl start nginx<br>systemctl status nginx<br>systemctl stop nginx<br>systemctl <span class="hljs-built_in">enable</span> nginx <span class="hljs-comment"># allows auto-run when machine reboot!</span><br></code></pre></td></tr></table></figure><h2 id="Nginx-Windows-Limits"><a class="header-anchor" href="#Nginx-Windows-Limits">Â¶</a>Nginx Windows Limits</h2><ul><li>Poor performance</li><li>Single worker process</li><li>Unsupported modules</li></ul><h1 id="Configuration-âš™ï¸"><a class="header-anchor" href="#Configuration-âš™ï¸">Â¶</a>Configuration âš™ï¸</h1><p><code>nginx.conf</code></p><p>Directive: <code>server_name mydomain.com</code></p><p>Context: essentially the scope: <code>http &#123;...&#125;</code></p><p>The conf file itself is included in a global context</p><p>The important context:</p><ul><li>http</li><li>server</li><li>location</li><li>â€¦</li></ul><h2 id="Create-a-virtual-host"><a class="header-anchor" href="#Create-a-virtual-host">Â¶</a>Create a virtual host</h2><p>a virtual host is a <strong>server context</strong></p><p>port : 80 for http, 443 for https</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">ls -l /etc/nginx/<br>&gt; nginx.conf<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nginx.conf</span><br>events &#123;&#125;<br><br>http &#123;<br>server&#123;<br>listen 80;<br>server_name 167.99.xx.xx;<br><br><span class="hljs-comment"># root directive</span><br><span class="hljs-comment"># if http url requests mach with a filename on the directory</span><br>root /sites/demo;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">nginx -t <span class="hljs-comment"># syntax check</span><br>systemctl reload nginx <span class="hljs-comment"># never stop | no down time</span><br>systemctl restart nginx <span class="hljs-comment"># if error happens, do not auto start</span><br></code></pre></td></tr></table></figure><p>Right now <code>nginx</code> is not sending the correct <code>Content-Type</code> as <code>text/plain</code> not stylesheets</p><p>To change this:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nginx.conf</span><br>events &#123;&#125;<br><br>http &#123;<br><br>types &#123;<br>text/html html;<br>text/css css;<br>&#125;<br><br>server&#123;<br>listen 80;<br>server_name 167.99.xx.xx;<br><br><span class="hljs-comment"># root directive</span><br><span class="hljs-comment"># if http url requests mach with a filename on the directory</span><br>root /sites/demo;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>/etc/nginx/mime.types</code> has already set all common types we need, so we only need:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nginx.conf</span><br>events &#123;&#125;<br><br>http &#123;<br><br>include mime.types; <span class="hljs-comment"># same directory at /etc/nginx as a global value</span><br><br>server&#123;<br>listen 80;<br>server_name 167.99.xx.xx;<br><br><span class="hljs-comment"># root directive</span><br><span class="hljs-comment"># if http url requests mach with a filename on the directory</span><br>root /sites/demo;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><strong><code>types</code></strong>: This context is again used for mapping. This context is used to map MIME types to the file extensions that should be associated with them. This is usually provided with Nginx through a file that is sourced into the mainÂ <code>nginx.conf</code>Â config file.</p></blockquote><p><a href="https://www.digitalocean.com/community/tutorials/understanding-the-nginx-configuration-file-structure-and-configuration-contexts">https://www.digitalocean.com/community/tutorials/understanding-the-nginx-configuration-file-structure-and-configuration-contexts</a></p><p>Match and intercept an incoming request URI and override the server contextâ€™s configuration inside the location context</p><h2 id="location"><a class="header-anchor" href="#location">Â¶</a>location</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nginx.conf</span><br>events &#123;&#125;<br><br>http &#123;<br><br>include mime.types; <br>server&#123;<br>listen 80;<br>server_name 167.99.xx.xx;<br><br>root /sites/demo;<br><br><span class="hljs-comment">#prefix match: anything starting from /greet</span><br>location /greet &#123;<br><span class="hljs-built_in">return</span> 200 <span class="hljs-string">&#x27;Hello from /greet location&#x27;</span>;<br>&#125;<br><br><span class="hljs-comment">#exact match</span><br>location = /greet &#123;<br><span class="hljs-built_in">return</span> 200 <span class="hljs-string">&#x27;Hello from /greet location - EXACT MATCH&#x27;</span>;<br>&#125;<br><br><span class="hljs-comment">#REGEX match - case sensitive</span><br>location ~ /greet[0 -9] &#123;<br><span class="hljs-built_in">return</span> 200 <span class="hljs-string">&#x27;Hello from /greet location - REGEX MATCH&#x27;</span>;<br>&#125;<br><br><span class="hljs-comment">#REGEX match - case insensitive</span><br>location ~* /greet[0 -9] &#123;<br><span class="hljs-built_in">return</span> 200 <span class="hljs-string">&#x27;Hello from /greet location - REGEX MATCH INSENSITIVE&#x27;</span>;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>REGEX match has higher priority than the prefix match</p><p>This overwrites the priority for the prefix match</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#preferential prefix match</span><br>location ^~ /greet &#123;<br><span class="hljs-built_in">return</span> 200 <span class="hljs-string">&#x27;Hello from /greet location&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Priority-order"><a class="header-anchor" href="#Priority-order">Â¶</a>Priority order</h2><ol><li>Exact Match</li><li>Preferential Prefix Match</li><li>REGEX Match</li><li>Prefix Match</li></ol><h2 id="Variables"><a class="header-anchor" href="#Variables">Â¶</a>Variables</h2><p><a href="http://nginx.org/en/docs/varindex.html">http://nginx.org/en/docs/varindex.html</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nginx.conf</span><br>events &#123;&#125;<br><br>http &#123;<br><br>include mime.types;<br><br>server&#123;<br>listen 80;<br>server_name 167.99.xx.xx;<br><br>root /sites/demo;<br><br>location /inspect &#123;<br><span class="hljs-built_in">return</span> 200 <span class="hljs-string">&quot;<span class="hljs-variable">$host</span>\n<span class="hljs-variable">$uri</span>\n<span class="hljs-variable">$args</span>&quot;</span>;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Then when we go to the web <code>167.99.xx.xx/inspect?name=ray</code></p><p>we will have</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">167.88.xx.xx<br>/inspect<br>name=ray<br></code></pre></td></tr></table></figure><p>We can output the exact arg to query</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nginx.conf</span><br>events &#123;&#125;<br><br>http &#123;<br><br>include mime.types;<br><br>server&#123;<br>listen 80;<br>server_name 167.99.xx.xx;<br><br>root /sites/demo;<br><br><span class="hljs-comment"># Check static API key</span><br><span class="hljs-keyword">if</span> ( <span class="hljs-variable">$arg_apikey</span> != 1234 ) &#123;<br><span class="hljs-built_in">return</span> 401 <span class="hljs-string">&quot;incorrect api key&quot;</span><br>&#125;<br><br><span class="hljs-built_in">set</span> <span class="hljs-variable">$weekend</span> <span class="hljs-string">&#x27;No&#x27;</span>;<br><span class="hljs-keyword">if</span> ( <span class="hljs-variable">$date_local</span> ~ <span class="hljs-string">&#x27;Saturday|Sunday&#x27;</span> ) &#123;<br><span class="hljs-built_in">set</span> <span class="hljs-variable">$weekend</span> <span class="hljs-string">&#x27;Yes&#x27;</span>;<br>&#125;<br><br>location /inspect &#123;<br><span class="hljs-built_in">return</span> 200 <span class="hljs-string">&quot;Name: <span class="hljs-variable">$arg_name</span>&quot;</span>;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Rewrite-Redirect-ğŸ¥"><a class="header-anchor" href="#Rewrite-Redirect-ğŸ¥">Â¶</a>Rewrite/ Redirect ğŸ¥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nginx.conf</span><br>events &#123;&#125;<br><br>http &#123;<br><br>include mime.types;<br><br>server&#123;<br>listen 80;<br>server_name 167.99.xx.xx;<br><br>root /sites/demo;<br><br>location /logo &#123;<br><span class="hljs-built_in">return</span> 307 /thumb.png;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>/logo</code> is redirect to <code>/thumb.png</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nginx.conf</span><br>events &#123;&#125;<br><br>http &#123;<br><br>include mime.types;<br><br>server&#123;<br>listen 80;<br>server_name 167.99.xx.xx;<br><br>root /sites/demo;<br><br><span class="hljs-comment">#url is re-evaluated internally in Nginx</span><br><span class="hljs-comment">#rewrite ^/user/(\w+) /greet/$1 last; # ensures it is the last rewrite</span><br>rewrite ^/user/(\w+) /greet/<span class="hljs-variable">$1</span>;<br>rewrite ^/greet/john /thumb.png;<br><br>location /greet &#123;<br><span class="hljs-built_in">return</span> 200 <span class="hljs-string">&quot;Hello user rewrite&quot;</span>;<br>&#125;<br><br>location = /greet/john &#123;<br><span class="hljs-built_in">return</span> 200 <span class="hljs-string">&quot;Hello John&quot;</span>;<br>&#125;<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="try-files-ğŸ“"><a class="header-anchor" href="#try-files-ğŸ“">Â¶</a>try_files ğŸ“</h2><p>check if current URL exsits, if not try if  <code>/sites/demo/thumb.png</code>exitst, show it, if not try next one</p><p><strong>Only last one</strong> would be seen as internal rewrite; meaning others refer to files URI, last one refers to address URL;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nginx.conf</span><br>events &#123;&#125;<br><br>http &#123;<br><br>include mime.types;<br><br>server&#123;<br>listen 80;<br>server_name 167.99.xx.xx;<br><br>root /sites/demo;<br><br><span class="hljs-comment"># all relative to root</span><br>try_files <span class="hljs-variable">$uri</span> /thumb.png /greet /friendly_404;<br><br>location /friendly_404 &#123;<br><span class="hljs-built_in">return</span> 404 <span class="hljs-string">&quot;not found&quot;</span><br>&#125;<br><br>location /greet &#123;<br><span class="hljs-built_in">return</span> 200 <span class="hljs-string">&quot;Hello user rewrite&quot;</span>;<br>&#125;<br><br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="Named-location-ğŸ“›"><a class="header-anchor" href="#Named-location-ğŸ“›">Â¶</a>Named location ğŸ“›</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nginx.conf</span><br>events &#123;&#125;<br><br>http &#123;<br><br>include mime.types;<br><br>server&#123;<br>listen 80;<br>server_name 167.99.xx.xx;<br><br>root /sites/demo;<br><br><span class="hljs-comment"># all relative to root</span><br>try_files <span class="hljs-variable">$uri</span> /thumb.png /greet @friendly_404;<br><br>location @friendly_404 &#123;<br><span class="hljs-built_in">return</span> 404 <span class="hljs-string">&quot;not found&quot;</span><br>&#125;<br><br>location /greet &#123;<br><span class="hljs-built_in">return</span> 200 <span class="hljs-string">&quot;Hello user rewrite&quot;</span>;<br>&#125;<br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Logging-ğŸ’¬"><a class="header-anchor" href="#Logging-ğŸ’¬">Â¶</a>Logging ğŸ’¬</h2><p>We have set the logging location when we are configuring Nginx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">ls -l /var/<span class="hljs-built_in">log</span>/nginx/<br><br></code></pre></td></tr></table></figure><p>Create log for a certain location</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># nginx.conf</span><br>events &#123;&#125;<br><br>http &#123;<br><br>include mime.types;<br><br>server&#123;<br>listen 80;<br>server_name 167.99.xx.xx;<br><br>root /sites/demo;<br><br>location /greet &#123;<br><span class="hljs-comment"># this shut down the logging for this location</span><br><span class="hljs-comment">#access_log off</span><br><br>access_log /var/<span class="hljs-built_in">log</span>/nginx/secure.access.log<br><span class="hljs-built_in">return</span> 200 <span class="hljs-string">&quot;Hello user rewrite&quot;</span>;<br>&#125;<br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Inheritance-â­"><a class="header-anchor" href="#Inheritance-â­">Â¶</a>Inheritance â­</h2><ol><li>Array directive: inherit straight down recursively in the scope (multiple allows)</li><li>Standard directive: inherit straight down recursively in the scope</li><li>Action directive: just there ~ perform some action</li></ol><p>http â†’ server â†’ location</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs bash">events &#123;&#125;<br><br><span class="hljs-comment">######################</span><br><span class="hljs-comment"># (1) Array Directive</span><br><span class="hljs-comment">######################</span><br><span class="hljs-comment"># Can be specified multiple times without overriding a previous setting</span><br><span class="hljs-comment"># Gets inherited by all child contexts</span><br><span class="hljs-comment"># Child context can override inheritance by re-declaring directive</span><br>access_log /var/<span class="hljs-built_in">log</span>/nginx/access.log;<br>access_log /var/<span class="hljs-built_in">log</span>/nginx/custom.log.gz custom_format;<br><br>http &#123;<br><br>  <span class="hljs-comment"># Include statement - non directive</span><br>  include mime.types;<br><br>  server &#123;<br>    listen 80;<br>    server_name site1.com;<br><br>    <span class="hljs-comment"># Inherits access_log from parent context (1)</span><br>  &#125;<br><br>  server &#123;<br>    listen 80;<br>    server_name site2.com;<br><br>    <span class="hljs-comment">#########################</span><br>    <span class="hljs-comment"># (2) Standard Directive</span><br>    <span class="hljs-comment">#########################</span><br>    <span class="hljs-comment"># Can only be declared once. A second declaration overrides the first</span><br>    <span class="hljs-comment"># Gets inherited by all child contexts</span><br>    <span class="hljs-comment"># Child context can override inheritance by re-declaring directive</span><br>    root /sites/site2;<br><br>    <span class="hljs-comment"># Completely overrides inheritance from (1)</span><br>    access_log off;<br><br>    location /images &#123;<br><br>      <span class="hljs-comment"># Uses root directive inherited from (2)</span><br>      try_files <span class="hljs-variable">$uri</span> /stock.png;<br>    &#125;<br><br>    location /secret &#123;<br>      <span class="hljs-comment">#######################</span><br>      <span class="hljs-comment"># (3) Action Directive</span><br>      <span class="hljs-comment">#######################</span><br>      <span class="hljs-comment"># Invokes an action such as a rewrite or redirect</span><br>      <span class="hljs-comment"># Inheritance does not apply as the request is either stopped (redirect/response) or re-evaluated (rewrite)</span><br>      <span class="hljs-built_in">return</span> 403 <span class="hljs-string">&quot;You do not have permission to view this.&quot;</span>;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Worker-process"><a class="header-anchor" href="#Worker-process">Â¶</a>Worker process</h2><p>nginx worker is asynchronous, it will handle as much requests as possible as long as hardware is capable of.</p><p><strong>number of process â†â†’ number of cores</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl status nginx<br>nproc<br>&gt; 1<br>lscpu<br>&gt; ... cpu info<br><span class="hljs-built_in">ulimit</span> -n<br>&gt; 1024 ...number of files reading at once<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs bash">user www-data;<br><br>worker_processes auto;   <span class="hljs-comment">#important!</span><br><br>events &#123;<br>  worker_connections 1024;<br>&#125;<br><br>http &#123;<br><br>  include mime.types;<br><br>  server &#123;<br><br>    listen 80;<br>    server_name 167.99.93.26;<br><br>    root /sites/demo;<br><br>    index index.php index.html;<br><br>    location / &#123;<br>      try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =404;<br>    &#125;<br><br>    location ~\.php$ &#123;<br>      <span class="hljs-comment"># Pass php requests to the php-fpm service (fastcgi)</span><br>      include fastcgi.conf;<br>      fastcgi_pass unix:/run/php/php7.1-fpm.sock;<br>    &#125;<br><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>max connections = worker_processes * worker_connections</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ls -l /var/run/nginx.pid<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># change pid directive</span><br>pid /var/run/new_nginx.pid;<br></code></pre></td></tr></table></figure><h2 id="Buffers"><a class="header-anchor" href="#Buffers">Â¶</a>Buffers</h2><ul><li>Nginx worker recieves request from a TCP port 80</li><li>Nginx worker writes the data to memory RAM (Buffering)<ul><li>If overflow writes into Disk</li></ul></li><li>Nginx worker reads data from disk to memory (Buffering)<ul><li>sends to client from memory</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs bash">user www-data;<br><br>worker_processes auto;<br><br>events &#123;<br>  worker_connections 1024;<br>&#125;<br><br>http &#123;<br><br>  include mime.types;<br><br>  <span class="hljs-comment"># Buffer size for POST submissions</span><br>  client_body_buffer_size 10K;<br>  client_max_body_size 8m;<br><br>  <span class="hljs-comment"># Buffer size for Headers</span><br>  client_header_buffer_size 1k;<br><br>  <span class="hljs-comment"># Max time to receive client headers/body</span><br>  client_body_timeout 12;<br>  client_header_timeout 12;<br><br>  <span class="hljs-comment"># Max time to keep a connection open for</span><br>  keepalive_timeout 15;<br><br>  <span class="hljs-comment"># Max time for the client accept/receive a response</span><br>  send_timeout 10;<br><br>  <span class="hljs-comment"># Skip buffering for static files | could be very helpful to send static files</span><br>  sendfile on;<br><br>  <span class="hljs-comment"># Optimise sendfile packets | could be very helpful to send static files</span><br>  tcp_nopush on;<br><br>  server &#123;<br><br>    listen 80;<br>    server_name 167.99.93.26;<br><br>    root /sites/demo;<br><br>    index index.php index.html;<br><br>    location / &#123;<br>      try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =404;<br>    &#125;<br><br>    location ~\.php$ &#123;<br>      <span class="hljs-comment"># Pass php requests to the php-fpm service (fastcgi)</span><br>      include fastcgi.conf;<br>      fastcgi_pass unix:/run/php/php7.1-fpm.sock;<br>    &#125;<br><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><a href="http://nginx.org/en/docs/syntax.html">http://nginx.org/en/docs/syntax.html</a></p><h2 id="Adding-new-modules-ğŸ†•"><a class="header-anchor" href="#Adding-new-modules-ğŸ†•">Â¶</a>Adding new modules ğŸ†•</h2><p>New modules require to build Nginx from the source</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">nginx -V<br>&gt; ./configure --sbin-path=/usr/bin/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/<span class="hljs-built_in">log</span>/nginx/error.log --http-log-path=/var/<span class="hljs-built_in">log</span>/nginx/access.log --with-pcre --pid-path=/var/run/nginx.pid --with-http_ssl_module<br><br>./configure --<span class="hljs-built_in">help</span><br>&gt; ...all <span class="hljs-built_in">help</span> config<br>./configure -- <span class="hljs-built_in">help</span> | grep dynamic<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">./configure --sbin-path=/usr/bin/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/<span class="hljs-built_in">log</span>/nginx/error.log --http-log-path=/var/<span class="hljs-built_in">log</span>/nginx/access.log --with-pcre --pid-path=/var/run/nginx.pid --with-http_ssl_module --with-http_image_filter_module=dynamic<br><br></code></pre></td></tr></table></figure><p>we need to append <code>--modules-path=/etc/nginx/modules</code></p><p>to make dynamic modules to be loaded to the corresponding module</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt-get install libgd-dev<br>./configure --sbin-path=/usr/bin/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/<span class="hljs-built_in">log</span>/nginx/error.log --http-log-path=/var/<span class="hljs-built_in">log</span>/nginx/access.log --with-pcre --pid-path=/var/run/nginx.pid --with-http_ssl_module --with-http_image_filter_module=dynamic<br>make<br>make install<br>nginx -V<br>systemctl reload nginx<br></code></pre></td></tr></table></figure><p><a href="http://nginx.org/en/docs/http/ngx_http_image_filter_module.html">http://nginx.org/en/docs/http/ngx_http_image_filter_module.html</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs bash">user www-data;<br><br>worker_processes auto;<br><br>load_module modules/ngx_http_image_filter_module.so;<br><br>events &#123;<br>  worker_connections 1024;<br>&#125;<br><br>http &#123;<br><br>  include mime.types;<br><br>  <span class="hljs-comment"># Buffer size for POST submissions</span><br>  client_body_buffer_size 10K;<br>  client_max_body_size 8m;<br><br>  <span class="hljs-comment"># Buffer size for Headers</span><br>  client_header_buffer_size 1k;<br><br>  <span class="hljs-comment"># Max time to receive client headers/body</span><br>  client_body_timeout 12;<br>  client_header_timeout 12;<br><br>  <span class="hljs-comment"># Max time to keep a connection open for</span><br>  keepalive_timeout 15;<br><br>  <span class="hljs-comment"># Max time for the client accept/receive a response</span><br>  send_timeout 10;<br><br>  <span class="hljs-comment"># Skip buffering for static files</span><br>  sendfile on;<br><br>  <span class="hljs-comment"># Optimise sendfile packets</span><br>  tcp_nopush on;<br><br>  server &#123;<br><br>    listen 80;<br>    server_name 167.99.93.26;<br><br>    root /sites/demo;<br><br>    index index.php index.html;<br><br>    location / &#123;<br>      try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =404;<br>    &#125;<br><br>    location ~\.php$ &#123;<br>      <span class="hljs-comment"># Pass php requests to the php-fpm service (fastcgi)</span><br>      include fastcgi.conf;<br>      fastcgi_pass unix:/run/php/php7.1-fpm.sock;<br>    &#125;<br><br>    location = /thumb.png &#123;<br>      image_filter rotate 180;<br>    &#125;<br><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Performance"><a class="header-anchor" href="#Performance">Â¶</a>Performance</h1><h2 id="Headers-Expires"><a class="header-anchor" href="#Headers-Expires">Â¶</a>Headers &amp; Expires</h2><p>Defines the duration of how long a static file a browser should cache</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs bash">user www-data;<br><br>worker_processes auto;<br><br>events &#123;<br>  worker_connections 1024;<br>&#125;<br><br>http &#123;<br><br>  include mime.types;<br><br>  server &#123;<br><br>    listen 80;<br>    server_name 167.99.93.26;<br><br>    root /sites/demo;<br><br>    index index.php index.html;<br><br>    location / &#123;<br>      try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =404;<br>    &#125;<br><br>    location ~\.php$ &#123;<br>      <span class="hljs-comment"># Pass php requests to the php-fpm service (fastcgi)</span><br>      include fastcgi.conf;<br>      fastcgi_pass unix:/run/php/php7.1-fpm.sock;<br>    &#125;<br><br><span class="hljs-comment">#location = /thumb.png &#123;</span><br><span class="hljs-comment">#add_header Cache-Control public;</span><br><span class="hljs-comment">#add_header Pragma public;</span><br><span class="hljs-comment">#add_header Vary Accept-Encoding;</span><br><span class="hljs-comment">#expires 60m;</span><br><span class="hljs-comment">#&#125;</span><br><br>    location ~* \.(css|js|jpg|png)$ &#123;<br>      access_log off;<br>      add_header Cache-Control public;<br>      add_header Pragma public;<br>      add_header Vary Accept-Encoding;<br>      expires 1M;<br>    &#125;<br><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="gzip"><a class="header-anchor" href="#gzip">Â¶</a>gzip</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs bash">user www-data;<br><br>worker_processes auto;<br><br>events &#123;<br>  worker_connections 1024;<br>&#125;<br><br>http &#123;<br><br>  include mime.types;<br><br>  gzip on;<br>  gzip_comp_level 3;<br><br>  gzip_types text/css;<br>  gzip_types text/javascript;<br><br>  server &#123;<br><br>    listen 80;<br>    server_name 167.99.93.26;<br><br>    root /sites/demo;<br><br>    index index.php index.html;<br><br>    location / &#123;<br>      try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =404;<br>    &#125;<br><br>    location ~\.php$ &#123;<br>      <span class="hljs-comment"># Pass php requests to the php-fpm service (fastcgi)</span><br>      include fastcgi.conf;<br>      fastcgi_pass unix:/run/php/php7.1-fpm.sock;<br>    &#125;<br><br>    location ~* \.(css|js|jpg|png)$ &#123;<br>      access_log off;<br>      add_header Cache-Control public;<br>      add_header Pragma public;<br>      add_header Vary Accept-Encoding;<br>      expires 1M;<br>    &#125;<br><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="FastCGI-Cache"><a class="header-anchor" href="#FastCGI-Cache">Â¶</a>FastCGI Cache</h1><p>cache between Nginx and backend-server</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs bash">user www-data;<br><br>worker_processes auto;<br><br>events &#123;<br>  worker_connections 1024;<br>&#125;<br><br>http &#123;<br><br>  include mime.types;<br><br>  <span class="hljs-comment"># Configure microcache (fastcgi)</span><br>  fastcgi_cache_path /tmp/nginx_cache levels=1:2 keys_zone=ZONE_1:100m inactive=60m;<br>  fastcgi_cache_key <span class="hljs-string">&quot;$scheme$request_method$host<span class="hljs-variable">$request_uri</span>&quot;</span>;<br>  add_header X-Cache <span class="hljs-variable">$upstream_cache_status</span>;<br><br>  server &#123;<br><br>    listen 80;<br>    server_name 167.99.93.26;<br><br>    root /sites/demo;<br><br>    index index.php index.html;<br><br>    <span class="hljs-comment"># Cache by default</span><br>    <span class="hljs-built_in">set</span> <span class="hljs-variable">$no_cache</span> 0;<br><br>    <span class="hljs-comment"># Check for cache bypass</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$arg_skipcache</span> = 1) &#123;<br>      <span class="hljs-built_in">set</span> <span class="hljs-variable">$no_cache</span> 1;<br>    &#125;<br><br>    location / &#123;<br>      try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =404;<br>    &#125;<br><br>    location ~\.php$ &#123;<br>      <span class="hljs-comment"># Pass php requests to the php-fpm service (fastcgi)</span><br>      include fastcgi.conf;<br>      fastcgi_pass unix:/run/php/php7.1-fpm.sock;<br><br>      <span class="hljs-comment"># Enable cache</span><br>      fastcgi_cache ZONE_1;<br>      fastcgi_cache_valid 200 60m;<br>      fastcgi_cache_bypass <span class="hljs-variable">$no_cache</span>;<br>      fastcgi_no_cache <span class="hljs-variable">$no_cache</span>;<br>    &#125;<br><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Security"><a class="header-anchor" href="#Security">Â¶</a>Security</h1><h2 id="HTTPS"><a class="header-anchor" href="#HTTPS">Â¶</a>HTTPS</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs bash">user www-data;<br><br>worker_processes auto;<br><br>events &#123;<br>  worker_connections 1024;<br>&#125;<br><br>http &#123;<br><br>  include mime.types;<br><br>  <span class="hljs-comment"># Redirect all traffic to HTTPS</span><br>  server &#123;<br>    listen 80;<br>    server_name 167.99.93.26;<br>    <span class="hljs-built_in">return</span> 301 https://$host<span class="hljs-variable">$request_uri</span>;<br>  &#125;<br><br>  server &#123;<br><br>    listen 443 ssl http2;<br>    server_name 167.99.93.26;<br><br>    root /sites/demo;<br><br>    index index.html;<br><br>    ssl_certificate /etc/nginx/ssl/self.crt;<br>    ssl_certificate_key /etc/nginx/ssl/self.key;<br><br>    <span class="hljs-comment"># Disable SSL</span><br>    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;<br><br>    <span class="hljs-comment"># Optimise cipher suits</span><br>    ssl_prefer_server_ciphers on;<br>    ssl_ciphers ECDH+AESGCM:ECDH+AES256:ECDH+AES128:DH+3DES:!ADH:!AECDH:!MD5;<br><br>    <span class="hljs-comment"># Enable DH Params</span><br>    ssl_dhparam /etc/nginx/ssl/dhparam.pem;<br><br>    <span class="hljs-comment"># Enable HSTS</span><br>    add_header Strict-Transport-Security <span class="hljs-string">&quot;max-age=31536000&quot;</span> always;<br><br>    <span class="hljs-comment"># SSL sessions</span><br>    ssl_session_cache shared:SSL:40m;<br>    ssl_session_timeout 4h;<br>    ssl_session_tickets on;<br><br>    location / &#123;<br>      try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =404;<br>    &#125;<br><br>    location ~\.php$ &#123;<br>      <span class="hljs-comment"># Pass php requests to the php-fpm service (fastcgi)</span><br>      include fastcgi.conf;<br>      fastcgi_pass unix:/run/php/php7.1-fpm.sock;<br>    &#125;<br><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Rate-Limiting"><a class="header-anchor" href="#Rate-Limiting">Â¶</a>Rate Limiting</h2><ul><li>Security - Brute Force Protection</li><li>Reliability - Prevent Traffic Spikes</li><li>Shaping - Service Priority</li></ul><p>ã€‚ã€‚ã€‚è¦ç”¨åˆ°å†çœ‹å§<a href="https://www.udemy.com/course/nginx-fundamentals/learn/lecture/10617504#questions">https://www.udemy.com/course/nginx-fundamentals/learn/lecture/10617504#questions</a></p><h1 id="Reverse-Proxy"><a class="header-anchor" href="#Reverse-Proxy">Â¶</a>Reverse Proxy</h1><p>The proxy allows users to be anonymous to the server.</p><p>The reverse proxy allows the server to be anonymous to users</p><p><a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffers">http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffers</a></p><p><a href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/">https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/</a></p><h2 id="Load-balancer"><a class="header-anchor" href="#Load-balancer">Â¶</a>Load balancer</h2><ol><li>Distribute requests to multiple servers</li><li>Provide redundancy (if one fails, Nginx can redirect to another server)</li></ol><p><code>upstream</code> is the key. Round-Robben: We then distribute requests to all upstream servers equally!!</p><p>See docs for detail</p><p><a href="http://nginx.org/en/docs/http/ngx_http_upstream_module.html">http://nginx.org/en/docs/http/ngx_http_upstream_module.html</a></p><p><a href="https://docs.nginx.com/nginx/admin-guide/load-balancer/http-load-balancer/">https://docs.nginx.com/nginx/admin-guide/load-balancer/http-load-balancer/</a></p><p><a href="http://nginx.org/en/docs/http/load_balancing.html">http://nginx.org/en/docs/http/load_balancing.html</a></p><p>If one server is down, Nginx will automatically redirect requests to the available server! So cool!</p><h2 id="Other-load-balance-option"><a class="header-anchor" href="#Other-load-balance-option">Â¶</a>Other load balance option</h2><ol><li>Sticky Session:  <code>ip_hash;</code>  (for example: session state )</li><li>Avoid heavy connections on a server: <code>least_conn</code></li><li></li></ol><p>Some docs:</p><p><a href="https://www.digitalocean.com/community/search?q=nginx">https://www.digitalocean.com/community/search?q=nginx</a></p><p><a href="http://nginx.org/en/docs/">http://nginx.org/en/docs/</a></p><p><a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/">https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/</a></p><h1 id="Other-Adds-on-My-Notes-ğŸ“’"><a class="header-anchor" href="#Other-Adds-on-My-Notes-ğŸ“’">Â¶</a>Other Adds -on | My Notes ğŸ“’</h1><p>http:// 80</p><p>https:// 443</p><h2 id="Benefits-of-proxy"><a class="header-anchor" href="#Benefits-of-proxy">Â¶</a>Benefits of proxy</h2><ol><li>Anonymity</li><li>Caching</li><li>Blocking unwanted sites</li><li>GeoFencing</li></ol><h2 id="Benefits-of-reverse-proxy"><a class="header-anchor" href="#Benefits-of-reverse-proxy">Â¶</a>Benefits of reverse proxy</h2><ol><li>Load balancing</li><li>Caching</li><li>Isolating internal traffic</li><li>Canary Deployment</li></ol>]]></content>
    
    
    <categories>
      
      <category>backend</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>My React Learning Note (6)</title>
    <link href="/2021/11/22/react_notes_6/"/>
    <url>/2021/11/22/react_notes_6/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>GraphQL</p><span id="more"></span><h1 id="My-React-Learning-Note-6"><a class="header-anchor" href="#My-React-Learning-Note-6">Â¶</a>My React Learning Note (6)</h1><p><a href="https://github.com/ZhangMYihua/crwn-clothing-prisma">https://github.com/ZhangMYihua/crwn-clothing-prisma</a></p><h2 id="Apollo"><a class="header-anchor" href="#Apollo">Â¶</a>Apollo</h2><p>Apollo basic:</p><figure class="highlight javascript"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></div></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; ApolloProvider &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-apollo&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; createHttpLink &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;apollo-link-http&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; InMemoryCache &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;apollo-cache-inmemory&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; ApolloClient, gql &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;apollo-boost&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./index.css&quot;</span>;<br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./App&quot;</span>;<br><br><span class="hljs-keyword">const</span> httpLink = createHttpLink(&#123;<br>  uri: <span class="hljs-string">&quot;https://crwn-clothing.com&quot;</span>,<br>&#125;);<br><br><span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> InMemoryCache();<br><br><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> ApolloClient(&#123;<br>  link: httpLink,<br>  cache,<br>&#125;);<br><br>client<br>  .query(&#123;<br>    query: gql<span class="hljs-string">`</span><br><span class="hljs-string">      &#123;</span><br><span class="hljs-string">        getCollectionsByTitle(title: &quot;hats&quot;) &#123;</span><br><span class="hljs-string">          id</span><br><span class="hljs-string">          title</span><br><span class="hljs-string">          items &#123;</span><br><span class="hljs-string">            id</span><br><span class="hljs-string">            name</span><br><span class="hljs-string">            price</span><br><span class="hljs-string">            imageUrl</span><br><span class="hljs-string">          &#125;</span><br><span class="hljs-string">        &#125;</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">    `</span>,<br>  &#125;)<br>  .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(res));<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blogs</tag>
      
      <tag>JS</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>My React Learning Note (5)</title>
    <link href="/2021/11/21/react_notes_5/"/>
    <url>/2021/11/21/react_notes_5/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Hooks</p><span id="more"></span><h1 id="My-React-Learning-Note-5"><a class="header-anchor" href="#My-React-Learning-Note-5">Â¶</a>My React Learning Note (5)</h1><h1 id="Topic-Hooks"><a class="header-anchor" href="#Topic-Hooks">Â¶</a>Topic: Hooks</h1><h2 id="useSelector-useDispatch"><a class="header-anchor" href="#useSelector-useDispatch">Â¶</a>useSelector, useDispatch</h2><p><code>useSelector</code> , <code>useDispatch</code> æ˜¯ä¸¤ä¸ª <code>react-redux</code> æä¾›çš„hooks,è¿™æ ·å°±ä¸éœ€è¦ <code>mapStateToProps</code></p><p>å’Œ <code>mapDispatchToProps</code></p><h2 id="useState"><a class="header-anchor" href="#useState">Â¶</a>useState</h2><p><a href="https://github.com/ZhangMYihua/use-state-example">https://github.com/ZhangMYihua/use-state-example</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> [name, setName] = useState(<span class="hljs-string">&#x27;Haha&#x27;</span>)<br><br>&lt;button onClick = &#123;<span class="hljs-function">() =&gt;</span> setName(<span class="hljs-string">&quot;Wahaha&quot;</span>)&#125;&gt;<span class="hljs-built_in">Set</span> Name to Wahaha &lt;/button&gt;<br><br></code></pre></td></tr></table></figure><h2 id="useEffect"><a class="header-anchor" href="#useEffect">Â¶</a>useEffect</h2><p>a function gets called whenever the update lifecycle method (re-render) is fired</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript">userEffect(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;hello&#x27;</span>)<br>&#125;) <span class="hljs-comment">//fire for any update</span><br><span class="hljs-comment">//--------------</span><br><br>userEffect(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;hello&#x27;</span>)<br>&#125;, []) <span class="hljs-comment">//fire for nothing but first time load</span><br><br><span class="hljs-comment">//-------------------</span><br><br>userEffect(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;hello&#x27;</span>)<br>&#125;, [user]) <span class="hljs-comment">//only filre for item in [item]</span><br><br></code></pre></td></tr></table></figure><p>use Async function in <code>useEffect</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">useEffect(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-keyword">const</span> fetchFunc = <span class="hljs-keyword">async</span> () =&gt;&#123;<br>        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`https://.....`</span>)<br>    <span class="hljs-keyword">const</span> resJson = <span class="hljs-keyword">await</span> response.json()<br>        setUser(resJson[<span class="hljs-number">0</span>])<br>        &#125;<br>    fetchFunc();<br>&#125;)<br></code></pre></td></tr></table></figure><p>The code above will cause an infinite loop between:</p><p>setUser (update DOM) -&gt; useEffect -&gt; setUser -&gt; useEffectâ€¦</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// Then this will be called once when mount!</span><br>useEffect(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-keyword">const</span> fetchFunc = <span class="hljs-keyword">async</span> () =&gt;&#123;<br>        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`https://.....`</span>)<br>    <span class="hljs-keyword">const</span> resJson = <span class="hljs-keyword">await</span> response.json()<br>        setUser(resJson[<span class="hljs-number">0</span>])<br>        &#125;<br>    fetchFunc();<br>&#125;, [searchQuery])<br></code></pre></td></tr></table></figure><p><strong>If we want condition, we put them into <code>useEffect</code></strong></p><h2 id="Class-based-component-to-Function-based-component"><a class="header-anchor" href="#Class-based-component-to-Function-based-component">Â¶</a>Class-based component to Function-based component</h2><p>Some thing we changed from class-based components to function-based components:</p><ol><li><p><code>this.state</code> -&gt; <code>useState</code></p></li><li><p><code>this.props</code></p><p>We destructure props we want from the input params of the function component</p></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> SignIn = <span class="hljs-function">(<span class="hljs-params">&#123; emailSignInStart, googleSignInStart &#125;</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> [userCredentials, setUserCredentials] = useState(&#123;<br>    email: <span class="hljs-string">&quot;&quot;</span>,<br>    password: <span class="hljs-string">&quot;&quot;</span>,<br>  &#125;);<br> <span class="hljs-keyword">return</span> (...)<br>&#125;<br><br><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¦‚æœå½“æˆ‘ä»¬æŠŠå¤šä¸ª state values å˜æˆä¸€ä¸ª object ç„¶åä¸€èµ·æ›´æ–°æ—¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> [userCredentials, setUserCredentials] = useState(&#123;<br>    displayName: <span class="hljs-string">&quot;&quot;</span>,<br>    email: <span class="hljs-string">&quot;&quot;</span>,<br>    password: <span class="hljs-string">&quot;&quot;</span>,<br>    confirmPassword: <span class="hljs-string">&quot;&quot;</span>,<br>  &#125;);<br><br><span class="hljs-keyword">const</span> &#123; displayName, email, password, confirmPassword &#125; = userCredentials;  <br><br><span class="hljs-keyword">const</span> handleChange = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;here&quot;</span>);<br>    <span class="hljs-built_in">console</span>.log(event.target);<br>    <span class="hljs-keyword">const</span> &#123; name, value &#125; = event.target;<br><br>    <span class="hljs-comment">// only update the one we want!</span><br>    setUserCredentials(&#123; ...userCredentials, [name]: value &#125;);<br>  &#125;;<br></code></pre></td></tr></table></figure><p>One component will re-render only in three conditions:</p><ol><li>Props change</li><li><code>setState</code> from <code>useState</code></li><li>parent re-render</li></ol><h2 id="userEffect-Unmount"><a class="header-anchor" href="#userEffect-Unmount">Â¶</a>userEffect -&gt; Unmount</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br><br>    <span class="hljs-comment">//clean up function</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>    <br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript">useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;I am subscribing&quot;</span>);<br>  <span class="hljs-keyword">const</span> unsubscribeFromCollection = firestore<br>    .collection(<span class="hljs-string">&quot;collections&quot;</span>)<br>    .onSnapshot(<span class="hljs-function">(<span class="hljs-params">snapshot</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(snapshot));<br>  <br>    <span class="hljs-comment">// cleanup function</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;I am unsubscribing!&quot;</span>);<br>    unsubscribeFromCollection();<br>  &#125;;<br>&#125;, []); <span class="hljs-comment">// pass empty list to avoid infinite loop</span><br><br></code></pre></td></tr></table></figure><h1 id="useEffect-Cheat-Sheet"><a class="header-anchor" href="#useEffect-Cheat-Sheet">Â¶</a>useEffect Cheat Sheet</h1><p>A quick recap of what we have learned about useEffect:</p><h4 id="ComponentDidMount"><a class="header-anchor" href="#ComponentDidMount">Â¶</a>ComponentDidMount</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//Class</span><br><span class="hljs-function"><span class="hljs-title">componentDidMount</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;I just mounted!&#x27;</span>);<br>&#125;<br><br><span class="hljs-comment">//Hooks</span><br>useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;I just mounted!&#x27;</span>);<br>&#125;, [])<br></code></pre></td></tr></table></figure><h4 id="ComponentWillUnmount"><a class="header-anchor" href="#ComponentWillUnmount">Â¶</a>ComponentWillUnmount</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//Class</span><br><span class="hljs-function"><span class="hljs-title">componentWillUnmount</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;I am unmounting&#x27;</span>);<br>&#125;<br><br><span class="hljs-comment">//Hooks</span><br>useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;I am unmounting&#x27;</span>);<br>&#125;, [])<br></code></pre></td></tr></table></figure><h4 id="ComponentWillReceiveProps"><a class="header-anchor" href="#ComponentWillReceiveProps">Â¶</a>ComponentWillReceiveProps</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//Class</span><br><span class="hljs-function"><span class="hljs-title">componentWillReceiveProps</span>(<span class="hljs-params">nextProps</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (nextProps.count !== <span class="hljs-built_in">this</span>.props.count) &#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;count changed&#x27;</span>, nextProps.count);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//Hooks</span><br>useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;count changed&#x27;</span>, props.count);<br>&#125;, [props.count])<br></code></pre></td></tr></table></figure><h1 id="Custom-Hook"><a class="header-anchor" href="#Custom-Hook">Â¶</a>Custom Hook</h1><p><a href="https://github.com/ZhangMYihua/custom-hook-example">https://github.com/ZhangMYihua/custom-hook-example</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs JAVASCRIPT"><span class="hljs-comment">// src/effects/use-fetch.effect.js</span><br><br><br><span class="hljs-keyword">import</span> &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-keyword">const</span> useFetch = <span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> [data, setData] = useState(<span class="hljs-literal">null</span>);<br><br>  useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> fetchData = <span class="hljs-keyword">async</span> () =&gt; &#123;<br>      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> fetch(url);<br>      <span class="hljs-keyword">const</span> dataArray = <span class="hljs-keyword">await</span> res.json();<br>      setData(dataArray[<span class="hljs-number">0</span>]);<br>    &#125;;<br><br>    fetchData();<br>  &#125;, [url]);<br><span class="hljs-comment">//only fire when url change, or if we want to always update data whenver something change, don&#x27;t pass second param</span><br>  <span class="hljs-keyword">return</span> data;<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useFetch;<br></code></pre></td></tr></table></figure><h1 id="useReducer"><a class="header-anchor" href="#useReducer">Â¶</a>useReducer</h1><p><a href="https://github.com/ZhangMYihua/useReducer-example">https://github.com/ZhangMYihua/useReducer-example</a></p><p><a href="https://reactjs.org/docs/hooks-reference.html#usereducer">https://reactjs.org/docs/hooks-reference.html#usereducer</a></p><p><a href="https://react-redux.js.org/api/hooks">https://react-redux.js.org/api/hooks</a></p><h1 id="React-Redux-Hook"><a class="header-anchor" href="#React-Redux-Hook">Â¶</a>React-Redux Hook</h1><h2 id="useSelector-useDispatch-v2"><a class="header-anchor" href="#useSelector-useDispatch-v2">Â¶</a>useSelector, useDispatch</h2><blockquote><p>useSelector: Allows you to extract data from the Redux store state, using a selector function.</p><p>The selector is approximately equivalent to the <a href="https://react-redux.js.org/using-react-redux/connect-mapstate"><code>mapStateToProps</code> argument to <code>connect</code></a> conceptually.</p><p><code>useSelector()</code> will also subscribe to the Redux store, and run your selector whenever an action is dispatched.</p></blockquote><blockquote><p>useDispatch: This hook returns a reference to the <code>dispatch</code> function from the Redux store. You may use it to dispatch actions as needed.</p></blockquote><p>selector itself is a function receives state object</p><p><code>useSelector</code> receives a selector that returns some state, and useSelector will ensure to up-to-date with the state.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span> &#123;<br>   <br>  <span class="hljs-keyword">const</span> currentUser = useSelector(selectCurrentUser);<br>  <span class="hljs-keyword">const</span> dispatch = useDispatch();<br>    <br>  <span class="hljs-comment">// const func = ()=&gt;&#123;...&#125;</span><br>  <span class="hljs-comment">// This will re-assign  everytime re-render</span><br>    <br>  <span class="hljs-comment">//Only when mount</span><br>  useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    dispatch(checkUserSession());<br>  &#125;, [dispatch]);<br>   <br>  <span class="hljs-keyword">return</span> (...)<br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="Adavanced-useState-useEffect"><a class="header-anchor" href="#Adavanced-useState-useEffect">Â¶</a>Adavanced useState, useEffect</h1><p>When a functional component gets re-rendered, do it from top to bottom in synchronous manner.</p><p>A component is re-rendered if</p><ol><li>Props change</li><li>State change</li><li>parent re-render</li></ol><p>We can pass in a function into <code>useState</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">setCount(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> prev+<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p>If a function is dependent on a state, we shall put that function into <code>useEffect</code>. If not, we can place it out of component so it only renders once.</p><h2 id="useCallback"><a class="header-anchor" href="#useCallback">Â¶</a>useCallback</h2><p>If a function depends on a state but is outside of <code>useEffect</code> We cannot know its dependency from looking at the code.</p><p>we can use <code>useEffect</code> to preserve function outside of <code>useEffect</code> and know its dependency</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> myFunc = useCallback(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;effect on&#x27;</span> + test1)<br>&#125;, [test1])<br><br>useEffect(<span class="hljs-function">()=&gt;</span>&#123;<br>    myFunc()<br>&#125;, myFunc)<br></code></pre></td></tr></table></figure><h2 id="useMemo"><a class="header-anchor" href="#useMemo">Â¶</a>useMemo</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">cosnt myObj = &#123;<br>    a: <span class="hljs-string">&#x27;my value of a is &#x27;</span>+ test1<br>&#125;<br><br>useEffect(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(myObj.a)<br>&#125;, [myObj])<br></code></pre></td></tr></table></figure><p>This will always be re-rendered every single time regardless of whether <code>myObj</code> changed or not</p><p>(reference comparison, a new object is initialize every single time for the functional component re-rendering)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">cosnt myObj = useMemo(<span class="hljs-function">() =&gt;</span> (&#123;<br>    a: <span class="hljs-string">&#x27;my value of a is &#x27;</span>+ test1<br>&#125;), [test1])<br><br>useEffect(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(myObj.a)<br>&#125;, [myObj])<br></code></pre></td></tr></table></figure><p><strong>useMemo and useCallback can be very helpful when you want some behavior to be performed based on a specific object or function</strong></p><h2 id="useLayoutEffect"><a class="header-anchor" href="#useLayoutEffect">Â¶</a>useLayoutEffect</h2><p><code>useEffect</code> runs after the paint of the component</p><p><code>useLayoutEffect</code> runs before the paint of the component</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/image-20211121155030357.png" alt="image-20211121155030357"></p><h2 id="useContext"><a class="header-anchor" href="#useContext">Â¶</a>useContext</h2><p>Component way of using context (replacing Redux)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; connect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-redux&quot;</span>;<br><br><span class="hljs-keyword">import</span> CollectionItem <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../components/collection-item/collection-item.component&quot;</span>;<br><br><span class="hljs-keyword">import</span> &#123; selectCollection &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../redux/shop/shop.selectors&quot;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./collection.styles.scss&quot;</span>;<br><br><span class="hljs-keyword">import</span> CollectionsContext <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../contexts/collections/collections.context&quot;</span>;<br><br><span class="hljs-keyword">const</span> CollectionPage = <span class="hljs-function">(<span class="hljs-params">&#123; match &#125;</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> (<br>    &lt;CollectionsContext.Consumer&gt;<br>      &#123;<span class="hljs-function">(<span class="hljs-params">collections</span>) =&gt;</span> &#123;<br>        <span class="hljs-comment">/* Input param is the context we get from CollectionsContext.Consumer */</span><br>        <span class="hljs-keyword">const</span> collection = collections[match.params.collectionId];<br>        <span class="hljs-keyword">const</span> &#123; title, items &#125; = collection;<br>        <span class="hljs-keyword">return</span> (<br>          &lt;div className=<span class="hljs-string">&quot;collection-page&quot;</span>&gt;<br>            &lt;h2 className=<span class="hljs-string">&quot;title&quot;</span>&gt;&#123;title&#125;&lt;/h2&gt;<br>            &lt;div className=<span class="hljs-string">&quot;items&quot;</span>&gt;<br>              &#123;items.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> (<br>                &lt;CollectionItem key=&#123;item.id&#125; item=&#123;item&#125; /&gt;<br>              ))&#125;<br>            &lt;/div&gt;<br>          &lt;/div&gt;<br>        );<br>      &#125;&#125;<br>    &lt;/CollectionsContext.Consumer&gt;<br>  );<br>&#125;;<br><br><span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function">(<span class="hljs-params">state, ownProps</span>) =&gt;</span> (&#123;<br>  collection: selectCollection(ownProps.match.params.collectionId)(state),<br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> CollectionPage;<br><br></code></pre></td></tr></table></figure><p><code>useContext</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> React, &#123; useContext &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; connect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-redux&quot;</span>;<br><br><span class="hljs-keyword">import</span> CollectionItem <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../components/collection-item/collection-item.component&quot;</span>;<br><br><span class="hljs-keyword">import</span> &#123; selectCollection &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../redux/shop/shop.selectors&quot;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./collection.styles.scss&quot;</span>;<br><br><span class="hljs-keyword">import</span> CollectionsContext <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../contexts/collections/collections.context&quot;</span>;<br><br><span class="hljs-keyword">const</span> CollectionPage = <span class="hljs-function">(<span class="hljs-params">&#123; match &#125;</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> collections = useContext(CollectionsContext);<br>  <span class="hljs-keyword">const</span> &#123; title, items &#125; = collections[match.params.collectionId];<br>  <span class="hljs-keyword">return</span> (<br>    &lt;div className=<span class="hljs-string">&quot;collection-page&quot;</span>&gt;<br>      &lt;h2 className=<span class="hljs-string">&quot;title&quot;</span>&gt;&#123;title&#125;&lt;/h2&gt;<br>      &lt;div className=<span class="hljs-string">&quot;items&quot;</span>&gt;<br>        &#123;items.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> (<br>          &lt;CollectionItem key=&#123;item.id&#125; item=&#123;item&#125; /&gt;<br>        ))&#125;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  );<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> CollectionPage;<br></code></pre></td></tr></table></figure><p>However, <code>useContext</code> is not very handy when we need to update a state.  The problem it solves is to easily pass a state of a high node in the DOM tree easily to the lower state.</p><p>An example:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//src/providers/cart/cart.provider.jsx</span><br><span class="hljs-keyword">import</span> React, &#123; createContext, useContext, useEffect, useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">import</span> &#123; addItemToCart, removeItemFromCart &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./cart.utils&quot;</span>;<br><br><span class="hljs-comment">// Vehicle to pass around the local state</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> CartContext = createContext(&#123;<br>  hidden: <span class="hljs-literal">true</span>,<br>  toggleHidden: <span class="hljs-function">() =&gt;</span> &#123;&#125;,<br>  cartItems: [],<br>  addItem: <span class="hljs-function">() =&gt;</span> &#123;&#125;,<br>  removeItem: <span class="hljs-function">() =&gt;</span> &#123;&#125;,<br>  clearItemFromCart: <span class="hljs-function">() =&gt;</span> &#123;&#125;,<br>  cartItemsCount: <span class="hljs-number">0</span>,<br>&#125;);<br><br><span class="hljs-keyword">const</span> CartProvider = <span class="hljs-function">(<span class="hljs-params">&#123; children &#125;</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">//the actual state that is passed down to children components </span><br>  <span class="hljs-keyword">const</span> [cartItems, setCartItems] = useState([]);<br>  <span class="hljs-keyword">const</span> [cartItemsCount, setCartItemsCount] = useState(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">const</span> [hidden, setHidden] = useState(<span class="hljs-literal">true</span>);<br><br>  <span class="hljs-keyword">const</span> toggleHidden = <span class="hljs-function">() =&gt;</span> setHidden(!hidden);<br><br>  <span class="hljs-keyword">const</span> addItem = <span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> setCartItems(addItemToCart(cartItems, item));<br><br>  <span class="hljs-keyword">return</span> (<br>    &lt;CartContext.Provider<br>      value=&#123;&#123; hidden, toggleHidden, cartItems, addItem, cartItemsCount &#125;&#125;<br>    &gt;<br>      &#123;children&#125;<br>    &lt;/CartContext.Provider&gt;<br>  );<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> CartProvider;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//src/index.js</span><br><br><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; BrowserRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router-dom&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; Provider &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-redux&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; PersistGate &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux-persist/integration/react&quot;</span>;<br><br><span class="hljs-keyword">import</span> &#123; store, persistor &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./redux/store&quot;</span>;<br><span class="hljs-keyword">import</span> CartProvider <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./providers/cart/cart.provider&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./index.css&quot;</span>;<br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./App&quot;</span>;<br><br><span class="hljs-comment">// Now all children components of CartProvider can access the state stored in the CartProvider component through the vehicle of useContext! </span><br>ReactDOM.render(<br>  &lt;Provider store=&#123;store&#125;&gt;<br>    &#123;<span class="hljs-comment">/* The actual provider we pass down*/</span>&#125;<br>    &lt;CartProvider&gt;<br>      &lt;BrowserRouter&gt;<br>        &lt;PersistGate persistor=&#123;persistor&#125;&gt;<br>          &lt;App /&gt;<br>        &lt;/PersistGate&gt;<br>      &lt;/BrowserRouter&gt;<br>    &lt;/CartProvider&gt;<br>  &lt;/Provider&gt;,<br>  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;root&quot;</span>)<br>);<br></code></pre></td></tr></table></figure><p>å…·ä½“å®ç°çœ‹ä¸‹é¢çš„ä»£ç ï¼Œ éå¸¸æœ‰å¸®åŠ©ï¼</p><p>Very helpful!</p><p>Code below:</p><p><a href="https://github.com/ZhangMYihua/react-context-practice">https://github.com/ZhangMYihua/react-context-practice</a></p><p><a href="https://github.com/ZhangMYihua/react-context-complete">https://github.com/ZhangMYihua/react-context-complete</a></p>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blogs</tag>
      
      <tag>JS</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>My React Learning Note (4)</title>
    <link href="/2021/11/20/react_notes_4/"/>
    <url>/2021/11/20/react_notes_4/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Firebase ,HOC, Thunk, Sagas</p><span id="more"></span><h1 id="My-React-Learning-Note-4"><a class="header-anchor" href="#My-React-Learning-Note-4">Â¶</a>My React Learning Note (4)</h1><h1 id="Topic-Firebase-HOC-Thunk-Sagas"><a class="header-anchor" href="#Topic-Firebase-HOC-Thunk-Sagas">Â¶</a>Topic: Firebase ,HOC, Thunk, Sagas</h1><h1 id="Styled-Components"><a class="header-anchor" href="#Styled-Components">Â¶</a>Styled-Components</h1><figure class="highlight javascript"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> Text = styled.div<span class="hljs-string">`</span><br><span class="hljs-string">color: red;</span><br><span class="hljs-string">font-size: 28px;</span><br><span class="hljs-string">border: <span class="hljs-subst">$&#123;(&#123;isActive&#125;) =&gt; isActive? <span class="hljs-string">&quot;1px solid black&quot;</span>: <span class="hljs-string">&quot;3px dotted green&quot;</span>&#125;</span></span><br><span class="hljs-string">`</span><br><br>&lt;Text isActive= &#123;tru&#125;&gt;Whatever&lt;/Text&gt;<br></code></pre></td></tr></table></figure><p>å…³äº Styled-Components å¦‚æœéœ€è¦è‡ªå·±å†å­¦ä¹ å§</p><h1 id="Firebase"><a class="header-anchor" href="#Firebase">Â¶</a>Firebase</h1><p>What we did during this session (Forgot to write some codes for this part):</p><ol><li><p>Move Shop Data to Firebase with utility function</p></li><li><p>Change <code>App.js</code> to a class based component which can fetch all products data from firebase for later use</p></li><li><p>Create a <code>shop</code> action that updates local state about collections</p><p>all products info are in <code>this.state.shop.collections</code></p></li><li><p>Call this <code>shop</code>action in <code>componentDidMount</code> of <code>shop.component</code></p><p>Whenever mount the component, we use <code>onSnapshot</code> to listen for <code>snapshot </code>changes or first loading</p></li></ol><h1 id="WithSpinner"><a class="header-anchor" href="#WithSpinner">Â¶</a>WithSpinner</h1><p><code>WithSpinner</code> is a HOC which wraps a component and return a new component!</p><p><code>Please see the code regarding this point</code></p><p>or this link: <a href="github.com/ZhangMYihua/higher-order-components-explained">HOC EXPLAIN</a></p><h1 id="Observable"><a class="header-anchor" href="#Observable">Â¶</a>Observable</h1><p><code>auth.onAuthStateChanged(nextValue)</code> is a stream observer. This is always listening to auth state</p><p>Every time a userâ€™s auth state is changed, currentUser locally is reset</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascirpt">this.unsubscribeFromAuth &#x3D; auth.onAuthStateChanged(async (userAuth) &#x3D;&gt; ...)<br></code></pre></td></tr></table></figure><p>unsubscribeFromAuth is returned by Firebase</p><h2 id="Redux-Thunk"><a class="header-anchor" href="#Redux-Thunk">Â¶</a>Redux Thunk</h2><p>We need to load resources on pages that need it rather than loading it at once. We can put all loading process in to Redux.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> shopReducer = <span class="hljs-function">(<span class="hljs-params">state = INITIAL_STATE, action</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">switch</span> (action.type) &#123;<br>    <span class="hljs-keyword">case</span> ShopActionTypes.FETCH_COLLECTIONS_START:<br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        isFetching: <span class="hljs-literal">true</span>,<br>      &#125;;<br>    <span class="hljs-keyword">case</span> ShopActionTypes.FETCH_COLLECTIONS_SUCCESS:<br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        isFetching: <span class="hljs-literal">false</span>,<br>        collections: action.payload,<br>      &#125;;<br>    <span class="hljs-keyword">case</span> ShopActionTypes.FETCH_COLLECTIONS_FAILURE:<br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        isFetching: <span class="hljs-literal">false</span>,<br>        errorMessage: action.payload,<br>      &#125;;<br>    <span class="hljs-keyword">default</span>:<br>      <span class="hljs-keyword">return</span> state;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>Then we can dispatch in <code>actions</code> (because of Thunk)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchCollectionsStart = <span class="hljs-function">() =&gt;</span> (&#123;<br>  type: ShopActionTypes.FETCH_COLLECTIONS_START,<br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchCollectionsSuccess = <span class="hljs-function">(<span class="hljs-params">collectionsMap</span>) =&gt;</span> (&#123;<br>  type: ShopActionTypes.FETCH_COLLECTIONS_SUCCESS,<br>  payload: collectionsMap,<br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchCollectionsFailure = <span class="hljs-function">(<span class="hljs-params">errorMessage</span>) =&gt;</span> (&#123;<br>  type: ShopActionTypes.FETCH_COLLECTIONS_FAILURE,<br>  payload: errorMessage,<br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchCollectionsStartAsync = <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">dispatch</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> collectionRef = firestore.collection(<span class="hljs-string">&quot;collections&quot;</span>);<br>    <span class="hljs-comment">// By doing so, we make sure that : state.shop.isLoading = true;</span><br>    dispatch(fetchCollectionsStart());<br><br>    <span class="hljs-comment">// Use promise to fetch collections</span><br>    collectionRef<br>      .get()<br>      .then(<span class="hljs-function">(<span class="hljs-params">snapshot</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> collectionsMap = convertCollectionsSnapshotToMap(snapshot);<br>        dispatch(fetchCollectionsSuccess(collectionsMap));<br>      &#125;)<br>      .catch(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> dispatch(fetchCollectionsFailure(error.message)));<br>  &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬æƒ³ separate <code>shop.component</code> å’Œ <code>isLoading</code> çš„é€»è¾‘ï¼Œå¯ä»¥åœ¨ <code>collection-overview</code> å’Œ <code>collection-item</code> å¤–å±‚åŠ ä¸€ä¸ª <code>container</code> . container å†ä» redux æ‹¿ <code>isLoading</code> state</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; connect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-redux&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; createStructuredSelector &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;reselect&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; selectIsCollectionFetching &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../redux/shop/shop.selectors&quot;</span>;<br><span class="hljs-keyword">import</span> WithSpinner <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../with-spinner/with-spinner.component&quot;</span>;<br><span class="hljs-keyword">import</span> CollectionOverview <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./collection-overview.component&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; compose &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux&quot;</span>;<br><br><span class="hljs-comment">// Pass a loading to the WithSpinner component</span><br><span class="hljs-comment">// No idea why not just use in the WithSpinner component</span><br><span class="hljs-keyword">const</span> mapStateToProps = createStructuredSelector(&#123;<br>  isLoading: selectIsCollectionFetching,<br>&#125;);<br><br><span class="hljs-comment">// right to left</span><br><span class="hljs-keyword">const</span> CollectionOverviewContainer = compose(<br>  connect(mapStateToProps),<br>  WithSpinner<br>)(CollectionOverview);<br><br><span class="hljs-comment">//const CollectionOverviewContainer = connect(mapStateToProps)(WithSpinner(CollectionOverviewContainer));</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> CollectionOverviewContainer;<br></code></pre></td></tr></table></figure><h2 id="Redux-Sagas-Generator"><a class="header-anchor" href="#Redux-Sagas-Generator">Â¶</a>Redux Sagas (Generator)</h2><p>A function will run under a certain condition,</p><p>Impure function: a function will return different outputs even when the input parameter is same.</p><p>Move all these impure function to React Sagas, so that Sagas handle the asynchronous calls.</p><h3 id="Generator"><a class="header-anchor" href="#Generator">Â¶</a>Generator</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">gen</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;a&quot;</span>);<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;b&quot;</span>);<br>&#125;<br><span class="hljs-keyword">const</span> g = gen();<br>g;<br><span class="hljs-comment">//genÂ &#123;&lt;suspended&gt;&#125;</span><br>g.next();<br><span class="hljs-comment">//a</span><br><span class="hljs-comment">//b</span><br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">gen</span>(<span class="hljs-params">i</span>) </span>&#123;<br>  <span class="hljs-keyword">yield</span> i;<br>  <span class="hljs-keyword">yield</span> i + <span class="hljs-number">10</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> g = gen(<span class="hljs-number">5</span>);<br><span class="hljs-keyword">const</span> gObj = g.next();<br>gObj;<br><span class="hljs-comment">// &#123;value: 5, done : false&#125;</span><br><span class="hljs-keyword">const</span> jObj = g.next();<br>jObj;<br><span class="hljs-comment">// &#123;value: 15, done: false&#125;</span><br>g.next();<br><span class="hljs-comment">//&#123;value: undefined, done: false&#125;</span><br></code></pre></td></tr></table></figure><p>This allows to return</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">gen</span>(<span class="hljs-params">i</span>) </span>&#123;<br>  <span class="hljs-keyword">yield</span> i;<br>  <span class="hljs-keyword">yield</span> i + <span class="hljs-number">10</span>;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">25</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>We use <code>yield</code> in Saga for easily cancelling the request during process!</p><p>To use sagas, name a function in Sagas with the same name as the redux action call!</p><p>Sagas will listen to all same name actions or prepend with <code>on</code>(e.g. <code>onGoogleSignInStart</code> in the same folder</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; takeEvery, call, put &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux-saga/effects&quot;</span>;<br><br><span class="hljs-keyword">import</span> &#123;<br>  firestore,<br>  convertCollectionsSnapshotToMap,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../firebase/firebase.utils&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<br>  fetchCollectionsSuccess,<br>  fetchCollectionsFailure,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./shop.actions&quot;</span>;<br><br><span class="hljs-keyword">import</span> ShopActionTypes <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./shop.types&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">fetchCollectionsAsync</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">yield</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;fetchCollectionsAsync in Saga is called&quot;</span>);<br><br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> collectionRef = firestore.collection(<span class="hljs-string">&quot;collections&quot;</span>);<br>    <span class="hljs-comment">// similar to async await</span><br><br>    <span class="hljs-keyword">const</span> snapshot = <span class="hljs-keyword">yield</span> collectionRef.get();<br><br>    <span class="hljs-comment">// call a function that returns a promise</span><br>    <span class="hljs-keyword">const</span> collectionsMap = <span class="hljs-keyword">yield</span> call(<br>      convertCollectionsSnapshotToMap,<br>      snapshot<br>    );<br><br>    <span class="hljs-comment">// Put -&gt; dispatch an action</span><br>    <span class="hljs-comment">// if success, we dispatch fetchCollectionsSuccess, store the collectionsMap in the redux store</span><br>    <span class="hljs-keyword">yield</span> put(fetchCollectionsSuccess(collectionsMap));<br>  &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>    <span class="hljs-keyword">yield</span> put(fetchCollectionsFailure(error.message));<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// same name to fetchCollectionsStart in shop.actions.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">fetchCollectionsStart</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">yield</span> takeEvery(<br>    ShopActionTypes.FETCH_COLLECTIONS_START,<br>    fetchCollectionsAsync<br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Why-Sagas"><a class="header-anchor" href="#Why-Sagas">Â¶</a>Why Sagas</h2><p><a href="https://stackoverflow.com/questions/65271387/when-to-use-redux-saga-and-when-redux-thunk">https://stackoverflow.com/questions/65271387/when-to-use-redux-saga-and-when-redux-thunk</a></p><blockquote><p>In my opinion, redux-saga shines if you need to manage the interactions of long-running tasks. For example, I worked on software for set top boxes which needed to manage changing channels. Thereâ€™s several asynchronous things that need to be done in sequence to start up playback, and then during playback extra things need to be done periodically. Additionally, every step needs to be cancellable in case the user changes channels. Something like that is easy to do with sagas (assuming youâ€™re used to working with them), but comparatively hard with un-cancellable promises.</p></blockquote><blockquote><p>If you just need to do fairly simple stuff like â€œwhen they click a button, download some dataâ€, then both of them do the job just fine. If your cases are fairly simple, i would lean towards redux-thunk because itâ€™s learning curve is easier than redux-saga. Promises are common in the industry, and so many developers are already used to them; while sagas are a fairly specialized piece of code.</p></blockquote><blockquote><p>Donâ€™t worry about difference in performance. In both cases, thereâ€™s only a very small amount of time spent running the libraryâ€™s code. The bulk of the time will be spent running your code, and while the style of your code will be quite a bit different, the number of things you need to calculate to do a certain job will be very similar.</p></blockquote><h2 id="take-takeEvery-takeLatest"><a class="header-anchor" href="#take-takeEvery-takeLatest">Â¶</a>take(), takeEvery(), takeLatest()</h2><p><a href="https://github.com/ZhangMYihua/redux-saga-take-takelatest-takeevery">https://github.com/ZhangMYihua/redux-saga-take-takelatest-takeevery</a></p><p><code>take()</code>: take only execute one time</p><p><code>takeEvery()</code>: Every action is independent of each other, kick off a new action!</p><p><code>taleEvery</code> is a <strong>async way</strong> of <code>take</code> in a <code>while</code> loop</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; takeLatest, delay, put &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux-saga/effects&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">onIncrement</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">yield</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;I am incremented&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">incrementSaga</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">yield</span> takeEvery(<span class="hljs-string">&quot;INCREMENT&quot;</span>, onIncrement);<br>&#125;<br></code></pre></td></tr></table></figure><p><code>takeLatest()</code>: debounce and only wants the latest action to be performed if one is blocked</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; takeLatest, delay, put &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux-saga/effects&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">onIncrement</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">yield</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;I am incremented&quot;</span>);<br>  <span class="hljs-keyword">yield</span> delay(<span class="hljs-number">3000</span>);<br>  <span class="hljs-keyword">yield</span> put(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;INCREMENT_FROM_SAGA&quot;</span> &#125;);<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">incrementSaga</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">yield</span> takeLatest(<span class="hljs-string">&quot;INCREMENT&quot;</span>, onIncrement);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Overall-review"><a class="header-anchor" href="#Overall-review">Â¶</a>Overall review</h1><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/image-20211120200047733.png" alt="image-20211120200047733"></p><h2 id="Communication-between-different-action"><a class="header-anchor" href="#Communication-between-different-action">Â¶</a>Communication between different action!</h2><p>With Sagas, we can listen to an action from another component in another component Saga! For example, clear all cart items when a user logout success</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; all, call, put, takeLatest &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux-saga/effects&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; UserActionTypes &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../user/user.types&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; clearCart &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./cart.actions&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">clearCartOnSignOut</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">yield</span> put(clearCart());<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">onSignOutSuccess</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">yield</span> takeLatest(UserActionTypes.SIGN_OUT_SUCCESS, clearCartOnSignOut);<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">cartSagas</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">yield</span> all([call(onSignOutSuccess)]);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blogs</tag>
      
      <tag>JS</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>My React Learning Note (3)</title>
    <link href="/2021/11/04/react_notes_3/"/>
    <url>/2021/11/04/react_notes_3/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Topic: Starting from Redux</p><span id="more"></span><h1 id="My-React-Learning-Note-3"><a class="header-anchor" href="#My-React-Learning-Note-3">Â¶</a>My React Learning Note (3)</h1><h1 id="Topic-Starting-from-Redux"><a class="header-anchor" href="#Topic-Starting-from-Redux">Â¶</a>Topic: Starting from Redux</h1><h2 id="Motivation"><a class="header-anchor" href="#Motivation">Â¶</a>Motivation</h2><p>Redux is a state management library.</p><p>As the app gets larger, it is hard to update, manage the state.</p><p>We move all states in a <code>store</code> which is a massive object. This avoid the complexity that passing props to components that do not need them.</p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/image-20211030164040827.png" alt="image-20211030164040827"></p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/image-20211030164105814.png" alt="image-20211030164105814" style="zoom:50%;" /><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/image-20211030164119824.png" alt="image-20211030164119824" style="zoom:50%;" /><h2 id="Three-principles"><a class="header-anchor" href="#Three-principles">Â¶</a>Three principles:</h2><blockquote><ol><li>Single source of truth</li><li>State is read only</li><li>Changes using pure functions</li></ol></blockquote><p><strong>Redux flow:</strong></p><p>Actions -&gt;(Middleware) -&gt; Root Reducer -&gt; Store -&gt; DOM changes</p><p><strong>Flux pattern:</strong></p><p>Action -&gt; Dispatcher -&gt; Store -&gt; View</p><p>There is only one way of dataflow! Instead of moving data all around!</p><figure class="highlight javascript"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//the outermost</span><br>ReactDOM.render(<br>  <span class="hljs-comment">// Redux Provider</span><br>  &lt;Provider store=&#123;store&#125;&gt;<br>    &lt;BrowserRouter&gt;<br>      &lt;App /&gt;<br>    &lt;/BrowserRouter&gt;<br>  &lt;/Provider&gt;,<br>  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;root&quot;</span>)<br>);<br><br></code></pre></td></tr></table></figure><h2 id="Actions"><a class="header-anchor" href="#Actions">Â¶</a>Actions</h2><blockquote><p>Action is to make sure to fire reducer in a right format</p></blockquote><p>action is object that takes <code>payload</code>, <code>type</code> to update the specific reducer.</p><p><code>type</code> is the instruction to perform. Every time the action returns a new object to the reducer to update the states.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> userReducer = <span class="hljs-function">(<span class="hljs-params">currentState, action</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">switch</span>(action.type)&#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;SET_CURRENT_USER&quot;</span>:<br>            <span class="hljs-keyword">return</span> &#123;<br>...currentState,<br>currentUser: action.payload<br>&#125;<br>        <span class="hljs-keyword">default</span>:<br>            <span class="hljs-keyword">return</span> currentState;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Reducer"><a class="header-anchor" href="#Reducer">Â¶</a>Reducer</h2><p>Reducer is a function that manages the state. We can think of reducer as exposed api to manage the state stored in <code>store</code></p><p>All these reducers then form a root reducer which is a representation of our app state. Then we pass these states to our component.</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">npm <span class="hljs-keyword">install</span> redux redux-logger react-redux<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// header.component.jsx</span><br><span class="hljs-keyword">import</span> &#123; connect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-redux&quot;</span>;<br><br><span class="hljs-comment">//state: root reducer</span><br><span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> (&#123;<br>  <span class="hljs-comment">//1. set the props name</span><br>  <span class="hljs-comment">//2. state = root reducer</span><br>  <span class="hljs-comment">//3. state.user = user reducer</span><br>  <span class="hljs-comment">//4. state.user.currentUser = currentUser in the user reducer!</span><br>  currentUser: state.user.currentUser,<br>&#125;);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connect(mapStateToProps)(Header);<br><br></code></pre></td></tr></table></figure><h2 id="mapStateToProps"><a class="header-anchor" href="#mapStateToProps">Â¶</a>mapStateToProps</h2><p><code>mapStateToProps?: (state, ownProps?) =&gt; Object</code></p><blockquote><p>If a <code>mapStateToProps</code> function is specified, the new wrapper component will subscribe to Redux store updates. This means that any time the store is updated, <code>mapStateToProps</code> will be called. The results of <code>mapStateToProps</code> must be a plain object, which will be merged into the wrapped componentâ€™s props. If you donâ€™t want to subscribe to store updates, pass <code>null</code> or <code>undefined</code> in place of <code>mapStateToProps</code>.</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//state: root reducer</span><br><span class="hljs-comment">//put a props into the header component</span><br><span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> (&#123;<br>  <span class="hljs-comment">//1. set the props name</span><br>  <span class="hljs-comment">//2. state = root reducer</span><br>  <span class="hljs-comment">//3. state.user = user reducer</span><br>  <span class="hljs-comment">//4. state.user.currentUser = currentUser in the user reducer!</span><br>  currentUser: state.user.currentUser,<br>&#125;);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connect(mapStateToProps)(Header);<br><br><span class="hljs-comment">//or advanced destructrue</span><br><span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function">(<span class="hljs-params">&#123; user: &#123; currentUser &#125;, cart: &#123; hidden &#125; &#125;</span>) =&gt;</span> (&#123;<br>  currentUser,<br>  hidden,<br>&#125;);<br></code></pre></td></tr></table></figure><h2 id="mapDispatchToProps"><a class="header-anchor" href="#mapDispatchToProps">Â¶</a>mapDispatchToProps</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> mapDispatchToProps = <span class="hljs-function">(<span class="hljs-params">dispatch</span>) =&gt;</span> (&#123;<br>  setCurrentUser: <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> dispatch(setCurrentUser(user)),<br>&#125;);<br><br><span class="hljs-comment">//param1: mapState, param2: mapDispatch</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connect(<span class="hljs-literal">null</span>, mapDispatchToProps)(App);<br><br></code></pre></td></tr></table></figure><p>If we do not supply <code>mapDispatchToProps</code> to <code>connect</code>. <code>connect</code> will put <code>dispatch</code> to props!</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;CustomButton onClick=&#123;<span class="hljs-function">() =&gt;</span> &#123;<br>      history.push(<span class="hljs-string">&quot;/checkout&quot;</span>);<br>      dispatch(toggleCartHidden());<br>    &#125;&#125;&gt;<br>      Go to checkout<br>    &lt;/CustomButton&gt;<br></code></pre></td></tr></table></figure><h2 id="Redirect"><a class="header-anchor" href="#Redirect">Â¶</a>Redirect</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;Route exact path=<span class="hljs-string">&quot;/signin&quot;</span> render=&#123;<span class="hljs-function">() =&gt;</span> (<span class="hljs-built_in">this</span>.props.currentUser? (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Redirect</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&#x27;/&#x27;</span> /&gt;</span></span>) : (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SignInAndSignUpPage</span> /&gt;</span></span>))&#125; /&gt;<br></code></pre></td></tr></table></figure><h2 id="find"><a class="header-anchor" href="#find">Â¶</a>find</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// cart.utils.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> addItemToCart = <span class="hljs-function">(<span class="hljs-params">cartItems, cartItemToAdd</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> existingCartItem = cartItems.find(<br>    (cartItem) =&gt; cartItem.id === cartItemToAdd.id<br>  );<br>  <span class="hljs-keyword">if</span> (existingCartItem) &#123;<br>    <span class="hljs-keyword">return</span> cartItems.map(<span class="hljs-function">(<span class="hljs-params">cartItem</span>) =&gt;</span><br>      cartItem.id === cartItemToAdd.id<br>        ? &#123; ...cartItem, <span class="hljs-attr">quantity</span>: cartItem.quantity + <span class="hljs-number">1</span> &#125;<br>        : cartItem<br>    );<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">return</span> [...cartItems, &#123; ...cartItemToAdd, <span class="hljs-attr">quantity</span>: <span class="hljs-number">1</span> &#125;];<br>  &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h2 id="selector-and-reduce"><a class="header-anchor" href="#selector-and-reduce">Â¶</a>selector and reduce</h2><p><strong>Selector</strong>: get a portion of state info for our need</p><p>first parameter will be accumulated</p><p>the second parameter is the element being traversed</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> (&#123;<br>  itemCount: state.cart.cartItems.reduce(<br>    (accumulatedQuantity, cartItem) =&gt;<br>      accumulatedQuantity + cartItem.quantity,<br>    <span class="hljs-number">0</span><br>  ),<br>&#125;);<br></code></pre></td></tr></table></figure><h2 id="reselect"><a class="header-anchor" href="#reselect">Â¶</a>reselect</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-comment">//cart.selectors.js</span><br><span class="hljs-keyword">import</span> &#123; createSelector &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;reselect&quot;</span>;<br><br><span class="hljs-keyword">const</span> selectCart = <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.cart;<br><br><span class="hljs-comment">//Memorized selector</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> selectCartItems = createSelector(<br>  [selectCart],<br>  (cart) =&gt; cart.cartItems<br>);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> selectCartItemsCount = createSelector([selectCartItems], <span class="hljs-function">(<span class="hljs-params">cartItems</span>) =&gt;</span><br>  cartItems.reduce(<br>    (accumulatedQuantity, cartItem) =&gt; accumulatedQuantity + cartItem.quantity,<br>    <span class="hljs-number">0</span><br>  )<br>);<br><br></code></pre></td></tr></table></figure><p>Then, we can replace mapStateToProps with selector!</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> selectCartItems(state);<br><br><span class="hljs-comment">//itemCount can be then pass as props!</span><br><span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> (&#123;<br>  itemCount: selectCartItemsCount(state),<br>&#125;);<br><br></code></pre></td></tr></table></figure><p><strong>createStructuredSelector</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> mapStateToProps = createStructuredSelector(<br>&#123;<br>    itemCount: selectCartItemsCount<br>&#125;)<br></code></pre></td></tr></table></figure><h1 id="withRouter"><a class="header-anchor" href="#withRouter">Â¶</a>withRouter</h1><p>withRouter allows components not wrapped with <code>&lt;Route&gt;</code> access to <code>this.props.history</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> withRouter(connect(mapStateToProps)(CartDropdown));<br></code></pre></td></tr></table></figure><h1 id="Redux-Persist"><a class="header-anchor" href="#Redux-Persist">Â¶</a>Redux Persist</h1><p><a href="https://www.npmjs.com/package/redux-persist">https://www.npmjs.com/package/redux-persist</a></p><p><code>window.sessionStorage</code>: stores for a session</p><p><code>window.localStorage</code>: store until get cleared!</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> myObject = &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&quot;alibaba&quot;</span>&#125;<br><span class="hljs-built_in">window</span>.localStorage.setItem(<span class="hljs-string">&quot;myItem&quot;</span>, <span class="hljs-built_in">JSON</span>.stringify(myObject))<br><br><span class="hljs-keyword">const</span> myRetrieved = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-built_in">window</span>.localStorage.getItem(<span class="hljs-string">&quot;myItem&quot;</span>))<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//store.js</span><br><span class="hljs-keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux&quot;</span>;<br><span class="hljs-keyword">import</span> logger <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux-logger&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; persistStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux-persist&quot;</span>;<br><span class="hljs-keyword">import</span> rootReducer <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./root-reducer&quot;</span>;<br><br><span class="hljs-keyword">const</span> middlewares = [logger];<br><br><span class="hljs-keyword">const</span> store = createStore(rootReducer, applyMiddleware(...middlewares));<br><br><span class="hljs-comment">//make store persistable</span><br><span class="hljs-keyword">const</span> persistor = persistStore(store);<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//root-reducer.js</span><br><span class="hljs-keyword">import</span> &#123; combineReducers &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; persistReducer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux-persist&quot;</span>;<br><span class="hljs-comment">//import sessionStorage from &quot;...&quot;;</span><br><span class="hljs-keyword">import</span> storage <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux-persist/lib/storage&quot;</span>;<br><span class="hljs-keyword">import</span> userReducer <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./user/user.reducer&quot;</span>;<br><span class="hljs-keyword">import</span> cartReducer <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./cart/cart.reducer&quot;</span>;<br><br><span class="hljs-keyword">const</span> persistConfig = &#123;<br>  key: <span class="hljs-string">&quot;root&quot;</span>,<br>  storage,<br>  whitelist: [<span class="hljs-string">&quot;cart&quot;</span>],<br>&#125;;<br><br><span class="hljs-keyword">const</span> rootReducer = combineReducers(&#123;<br>  user: userReducer,<br>  cart: cartReducer,<br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> persistReducer(persistConfig, rootReducer);<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blogs</tag>
      
      <tag>JS</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>My React Learning Note (2)</title>
    <link href="/2021/10/30/react_notes_2/"/>
    <url>/2021/10/30/react_notes_2/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Topic: React Basics</p><span id="more"></span><h1 id="My-React-Learning-Note-1"><a class="header-anchor" href="#My-React-Learning-Note-1">Â¶</a>My React Learning Note (1)</h1><h1 id="Hover-effect"><a class="header-anchor" href="#Hover-effect">Â¶</a>Hover effect</h1><figure class="highlight scss"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">//menu-item</span><br><span class="hljs-attribute">overflow</span>: hidden;<br><br>&amp;<span class="hljs-selector-pseudo">:hover</span> &#123;<br>    <span class="hljs-attribute">cursor</span>: pointer;<br>  <br>    &amp; <span class="hljs-selector-class">.background-image</span> &#123;<br>      <span class="hljs-attribute">transform</span>: scale(<span class="hljs-number">1.1</span>);<br>      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">6s</span> cubic-bezier(<span class="hljs-number">0.25</span>, <span class="hljs-number">0.45</span>, <span class="hljs-number">0.45</span>, <span class="hljs-number">0.95</span>);<br>    &#125;<br>  <br>    &amp; <span class="hljs-selector-class">.content</span> &#123;<br>      <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.9</span>;<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">//menu-item</span><br>&lt;div<br>      className=<span class="hljs-string">&quot;background-image&quot;</span><br>      style=&#123;&#123;<br>        backgroundImage: <span class="hljs-string">`url(<span class="hljs-subst">$&#123;imageUrl&#125;</span>)`</span>,<br>      &#125;&#125;<br>    /&gt;<br></code></pre></td></tr></table></figure><h1 id="Routing"><a class="header-anchor" href="#Routing">Â¶</a>Routing</h1><p>Server focuses on data: REST</p><p>Frontend: <strong>Single Page Application</strong></p><p>React does not have built-in routing</p><h2 id="React-Router"><a class="header-anchor" href="#React-Router">Â¶</a>React Router</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>reactrouter.com<span class="hljs-regexp">/web/gui</span>des/quick-start<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//index.js</span><br>ReactDOM.render(<br>  &lt;BrowserRouter&gt;<br>    &lt;App /&gt;<br>  &lt;/BrowserRouter&gt;,<br>  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;root&quot;</span>)<br>);<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/ZhangMYihua/</span>react-router-demo<br></code></pre></td></tr></table></figure><p>check this repo to know the demo code for <code>Router, Switch</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; Route, Link &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span>;<br><br><span class="hljs-keyword">const</span> HomePage = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(props);<br>  <span class="hljs-keyword">return</span> (<br>    &lt;div&gt;<br>      &lt;button onClick=&#123;<span class="hljs-function">() =&gt;</span> props.history.push(<span class="hljs-string">&#x27;/topics&#x27;</span>)&#125;&gt;Topics &lt;/button&gt;<br>      &lt;h1&gt;HOME PAGE&lt;/h1&gt;<br>    &lt;/div&gt;<br>  );<br>&#125;;<br><br><span class="hljs-keyword">const</span> TopicsList = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> (<br>    &lt;div&gt;<br>      &lt;h1&gt;TOPIC LIST PAGE&lt;/h1&gt;<br>      &lt;Link to=&#123;<span class="hljs-string">`<span class="hljs-subst">$&#123;props.match.url&#125;</span>/13`</span>&#125;&gt;TO TOPIC <span class="hljs-number">13</span>&lt;/Link&gt;<br>      &lt;Link to=&#123;<span class="hljs-string">`<span class="hljs-subst">$&#123;props.match.url&#125;</span>/17`</span>&#125;&gt;TO TOPIC <span class="hljs-number">17</span>&lt;/Link&gt;<br>      &lt;Link to=&#123;<span class="hljs-string">`<span class="hljs-subst">$&#123;props.match.url&#125;</span>/21`</span>&#125;&gt;TO TOPIC <span class="hljs-number">21</span>&lt;/Link&gt;<br>    &lt;/div&gt;<br>  );<br>&#125;;<br><br><span class="hljs-keyword">const</span> TopicDetail = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> (<br>    &lt;div&gt;<br>      &lt;h1&gt;TOPIC DETAIL PAGE: &#123;props.match.params.topicId&#125;&lt;/h1&gt;<br>    &lt;/div&gt;<br>  );<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> (<br>    &lt;div&gt;<br>      &lt;Route exact path=<span class="hljs-string">&#x27;/&#x27;</span> component=&#123;HomePage&#125; /&gt;<br>      &lt;Route exact path=<span class="hljs-string">&#x27;/blog/asdqw/topics&#x27;</span> component=&#123;TopicsList&#125; /&gt;<br>      &lt;Route path=<span class="hljs-string">&#x27;/blog/asdqw/topics/:topicId&#x27;</span> component=&#123;TopicDetail&#125; /&gt;<br>      &lt;Route exact path=<span class="hljs-string">&#x27;/blog/topics&#x27;</span> component=&#123;TopicsList&#125; /&gt;<br>      &lt;Route path=<span class="hljs-string">&#x27;/blog/topics/:topicId&#x27;</span> component=&#123;TopicDetail&#125; /&gt;<br>    &lt;/div&gt;<br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;<br></code></pre></td></tr></table></figure><p>Fast way of passing attributes to props:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<span class="hljs-built_in">this</span>.state.sections.map(<span class="hljs-function">(<span class="hljs-params">&#123; id, ...otherSectionProps &#125;</span>) =&gt;</span> (<br>          &lt;MenuItem key=&#123;id&#125; &#123;...otherSectionProps&#125;&gt;&lt;/MenuItem&gt;<br>        ))&#125;<br></code></pre></td></tr></table></figure><h3 id="Navigate"><a class="header-anchor" href="#Navigate">Â¶</a>Navigate</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;div<br>    className=&#123;<span class="hljs-string">`<span class="hljs-subst">$&#123;size&#125;</span> menu-item`</span>&#125;<br>    onClick=&#123;<span class="hljs-function">() =&gt;</span> history.push(<span class="hljs-string">`<span class="hljs-subst">$&#123;match.url&#125;</span><span class="hljs-subst">$&#123;linkUrl&#125;</span>`</span>)&#125;<br>  &gt;<br>  ...<br>  &lt;/div?<br>  <br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> withRouter(MenuItem);<br></code></pre></td></tr></table></figure><p>By using <code>withRouter</code>: it has the ability of getting the history</p><h1 id="Forms"><a class="header-anchor" href="#Forms">Â¶</a>Forms</h1><ol><li>Decide on Components</li><li>Decide the State and where it lives</li><li>What changes when state changes</li></ol><p>Here uses class component for the convenience of using arrow function to have access to <code>this.state</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//Handle submitting the form</span><br>handleSubmit = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    event.preventDefault();<br><br>    <span class="hljs-built_in">this</span>.setState(&#123; <span class="hljs-attr">email</span>: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">&quot;&quot;</span> &#125;);<br>  &#125;;<br><br>  <span class="hljs-comment">//this will auto fill name with name and the value to be the value</span><br>  <span class="hljs-comment">//Handle updating the state</span><br>  handleChange = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; value, name &#125; = event.target;<br>    <span class="hljs-built_in">this</span>.setState(&#123; [name]: value &#125;);<br>  &#125;;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//Can dynamically set className or Label</span><br><span class="hljs-keyword">const</span> FormInput = <span class="hljs-function">(<span class="hljs-params">&#123; handleChange, label, ...otherProps &#125;</span>) =&gt;</span> (<br>  &lt;div className=<span class="hljs-string">&quot;group&quot;</span>&gt;<br>    &lt;input className=<span class="hljs-string">&quot;form-input&quot;</span> onChange=&#123;handleChange&#125; &#123;...otherProps&#125; /&gt;<br>    &#123;label ? (<br>      &lt;label<br>        className=&#123;<span class="hljs-string">`<span class="hljs-subst">$&#123;</span></span><br><span class="hljs-string"><span class="hljs-subst">          otherProps.value.length ? <span class="hljs-string">&quot;shrink&quot;</span> : <span class="hljs-string">&quot;&quot;</span></span></span><br><span class="hljs-string"><span class="hljs-subst">        &#125;</span> form-input-label`</span>&#125;<br>      &gt;<br>        &#123;label&#125;<br>      &lt;/label&gt;<br>    ) : <span class="hljs-literal">null</span>&#125;<br>  &lt;/div&gt;<br>);<br></code></pre></td></tr></table></figure><h1 id="Firebase"><a class="header-anchor" href="#Firebase">Â¶</a>Firebase</h1><p>After setting all the configs of Firebase Auth. We can use</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//Class component App.js</span><br><span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">super</span>();<br><br>    <span class="hljs-built_in">this</span>.state = &#123;<br>      currentUser: <span class="hljs-literal">null</span>,<br>    &#125;;<br>  &#125;<br>...<br><span class="hljs-function"><span class="hljs-title">componentDidMount</span>(<span class="hljs-params"></span>)</span> &#123;<br>    auth.onAuthStateChanged(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> &#123;<br>      <span class="hljs-built_in">this</span>.setState(&#123; <span class="hljs-attr">currentUser</span>: user &#125;);<br>      <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.state.currentUser);<br>    &#125;);<br>  &#125;<br></code></pre></td></tr></table></figure><p>to automatically check if a user is logged in or not. Then we can use JWT to auth user to the backend.</p><p>We can then pass this currentUser to Header to set SignIn SignOut</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> Header = <span class="hljs-function">(<span class="hljs-params">&#123; currentUser &#125;</span>) =&gt;</span> (<br>  &lt;div className=<span class="hljs-string">&quot;header&quot;</span>&gt;<br>    &lt;Link className=<span class="hljs-string">&quot;logo-container&quot;</span> to=<span class="hljs-string">&quot;/&quot;</span>&gt;<br>      &lt;Logo className=<span class="hljs-string">&quot;logo&quot;</span> /&gt;<br>    &lt;/Link&gt;<br>    &lt;div className=<span class="hljs-string">&quot;options&quot;</span>&gt;<br>      &lt;Link className=<span class="hljs-string">&quot;option&quot;</span> to=<span class="hljs-string">&quot;/shop&quot;</span>&gt;<br>        SHOP<br>      &lt;/Link&gt;<br>      &lt;Link className=<span class="hljs-string">&quot;option&quot;</span> to=<span class="hljs-string">&quot;/shop&quot;</span>&gt;<br>        CONTACT<br>      &lt;/Link&gt;<br>      &#123;<br>        currentUser ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;option&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> auth.signOut()&#125;&gt;SIGN OUT<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;option&quot;</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/signin&quot;</span>&gt;</span>SIGN IN<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span><br>      &#125;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>);<br></code></pre></td></tr></table></figure><h2 id="About-SetState"><a class="header-anchor" href="#About-SetState">Â¶</a>About SetState()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">handleChange = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; name, value &#125; = event.target;<br><br>    <span class="hljs-built_in">this</span>.setState(&#123; [name]: value &#125;);<br>  &#125;;<br></code></pre></td></tr></table></figure><p>We can use <code>handleChange</code> to handle the input to be sent to state. But what <code>&#123;[name]: value&#125;</code> exactly does?</p><p>here <code>name</code> is a variable name, using <code>[name]</code> means pass the string that variable represents to the place of <code>[name]</code>!</p>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blogs</tag>
      
      <tag>JS</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>My React Learning Note (1)</title>
    <link href="/2021/10/23/react_notes_1/"/>
    <url>/2021/10/23/react_notes_1/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Topic: React Basics</p><span id="more"></span><h1 id="My-React-Learning-Note-1"><a class="header-anchor" href="#My-React-Learning-Note-1">Â¶</a>My React Learning Note (1)</h1><h1 id="Topic-React-Basics"><a class="header-anchor" href="#Topic-React-Basics">Â¶</a>Topic: React Basics</h1><h2 id="State-V-S-Props"><a class="header-anchor" href="#State-V-S-Props">Â¶</a>State V.S Props</h2><ul><li>Every time a state is changed, the JSX gets rendered again</li><li>One direction data flow: State=&gt;Props</li><li>Therefore, Every time when a state changes, all the props of that state is rendered again!</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// Run at the time of mounting  </span><br><span class="hljs-function"><span class="hljs-title">componentDidMount</span>(<span class="hljs-params"></span>)</span> &#123;<br>  &#125;<br></code></pre></td></tr></table></figure><h2 id="Synthetic-Event"><a class="header-anchor" href="#Synthetic-Event">Â¶</a>Synthetic Event</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">onChange</span><br></code></pre></td></tr></table></figure><p>Event Handler that will only be triggered when a specific event happens.</p><h2 id="Error-function"><a class="header-anchor" href="#Error-function">Â¶</a>Error function</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/* in constructor */</span><br><span class="hljs-built_in">this</span>.handleChange = <span class="hljs-built_in">this</span>.handleChange.bind(<span class="hljs-built_in">this</span>);<br><br><span class="hljs-comment">/* in class */</span><br><span class="hljs-function"><span class="hljs-title">handleChange</span>(<span class="hljs-params">e</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.setState(&#123; <span class="hljs-attr">searchField</span>: e.target.value &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><p>this is equivalent to</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/* arrow function automatically gets the scope */</span><br>handleChange = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">this</span>.setState(&#123; <span class="hljs-attr">searchField</span>: e.target.value &#125;);<br> &#125;<br></code></pre></td></tr></table></figure><h2 id="React-and-ReactDOM"><a class="header-anchor" href="#React-and-ReactDOM">Â¶</a>React and ReactDOM</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span>&#123;<br>        <span class="hljs-keyword">return</span> React.createElement(<span class="hljs-string">&quot;div&quot;</span>, &#123;&#125;, React.createElement(<span class="hljs-string">&quot;h1&quot;</span>, &#123;&#125;, <span class="hljs-string">&quot;React Is Rendered!&quot;</span>)<br>    &#125;<br>ReactDOM.render(React.createElement(App), <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;root&quot;</span>))                                   <br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h2 id="React-Package-Update"><a class="header-anchor" href="#React-Package-Update">Â¶</a>React Package Update</h2><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">npm</span> update<br><span class="hljs-built_in">npm</span> list react react-dom react-scripts<br><span class="hljs-built_in">npm</span> audit fix<br></code></pre></td></tr></table></figure><h2 id="Virtual-DOM-Unidirectional-Data-Flow"><a class="header-anchor" href="#Virtual-DOM-Unidirectional-Data-Flow">Â¶</a>Virtual DOM / Unidirectional Data Flow</h2><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xl">A<span class="hljs-function"><span class="hljs-title">ctual</span> Dom       -------&gt;</span> Virtual Dom<br></code></pre></td></tr></table></figure><p><strong>Virtual Dom is a copy of Actual Dom:</strong></p><ul><li>Every time a component is re-rendered, a Virtual Dom is copied</li><li>Compare with the Actual Dom, see what is different(re-rendered)</li><li>Make update in Actual Dom</li></ul><p><strong>Unidirectional Data Flow:</strong></p><p>Data only affects the children of nodes! Therefore, state should be placed wisely so that minimal number of nodes shall be updated</p><h2 id="Async-setState"><a class="header-anchor" href="#Async-setState">Â¶</a>Async setState</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/* not a good practice */</span><br>handleClick = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">this</span>.setState(&#123; <span class="hljs-attr">coins</span>: <span class="hljs-built_in">this</span>.state.coins+<span class="hljs-number">1</span>&#125;)<br>&#125;<br><br><span class="hljs-comment">/* Let the first argument also be a function, </span><br><span class="hljs-comment">Second one is to read the updated state */</span><br>handleClick = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState, prevProps</span>) =&gt;</span> &#123;<span class="hljs-keyword">return</span> &#123;<br>        &#123;<span class="hljs-attr">cois</span>: prevState.coins+<span class="hljs-number">1</span>&#125;        <br>   &#125;&#125;, <span class="hljs-function">()=&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.state.coins) )<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/* Allow using props in the constructor */</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;<br><span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span> &#123;<br><span class="hljs-built_in">super</span>(props);<br>     <span class="hljs-built_in">this</span>.props = props<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/* Only works of React and Babel but not JS */</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;<br>state = &#123;<br>coins: <span class="hljs-number">47</span><br>&#125;<br><span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Life-Cycle-Methods-of-Class-Component"><a class="header-anchor" href="#Life-Cycle-Methods-of-Class-Component">Â¶</a>Life Cycle Methods of Class Component</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<span class="hljs-built_in">this</span>.state.showChild&#125;? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Lifecycles</span> <span class="hljs-attr">text</span>=<span class="hljs-string">&#123;this.state.text&#125;</span> /&gt;</span></span> : <span class="hljs-literal">null</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Lifecycles</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-built_in">super</span>();<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;constructor!&quot;</span>)<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">componentDidMount</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;componentDidMount!&quot;</span>)<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">componentDidUpdate</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;conponentDidUpdate!&quot;</span>)<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">componentWillUnmount</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;componentWillUnmount!&quot;</span>)<br>    &#125;<br>    <br>    <span class="hljs-comment">/* determine if a update should proceed */</span><br>    <span class="hljs-function"><span class="hljs-title">shouldComponentUpdate</span>(<span class="hljs-params">nextProps, nextState</span>)</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;shouldComponentUpdate!&quot;</span>)<br>        <span class="hljs-keyword">return</span> nextProps.text !== <span class="hljs-built_in">this</span>.props.text<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;render!&quot;</span>)<br>        <span class="hljs-keyword">return</span> (<br>        &lt;div className=<span class="hljs-string">&#x27;lifecycles&#x27;</span>&gt;<br>            &lt;h3&gt;LIFE CYCLES&lt;/h3&gt;<br>            &#123;<span class="hljs-built_in">this</span>.props.text&#125;<br>            &lt;/div&gt;<br>        )<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/">React lifecycle methods diagram</a></p><p><img src="https://raw.githubusercontent.com/q815101630/pic_storage/main/img/image-20211023014132837.png" alt="image-20211023014132837"></p>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blogs</tag>
      
      <tag>JS</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€äº›æ‚è®°ï¼Œç¬¬ä¸€ç¯‡æ—¥è®°å¼çš„æ€ç»´ç¬”è®°</title>
    <link href="/2021/07/25/How%20to%20Read%20a%20Book/"/>
    <url>/2021/07/25/How%20to%20Read%20a%20Book/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä¸€äº›æ‚è®°ï¼Œç¬¬ä¸€ç¯‡æ—¥è®°å¼çš„æ€ç»´ç¬”è®°"><a class="header-anchor" href="#ä¸€äº›æ‚è®°ï¼Œç¬¬ä¸€ç¯‡æ—¥è®°å¼çš„æ€ç»´ç¬”è®°">Â¶</a>ä¸€äº›æ‚è®°ï¼Œç¬¬ä¸€ç¯‡æ—¥è®°å¼çš„æ€ç»´ç¬”è®°</h1><span id="more"></span><p>è‡ªä»ç½‘è¯¾å¼€å§‹ï¼Œæ…¢æ…¢æ²¾æŸ“ä¸Šäº†æ™šç¡è§‰çš„ä¹ æƒ¯ï¼Œäººåˆ°æ¸…æ™¨å››äº”ç‚¹ï¼Œä»ç„¶è¾—è½¬åä¾§ï¼Œéš¾ä»¥å…¥çœ ã€‚ç¡ä¸ç€æ—¶æ€»æ˜¯åœ¨åšä¸€äº›èƒ¡æ€ä¹±æƒ³ï¼ŒåŒ…æ‹¬è¯»ä¹¦ï¼Œå¥èº«ï¼Œç¤¾äº¤ç­‰ç­‰ã€‚æˆ‘è¿™ä¸ªäººå°±æ˜¯å¦‚æ­¤ï¼Œç¡å‰æ€»æ˜¯æƒ³æ³•çº·çº·ï¼Œä½†ä¹‹åèƒ½å¤Ÿè®°ä¸‹çš„ï¼Œèƒ½å¤Ÿæœ‰å°è±¡çš„ï¼Œä¸æ˜¯å¾ˆå¤šã€‚å› æ­¤ï¼Œç‰¹åˆ«æƒ³ç”¨ä¸€äº›æ–‡å­—è®°å½•ä¸‹å½“æ—¶çš„ä¸€äº›æƒ³æ³•ï¼Œè°¨ä»¥æ­¤æ¥è®©é”»ç‚¼è‡ªå·±çš„è®°å¿†èƒ½åŠ›ï¼Œè¾“å‡ºèƒ½åŠ›ï¼Œå¹¶åˆ°æœªæ¥ä¹Ÿèƒ½å¤Ÿç»™è¿‡å¾€çš„æ€æƒ³ç•™ä¸‹ç—•è¿¹ã€‚</p><h2 id="å…³äºè‡ªå·±ï¼š"><a class="header-anchor" href="#å…³äºè‡ªå·±ï¼š">Â¶</a>å…³äºè‡ªå·±ï¼š</h2><p>æˆ‘è™½ä¸èƒ½è‡ªç§°ä¸ºè¯»ä¹¦è¯»çš„å¾ˆå¤šçš„äººï¼Œä½†æˆ‘ä¹Ÿè‡ªè®¤ä¸ºå±äºå–œæ¬¢è¯»ä¹¦çš„äººé‚£ä¸€ç±»ã€‚åšä¿¡ç€è¯»ä¹¦èƒ½å¤Ÿç»™ä¸€ä¸ªäººå¸¦æ¥æ€ç»´çš„æå‡å¹¶å¯¹ç”Ÿæ´»ä½“éªŒå¸¦æ¥æ­£å‘çš„å½±å“ã€‚ä½†å¾€å¾€æˆ‘ä¹Ÿæ²‰æµ¸äºæ¶ˆé£å¼çš„é˜…è¯»ä¸­ï¼Œä¾‹å¦‚åœ°é“ä¸Šçš„æ‰“å‘æ—¶é—´ï¼Œæˆ–è€…æ— èŠç”Ÿæ´»ä¸­çš„ä¸€ä¸å¿«æ„Ÿã€‚ç„¶è€Œéšç€æˆ‘æ…¢æ…¢è¿›å…¥å¤§å­¦ï¼Œè¶Šæ¥è¶Šå‘æ˜é˜…è¯»çš„åŠ›é‡ä¸ä»…ä»…æ˜¯å¸¦æ¥æ¶ˆé£å’ŒçŸ­æš‚çš„æ¾æ‡ˆï¼Œä½†æ›´é‡è¦çš„æ˜¯å®ƒå¯¹çœŸæ­£ç”Ÿæ´»æœ‰å¸®åŠ©ï¼Œæ‰€ä»¥è¶Šå‘é‡è§†å¸¦ç€ç›®çš„åœ°è¯»ä¹¦ã€‚ç›®çš„æ€§çš„é˜…è¯»æ˜¯ä¸ºäº†è®©äººåœ¨é˜…è¯»ä¸­æ”¶è·çŸ¥è¯†ï¼Œå¹¶ä»¥æ­¤æ¥æ¿€å‘æ›´å¤šçš„é˜…è¯»å…´è¶£å’Œæ­£å‘åé¦ˆï¼Œä»¥æ­¤é€ƒç¦»ä¸€ç§ä¸å¤ªå¥åº·çš„â€œä½çº§é˜…è¯»â€çš„é˜…è¯»å¾ªç¯ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•è¯»å¥½ä¸€æœ¬ä¹¦ï¼Œå¦‚ä½•å»å……åˆ†åœ°ç†è§£ä½œè€…çš„ç”¨å¿ƒè‰¯è‹¦å¹¶ä»ä¹¦ä¸­æ”¶è·æ›´å¤šï¼Œæ–¹æ³•è®ºå°±æ›´ä¸ºé‡è¦ã€‚å…¶å®ä¸ªäººè€Œè¨€ï¼Œæˆ‘æ›¾å¹¶æ²¡æ„è¯†åˆ°æ–¹æ³•è®ºçš„é‡è¦æ€§ï¼Œè€Œæ˜¯åœ¨ç”Ÿæ´»ä¸­æ›´ä¸ºéšå¿ƒè€ŒåŠ¨ï¼Œå¯»è§…è‡ªå·±å–œæ¬¢çš„çŸ¥è¯†ï¼Œç”¨è‡ªå·±æ›´ä¸ºç†Ÿæ‚‰çš„æ–¹æ³•è¿›è¡Œå­¦ä¹ å’Œå·¥ä½œã€‚ä½†å¾€å¾€è‡ªå·±èˆ’é€‚çš„æ–¹å¼å¹¶ä¸ä¼šæå‡è‡ªå·±çš„æ°´å¹³ï¼Œæ¯”å¦‚æ¶ˆé£å¼çš„é˜…è¯»å¸¦æ¥çš„æ­£å‘åé¦ˆä¼šåœ¨çŸ­æ—¶é—´å†…æ¶ˆå¤±ï¼Œåˆç±»å¦‚å¸¸å¸¸æ‹˜æ³¥äºä½¿ç”¨è‡ªå·±ç†Ÿæ‚‰çš„æ•²ä»£ç æ–¹å¼ï¼Œè€Œå¹¶ä¸ä½¿ç”¨æ›´ä¸“ä¸šï¼Œæ›´é«˜æ•ˆï¼Œä½†å…·æœ‰å­¦ä¹ éš¾åº¦çš„é”®å…¥æ–¹å¼ã€‚å…¶å®æ‰ªå¿ƒè‡ªé—®ï¼Œè¿™äº›ç§ç§è¡¨ç°ï¼Œæ— ä¸€ä¸ä»£è¡¨æˆ‘ç¼ºä¹ä¸€ç§æ‰“ç ´ç°çŠ¶ï¼Œçªç ´è‡ªå·±çš„é¡½å¼ºç²¾ç¥ã€‚ æ‰€ä»¥è¿™ç¯‡æ—¥è®°å¼çš„è®°å½•ï¼Œå…¶ä¸€å¤§ç›®çš„å°±æ˜¯è±¡å¾é‡å¡‘è‡ªæˆ‘ç²¾ç¥çš„å¼€å§‹ã€‚</p><h2 id="å¦‚ä½•è¯»å¥½ä¸€æœ¬ä¹¦ï¼Œä¸€äº›ä»–äººè§è§£ï¼š"><a class="header-anchor" href="#å¦‚ä½•è¯»å¥½ä¸€æœ¬ä¹¦ï¼Œä¸€äº›ä»–äººè§è§£ï¼š">Â¶</a>å¦‚ä½•è¯»å¥½ä¸€æœ¬ä¹¦ï¼Œä¸€äº›ä»–äººè§è§£ï¼š</h2><p>é‡å›æ­£é¢˜ï¼Œå¦‚ä½•è¯»å¥½ä¸€æœ¬ä¹¦ï¼Œæˆ‘è§‰å¾—æœ€é‡è¦çš„å°±æ˜¯è®°å½•è‡ªå·±çš„å¿ƒå¾—è§è§£ï¼Œä»¥æ­¤å»ºç«‹è‡ªå·±ä¸ä½œè€…çš„è·¨æ—¶ç©ºäº¤æµï¼ˆå°½ç®¡è¿™ç§äº¤æµçœ‹ä¼¼å¹¶éæ˜¯åŒå‘çš„ï¼‰ã€‚ é‚£ä¹ˆå¦‚ä½•èƒ½å¤Ÿè®°ä½è‡ªå·±çœ‹è¿‡çš„ä¹¦ï¼Œç½‘ä¸Šæœç´¢äº†ç›¸å½“å¤šçš„èµ„æ–™ï¼Œæœ€åå‘ç°å…¶å®æ–¹æ³•æ˜¯ç±»ä¼¼çš„ï¼Œå¾ˆç±»ä¼¼äºæˆ‘ä»¬ä¸Šå°å­¦åˆä¸­æ—¶å¯¹ä¸€ç¯‡è¯¾æ–‡çš„é˜…è¯»æ–¹å¼ï¼ˆé¦–å…ˆé˜…è¯»æ ‡é¢˜ï¼Œé€Ÿè§ˆï¼Œåˆ—å¤§çº²ï¼Œå›ç­”ç›¸åº”è¯¾åé—®é¢˜ç­‰ï¼‰ã€‚æˆ‘åœ¨è¿™é‡Œè®°å½•ä¸€äº›æ–¹ä¾¿è‡ªå·±ä»¥åæ¥å›é¡¾ï¼š</p><ol><li><p>å¯¹ä¹¦ç±æœ‰ä¸€ä¸ªæ¦‚ç•¥çš„äº†è§£</p><ol><li>å¿«é€Ÿæµè§ˆä¹¦çš„å„ä¸ªéƒ¨åˆ†ï¼Œä¾‹å¦‚å°é¢ï¼Œä¹¦åé¡µï¼Œç›®å½•ï¼Œé™„å½•ã€‚æå‡ºè‡ªå·±çš„é¢„æƒ³ï¼ˆexpectationï¼‰</li><li>æ¸…æ¥šè‡ªå·±æ­£åœ¨é˜…è¯»çš„ä¹¦çš„åˆ†ç±»ï¼Œäº†è§£è¿™æœ¬ä¹¦åœ¨è°ˆä»€ä¹ˆã€‚</li></ol></li><li><p>åˆ†ææ€§çš„é˜…è¯»</p><ol><li>å–å†³äºä¹¦çš„ç±»å‹å’Œè‡ªå·±çš„å­¦ä¹ ç›®çš„ï¼Œåšå­¦ä¹ ç¬”è®° ï¼ˆå…³äºå¦‚ä½•åšç¬”è®°ï¼Œä¸‹é¢ä¼šç‰¹åˆ«è¯´æ˜ï¼‰</li><li>é¢å¯¹éš¾è¯»çš„ä¹¦æ—¶ï¼Œä¸è¦è¿½æ±‚ç»†èŠ‚ï¼Œè€Œå°½å¯èƒ½å¯¹å…¨å±€æœ‰æ‰€æŠŠæ¡ï¼Œ ä¾‹å¦‚åœ¨æ— å…³ç´§è¦æ—¶å¯ä»¥é€‰æ‹©å¿«é€Ÿæµè§ˆã€‚</li><li>æ¯å½“è¿›è¡Œå®Œä¸€ä¸ªå°èŠ‚çš„é˜…è¯»æ—¶ï¼Œé€šè¿‡ç¬”è®°æ•´ç†æ€ç»´ï¼Œç”¨ä¸€å¥è¯æ¦‚æ‹¬æœ¬å°ç»“çš„ä¸­å¿ƒæ€æƒ³ã€‚</li><li>é˜…è¯»å®Œä¸€æœ¬ä¹¦åï¼Œé€šè¿‡ç¬”è®°å¯¹æ•´æœ¬ä¹¦åˆ—å‡ºçº²è¦ï¼Œå¹¶ä¸”å°½å¯èƒ½ç”¨æ›´çŸ­çš„æ–‡å­—æ¥æç‚¼æ•´æœ¬ä¹¦çš„å†…å®¹åšä¸€ä¸ªæœ€åæ€»ç»“ã€‚</li></ol></li><li><p>é˜…å</p><ol><li><p>åˆ†æä½œè€…å†™è¿™æœ¬ä¹¦çš„ç›®çš„ï¼Œè‡ªæˆ‘å›ç­”ä¸€äº›ç¬”è®°ä¸­æ›¾ç»çš„é—®é¢˜ï¼Œæç‚¼ä¸­å¿ƒè¯ã€‚</p></li><li><p>æœ‰å¿…è¦å¯ä»¥å†™ä¸€ç¯‡ä¹¦è¯„å¹¶åˆ†äº«ç»™å¤§å®¶ã€‚</p></li></ol></li></ol><h2 id="é˜…è¯»ç¬”è®°æ€ä¹ˆåšï¼š"><a class="header-anchor" href="#é˜…è¯»ç¬”è®°æ€ä¹ˆåšï¼š">Â¶</a>é˜…è¯»ç¬”è®°æ€ä¹ˆåšï¼š</h2><p>è‡ªå°å­¦å¼€å§‹ï¼Œæˆ‘ä»¬éƒ½åœ¨å­¦ä¹ ä¸­é€šè¿‡ä¸æ–­åœ°è®°ç¬”è®°æ¥å¤¯å®è‡ªå·±çš„æ‰€å­¦ã€‚å½“æ¸æ¸è¿›å…¥éœ€è¦æ›´é«˜ä¸“æ³¨åŠ›å’Œé«˜å¤æ‚åº¦ï¼Œé«˜ä¸“ä¸šæ€§çš„å­¦ä¹ ä¸­ï¼Œç¬”è®°çš„é‡è¦æ€§æ›´åŠ å‡¸æ˜¾ã€‚ è®°ç¬”è®°æ˜¯ä¸€ç§å¼•å¯¼è‡ªæˆ‘æ€ç»´çš„æ–¹å¼ï¼Œå¦‚æœæˆ‘ä»¬ä¸åœåœ°é˜…è¯»ï¼Œå¸æ”¶çŸ¥è¯†ï¼Œæˆ‘ä»¬éš¾ä»¥å†…åŒ–è¿™äº›çŸ¥è¯†å¹¶ä¸”ç•™ä¸‹è®°å¿†ã€‚è€Œå› ä¸ºè®°ç¬”è®°æ˜¯ä¸€ç§ç›´è§‚çš„æ€ç»´è¾“å‡ºæ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦ç»„ç»‡æˆ‘ä»¬çš„é€»è¾‘æ‰èƒ½å¤ŸæŠŠå­¦ä¹ å†…å®¹è®°å½•ä¸‹æ¥ï¼Œåœ¨è¿™ä¸ªä»è¾“å…¥åˆ°è¾“å‡ºçš„è¿‡ç¨‹ä¸­ï¼Œæ½œç§»é»˜åŒ–åœ°æˆ‘ä»¬çš„å¤§è„‘èƒ½å¤Ÿæ›´ä¸“æ³¨åœ°å¯¹é—®é¢˜è¿›è¡Œæ€è€ƒã€‚åŒæ—¶ï¼Œå› ä¸ºæˆ‘ä¸ªäººçš„è®°å¿†å°šä½³ï¼Œè®°ç¬”è®°æ˜¯ä¸€ç§ç‰¹åˆ«æœ‰å¸®åŠ©çš„è®°å¿†æ–¹å¼ï¼Œç”¨è‹±æ–‡æ¥è¯´ï¼Œå°±æ˜¯ç‰¹åˆ«æ–¹ä¾¿è‡ªå·± <strong>recap</strong> ï¼ˆ<strong>æ‰¼è¦é‡è¿°</strong>ï¼‰</p><p>ç®€è€Œè¨€ä¹‹ï¼Œè®°ç¬”è®°ä¸æ˜¯ç›®çš„ï¼Œç›®çš„æ˜¯è¿›è¡Œé€»è¾‘åŒ–æ€è€ƒï¼Œå¼•å¯¼æ€ç»´ï¼Œå¼•å‘æ€è€ƒï¼Œå¹¶ä¸”ç•™ä¸‹è®°å½•ã€‚é‚£æˆ‘ä»¬åˆ°åº•éœ€è¦è®°å½•ä»€ä¹ˆï¼Ÿ</p><h3 id="æ€»ç»“ä¸€å¥—è‡ªå·±çš„è¯»ä¹¦ç¬”è®°æ¨¡æ¿"><a class="header-anchor" href="#æ€»ç»“ä¸€å¥—è‡ªå·±çš„è¯»ä¹¦ç¬”è®°æ¨¡æ¿">Â¶</a>æ€»ç»“ä¸€å¥—è‡ªå·±çš„è¯»ä¹¦ç¬”è®°æ¨¡æ¿</h3><p>å–å†³äºè¯»çš„ä¹¦çš„ç±»å‹å’Œç›®çš„ï¼Œè¯»ä¹¦ç¬”è®°æ¨¡æ¿å¯ä»¥éšä¹‹è€Œå˜åŒ–ã€‚ æˆ‘è¿™é‡Œä»‹ç»ä¸€å¥—è‡ªå·±çœ‹åˆ°çš„æ–¹æ¡ˆï¼š</p><figure class="highlight vala"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><pre><code class="hljs vala">ã€Šä¹¦åã€‹<br>ä½œè€…ï¼š<br><span class="hljs-meta"># ç¬¬ä¸€ç« ï¼š[ç« èŠ‚å…³é”®è¯] </span><br><span class="hljs-meta">## å…³é”®è¯ï¼š</span><br><br><span class="hljs-meta">## Bullet point (é‡ç‚¹)ï¼š</span><br><br><span class="hljs-meta">## æœ¬ç« å°èŠ‚ï¼š</span><br><br><span class="hljs-meta">## [æœ¬ç« å¤„äºå…¨ä¹¦çš„ä½œç”¨]</span><br><br><span class="hljs-meta"># ç¬¬äºŒç« ï¼š[ç« èŠ‚å…³é”®è¯] </span><br><span class="hljs-meta">## å…³é”®è¯ï¼š</span><br><br><span class="hljs-meta">## Bullet point (é‡ç‚¹)ï¼š</span><br><br><span class="hljs-meta">## æœ¬ç« å°èŠ‚ï¼š</span><br><br>............<br><span class="hljs-meta">## [æœ¬ç« å¤„äºå…¨ä¹¦çš„ä½œç”¨]</span><br><br><span class="hljs-meta"># å…¨æ–‡çº²è¦</span><br><br><span class="hljs-meta"># æœ€åæ€»ç»“</span><br></code></pre></td></tr></table></figure><p>æˆ‘æ¨èä½¿ç”¨ç”µå­åŒ–è®°å½•ï¼Œå› ä¸ºï¼š1.æ–¹ä¾¿æŸ¥é˜…å’Œå›é¡¾ 2. markdown æ ¼å¼éå¸¸æ–¹ä¾¿å’Œæ˜“ç”¨ï¼Œæ¨èä½¿ç”¨ è½¯ä»¶ Typoraã€‚</p><p>å†™æœ¬åœºå¤„äºå…¨ä¹¦ä½œç”¨çš„ç›®çš„æ˜¯åœ¨äºå¯¹æ•´æœ¬ä¹¦æœ‰ä¸€ä¸ªé€»è¾‘æ€§æœ‰ä¸€äº›è®¤è¯†ã€‚ ç¬”è®°çš„é•¿åº¦å¯é•¿å¯çŸ­ï¼Œå–å†³äºæŸç« èŠ‚äºä¹¦çš„é‡è¦æ€§ï¼Œéœ€è¦è¯¦å°½çš„åœ°æ–¹å°½é‡æ¸…æ¥šï¼Œä¸éœ€è¦çš„å¯ä»¥ç®€ç•¥ã€‚</p><h2 id="å°ç»“"><a class="header-anchor" href="#å°ç»“">Â¶</a>å°ç»“</h2><p>æˆ‘ç›¸ä¿¡éšç€æ›´é«˜æ•ˆçš„é˜…è¯»å¢å¤šï¼Œä¸ªäººçš„å†™ä½œåŠŸåº•ä¹Ÿä¼šé€æ¸ä¸Šå‡ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå†™ä½œä½œä¸ºä¸€ç§æ€ç»´è¾“å‡ºæ‰‹æ®µï¼Œå¯¹äºæå‡ç”Ÿæ´»å¹¸ç¦æ„Ÿæœ‰ç€å¥½å¤„ã€‚åœ¨è¿™ä¸ªä¸€åˆ‡éƒ½ç”µå­åŒ–çš„ä¸–ç•Œï¼Œæˆ‘ä»¬æ¯ä¸ªäººèƒ½ç•™ä¸‹çš„è¶³è¿¹å°‘ä¹‹åˆå°‘ã€‚è€Œä¸ç®¡åˆ›ä½œä¸€æœ¬å°è¯´ï¼Œæ’°å†™ä¸€ç¯‡æŠ€æœ¯åšå®¢ï¼Œäº¦æˆ–å†™ä¸‹ä¸€ç¯‡éšæƒ³ï¼Œéƒ½èƒ½è®©è‡ªå·±çš„æ€ç»´å¾—åˆ°è®°å½•ï¼Œè¿™ä¾¿æ˜¯å†™ä¸‹è¿™ä¸€åˆ‡çš„åˆå¿ƒã€‚å½“æˆ‘ä»¬å¸¦ç€ç›®çš„å»é˜…è¯»ï¼Œå¸¦ç€ç–‘é—®å»æ¢ç©¶ï¼Œå¸¦ç€æ€è€ƒå»å†™ä½œï¼Œåšè¿™äº›äº‹çš„æ—¶é—´ä¾¿ä¸ä¼šæµªè´¹ï¼Œå› ä¸ºè¿™äº›å¤§è„‘çš„è¿åŠ¨ä¸æå‡ç”Ÿæ´»çš„å“è´¨æ¯æ¯ç›¸å…³ï¼Œä»¥æ­¤è·å¾—æ›´å¤šçš„å¿ƒæµä½“éªŒï¼Œæ›´çº¯ç²¹çš„èº«å¿ƒè‡ªç”± ğŸ’Ÿã€‚</p><p>è®°å½•ä¸</p><p>2021/7/25</p><p>ä¸€ä¸ªç‚çƒ­çš„å¤æ—¥å¤œæ™š ğŸŒƒ</p><p>Lucheng</p>]]></content>
    
    
    <categories>
      
      <category>articles</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blogs</tag>
      
      <tag>thinking</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PreSum</title>
    <link href="/2021/06/03/PreSum/"/>
    <url>/2021/06/03/PreSum/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å¼€å§‹-Starting"><a class="header-anchor" href="#å¼€å§‹-Starting">Â¶</a>å¼€å§‹ Starting</h1><p>æœ‰å››é“å¾ˆç±»ä¼¼çš„ï¼Œ å…³äº preSum çš„é¢˜ç›®ï¼šä¸»è¦çŸ¥è¯†ç‚¹æ˜¯å“ˆå¸Œè¡¨å’Œå‰ç¼€å’Œï¼Œè°¨ä»¥æ­¤è®°å½•æƒ³æ³•</p><span id="more"></span><h1 id="é¢˜ç›®-Question"><a class="header-anchor" href="#é¢˜ç›®-Question">Â¶</a>é¢˜ç›® Question</h1><p><a href="https://leetcode-cn.com/problems/subarray-sum-equals-k/">https://leetcode-cn.com/problems/subarray-sum-equals-k/</a></p><p><a href="https://leetcode-cn.com/problems/subarray-sums-divisible-by-k/">https://leetcode-cn.com/problems/subarray-sums-divisible-by-k/</a></p><p><a href="https://leetcode-cn.com/problems/make-sum-divisible-by-p/">https://leetcode-cn.com/problems/make-sum-divisible-by-p/</a></p><p><a href="https://leetcode-cn.com/problems/contiguous-array/">https://leetcode-cn.com/problems/contiguous-array/</a></p><h1 id="æƒ³æ³•-Thinking"><a class="header-anchor" href="#æƒ³æ³•-Thinking">Â¶</a>æƒ³æ³• Thinking</h1><h1 id="ç®—æ³•-Algorithm"><a class="header-anchor" href="#ç®—æ³•-Algorithm">Â¶</a>ç®—æ³• Algorithm</h1><h1 id="è¿è¡Œæ—¶é—´-Run-time"><a class="header-anchor" href="#è¿è¡Œæ—¶é—´-Run-time">Â¶</a>è¿è¡Œæ—¶é—´ Run-time</h1><h1 id="åæ€-Introspection"><a class="header-anchor" href="#åæ€-Introspection">Â¶</a>åæ€ Introspection</h1>]]></content>
    
    
    <categories>
      
      <category>Algo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PreSum</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Tree-Serialization.md</title>
    <link href="/2021/05/30/Tree-Serialization-md/"/>
    <url>/2021/05/30/Tree-Serialization-md/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å¼€å§‹-Starting"><a class="header-anchor" href="#å¼€å§‹-Starting">Â¶</a>å¼€å§‹ Starting</h1><p>The Serialization of Tree</p><p><a href="https://leetcode-cn.com/problems/serialize-and-deserialize-binary-tree/">https://leetcode-cn.com/problems/serialize-and-deserialize-binary-tree/</a></p><span id="more"></span><h1 id="é¢˜ç›®-Question"><a class="header-anchor" href="#é¢˜ç›®-Question">Â¶</a>é¢˜ç›® Question</h1><p>Serialization is the process of converting a data structure or object into a sequence of bits so that it can be stored in a file or memory buffer, or transmitted across a network connection link to be reconstructed later in the same or another computer environment.</p><p>Design an algorithm to serialize and deserialize a binary tree. There is no restriction on how your serialization/deserialization algorithm should work. You just need to ensure that a binary tree can be serialized to a string and this string can be deserialized to the original tree structure.</p><p>Clarification: The input/output format is the same as how LeetCode serializes a binary tree. You do not necessarily need to follow this format, so please be creative and come up with different approaches yourself.</p><h1 id="æƒ³æ³•-Thinking"><a class="header-anchor" href="#æƒ³æ³•-Thinking">Â¶</a>æƒ³æ³• Thinking</h1><p>ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯DFS å’Œ BFS</p><h2 id="DFS"><a class="header-anchor" href="#DFS">Â¶</a>DFS</h2><p><strong>é€’å½’ä¸‰éƒ¨æ›²ï¼š</strong></p><ol><li><strong>æ‰¾æ•´ä¸ªé€’å½’çš„ç»ˆæ­¢æ¡ä»¶ï¼šé€’å½’åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™ç»“æŸï¼Ÿ</strong></li><li><strong>æ‰¾è¿”å›å€¼ï¼šåº”è¯¥ç»™ä¸Šä¸€çº§è¿”å›ä»€ä¹ˆä¿¡æ¯ï¼Ÿ</strong></li><li><strong>æœ¬çº§é€’å½’åº”è¯¥åšä»€ä¹ˆï¼šåœ¨è¿™ä¸€çº§é€’å½’ä¸­ï¼Œåº”è¯¥å®Œæˆä»€ä¹ˆä»»åŠ¡ï¼Ÿ</strong> å¹¶ä¸” call to the next level</li></ol><h3 id="Serialize"><a class="header-anchor" href="#Serialize">Â¶</a>Serialize</h3><p>DFS ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ PreOrder æ¥ éå† æ‰€æœ‰çš„ Nodeã€‚ é€’å½’çš„ç»ˆæ­¢æ¡ä»¶ä¸º å½“ <code>root</code>ä¸å­˜åœ¨æ—¶å€™ï¼Œreturn <code>&quot;#_&quot;</code> å¦‚æœNode å­˜åœ¨ï¼Œ æˆ‘ä»¬åˆ™æå–å½“å‰ Node çš„å€¼å¹¶ä¸”åŠ ä¸Š<code>_</code>ï¼Œç„¶å è°ƒç”¨ä¸‹ä¸€å±‚ï¼Œæœ€åè¿”å›å½“å‰å·²ç»ç”Ÿæˆäº†çš„å­—ç¬¦ä¸²</p><h3 id="Deserialize"><a class="header-anchor" href="#Deserialize">Â¶</a>Deserialize</h3><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª queue æ–¹ä¾¿éå† æ‰€æœ‰çš„Nodeï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><pre><code class="hljs kotlin">queue = collections.deque()<br><span class="hljs-keyword">data</span> = <span class="hljs-keyword">data</span>.split(<span class="hljs-string">&quot;_&quot;</span>)<br><span class="hljs-keyword">data</span> = <span class="hljs-keyword">data</span>[:-<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-keyword">data</span>:<br>queue.append(i)<br></code></pre></td></tr></table></figure><p>ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ç”¨ PreOrder æ¥ åˆ›å»ºæ ‘ï¼š</p><p>å¦‚æœå½“å‰ å€¼æ˜¯<code>&quot;#&quot;</code>åˆ™ return None, å¦‚æœä¸æ˜¯åˆ™åˆ›å»ºç›¸åº”çš„Node å¹¶ä¸”call å‡½æ•°è‡ªå·±ã€‚ å¹¶å½“å‰ä¸€å±‚ return å·²ç»åˆ›å»ºå¥½äº†çš„partial tree</p><h2 id="BFS"><a class="header-anchor" href="#BFS">Â¶</a>BFS</h2><h3 id="Serialize-v2"><a class="header-anchor" href="#Serialize-v2">Â¶</a>Serialize</h3><p>å¯¹äºå®Œå…¨äºŒå‰æ ‘ï¼Œå¯ä»¥ä½¿ç”¨BFS æŠŠæ‰€æœ‰ Node ç»™åºåˆ—åŒ–ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">serialize</span>(<span class="hljs-params">root</span>):</span><br>    ans = <span class="hljs-string">&quot;&quot;</span><br>    queue = collections.deque()<br>    queue.append(root)<br>    <span class="hljs-keyword">while</span> queue:<br>        cur = queue.popleft()<br>        <span class="hljs-keyword">if</span> cur <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            ans += <span class="hljs-string">&quot;#_&quot;</span><br>        <span class="hljs-keyword">else</span>:<br>            ans += <span class="hljs-built_in">str</span>(cur.val) + <span class="hljs-string">&quot;_&quot;</span><br>        queue.append(cur.left)<br>        queue.append(cur.right)<br>    <span class="hljs-keyword">return</span> ans[:-<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><p>ä¸heapå®Œå…¨äºŒå‰æ ‘ çš„åŸç†ç±»ä¼¼ï¼Œæˆ‘ä»¬çŸ¥é“ï¼šï¼ˆèµ·å§‹äºç¼–å·1ï¼‰</p><blockquote><p>å·²çŸ¥ä¸€ä¸ªèŠ‚ç‚¹çš„ç¼–å·æ˜¯ iï¼Œé‚£ä¹ˆå…¶å·¦å­èŠ‚ç‚¹å°±æ˜¯ 2 * iï¼Œå³å­èŠ‚ç‚¹å°±æ˜¯ 2 * i + 1ï¼Œçˆ¶èŠ‚ç‚¹å°±æ˜¯ i / 2ã€‚</p></blockquote><p>ä½†æ˜¯æ ‘ä¸ä¸€å®šæ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦è§£å†³è¿™ç§é—®é¢˜ï¼š</p><p><img src="https://tva1.sinaimg.cn/large/0081Kckwly1gkqcfujvv4j315s0u078j.jpg" alt="img"></p><p>ä½†æ˜¯æ³¨æ„ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ä»¥ä¸‹ä»£ç ä½¿ç”¨çš„æ˜¯ i æ¥åš incrementï¼Œ æ‰€ä»¥å®ƒå¿…å®šä¼šéå†æ‰€æœ‰nodeï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†queue æ¥å­˜å·²ç»ç”Ÿæˆäº†çš„Nodeï¼Œ è§‚å¯Ÿå›¾ï¼Œå‘ç°çˆ¶å­å¯¹åº”å…³ç³»æ˜¯æ­£ç¡®çš„ã€‚</p><h3 id="Deserialize-v2"><a class="header-anchor" href="#Deserialize-v2">Â¶</a>Deserialize:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deserialze</span>(<span class="hljs-params">self, data</span>):</span><br>    <span class="hljs-keyword">if</span> data == <span class="hljs-string">&quot;#&quot;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    nodes = data.split(<span class="hljs-string">&quot;_&quot;</span>)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> nodes:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    root = TreeNode(<span class="hljs-built_in">int</span>(nodes[<span class="hljs-number">0</span>]))<br>    q = collections.deque()<br>    q.append(root)<br>    <br>    i = <span class="hljs-number">1</span><br>    <br>    <span class="hljs-keyword">while</span> i &lt; <span class="hljs-built_in">len</span>(nodes) -<span class="hljs-number">1</span> :<br>        cur = q.popleft()<br>        left = nodes[i]<br>        right = nodes[i+<span class="hljs-number">1</span>]<br>        i += <span class="hljs-number">2</span><br>        <span class="hljs-keyword">if</span> left != <span class="hljs-string">&quot;#&quot;</span>:<br>            l = TreeNode(<span class="hljs-built_in">int</span>(left))<br>            cur.left = l<br>            queue.append(l)<br>        <span class="hljs-keyword">if</span> right != <span class="hljs-string">&quot;#&quot;</span>:<br>            r = TreeNode(<span class="hljs-built_in">int</span>(left))<br>            cur.right = r<br>            queue.append(r)<br>     <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></table></figure><h1 id="ç®—æ³•-Algorithm"><a class="header-anchor" href="#ç®—æ³•-Algorithm">Â¶</a>ç®—æ³• Algorithm</h1><h2 id="DFS-v2"><a class="header-anchor" href="#DFS-v2">Â¶</a>DFS</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode(object):</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Codec</span>:</span><br> <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">serialize</span>(<span class="hljs-params">self, root</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;Encodes a tree to a single string.</span><br><span class="hljs-string">        </span><br><span class="hljs-string">        :type root: TreeNode</span><br><span class="hljs-string">        :rtype: str</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> self.serializeHelper(root)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">serializeHelper</span>(<span class="hljs-params">self, root</span>):</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;#_&quot;</span><br>        res = <span class="hljs-built_in">str</span>(root.val) + <span class="hljs-string">&quot;_&quot;</span><br>        res += self.serialize(root.left)<br>        res += self.serialize(root.right)<br>        <span class="hljs-keyword">return</span> res<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deserialize</span>(<span class="hljs-params">self, data</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;Decodes your encoded data to tree.</span><br><span class="hljs-string">        </span><br><span class="hljs-string">        :type data: str</span><br><span class="hljs-string">        :rtype: TreeNode</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        queue = collections.deque()<br>        data = data.split(<span class="hljs-string">&quot;_&quot;</span>)<br>        data = data[:-<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> data:<br>            queue.append(i)<br>        <span class="hljs-keyword">return</span> self.deserializeHelper(queue)<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deserializeHelper</span>(<span class="hljs-params">self, queue</span>):</span><br>        cur = queue.popleft()<br>        <span class="hljs-keyword">if</span> cur == <span class="hljs-string">&quot;#&quot;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        root = TreeNode(<span class="hljs-built_in">int</span>(cur))<br>        root.left = self.deserializeHelper(queue)<br>        root.right = self.deserializeHelper(queue)<br>        <span class="hljs-keyword">return</span> root<br>            <br><br><span class="hljs-comment"># Your Codec object will be instantiated and called as such:</span><br><span class="hljs-comment"># ser = Codec()</span><br><span class="hljs-comment"># deser = Codec()</span><br><span class="hljs-comment"># ans = deser.deserialize(ser.serialize(root))</span><br></code></pre></td></tr></table></figure><h1 id="BFS-v2"><a class="header-anchor" href="#BFS-v2">Â¶</a>BFS</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode(object):</span><br><span class="hljs-comment">#     def __init__(self, x):</span><br><span class="hljs-comment">#         self.val = x</span><br><span class="hljs-comment">#         self.left = None</span><br><span class="hljs-comment">#         self.right = None</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Codec</span>:</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">serialize</span>(<span class="hljs-params">self, root</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;Encodes a tree to a single string.</span><br><span class="hljs-string">        </span><br><span class="hljs-string">        :type root: TreeNode</span><br><span class="hljs-string">        :rtype: str</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        queue = collections.deque()<br>        queue.append(root)<br>        ans = <span class="hljs-string">&quot;&quot;</span><br>        <span class="hljs-keyword">while</span> queue:<br>            cur = queue.popleft()<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> cur:<br>                ans += <span class="hljs-string">&quot;#_&quot;</span><br>            <span class="hljs-keyword">else</span>:<br>                ans += <span class="hljs-built_in">str</span>(cur.val) + <span class="hljs-string">&quot;_&quot;</span><br>                queue.append(cur.left)<br>                queue.append(cur.right)     <br><br>        <span class="hljs-keyword">return</span> ans[:-<span class="hljs-number">1</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deserialize</span>(<span class="hljs-params">self, data</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;Decodes your encoded data to tree.</span><br><span class="hljs-string">        </span><br><span class="hljs-string">        :type data: str</span><br><span class="hljs-string">        :rtype: TreeNode</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> data == <span class="hljs-string">&quot;#&quot;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        data = data.split(<span class="hljs-string">&quot;_&quot;</span>)<br>        root = TreeNode(<span class="hljs-built_in">int</span>(data[<span class="hljs-number">0</span>]))<br><br>        queue = collections.deque()<br>        queue.append(root)<br>        <span class="hljs-comment"># root has been added </span><br>        i = <span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">while</span> queue:<br>            cur = queue.popleft()<br>            lv = data[i]<br>            rv = data[i+<span class="hljs-number">1</span>]<br>            i+= <span class="hljs-number">2</span><br>            <span class="hljs-keyword">if</span> lv != <span class="hljs-string">&quot;#&quot;</span>:<br>                l = TreeNode(<span class="hljs-built_in">int</span>(lv))<br>                cur.left = l<br>                queue.append(l)<br>            <span class="hljs-keyword">if</span> rv != <span class="hljs-string">&quot;#&quot;</span>:<br>                r = TreeNode(<span class="hljs-built_in">int</span>(rv))<br>                cur.right = r<br>                queue.append(r)<br>        <span class="hljs-keyword">return</span> root<br><br><span class="hljs-comment"># Your Codec object will be instantiated and called as such:</span><br><span class="hljs-comment"># ser = Codec()</span><br><span class="hljs-comment"># deser = Codec()</span><br><span class="hljs-comment"># ans = deser.deserialize(ser.serialize(root))</span><br></code></pre></td></tr></table></figure><h2 id=""><a class="header-anchor" href="#">Â¶</a></h2><h1 id="è¿è¡Œæ—¶é—´-Run-time"><a class="header-anchor" href="#è¿è¡Œæ—¶é—´-Run-time">Â¶</a>è¿è¡Œæ—¶é—´ Run-time</h1><h1 id="åæ€-Introspection"><a class="header-anchor" href="#åæ€-Introspection">Â¶</a>åæ€ Introspection</h1>]]></content>
    
    
    <categories>
      
      <category>Algo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Tree</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>quick_sort/Netherland Flag</title>
    <link href="/2021/05/15/quick-sort/"/>
    <url>/2021/05/15/quick-sort/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å¼€å§‹-Starting"><a class="header-anchor" href="#å¼€å§‹-Starting">Â¶</a>å¼€å§‹ Starting</h1><p>Quick Sort Memory Sheet</p><span id="more"></span><h1 id="é¢˜ç›®-Question"><a class="header-anchor" href="#é¢˜ç›®-Question">Â¶</a>é¢˜ç›® Question</h1><p><a href="https://leetcode-cn.com/problems/sort-colors/">https://leetcode-cn.com/problems/sort-colors/</a> è·å…°å›½æ——</p><h1 id="æƒ³æ³•-Thinking"><a class="header-anchor" href="#æƒ³æ³•-Thinking">Â¶</a>æƒ³æ³• Thinking</h1><h1 id="ç®—æ³•-Algorithm"><a class="header-anchor" href="#ç®—æ³•-Algorithm">Â¶</a>ç®—æ³• Algorithm</h1><h2 id="One-Pointerï¼šDivide-into-two"><a class="header-anchor" href="#One-Pointerï¼šDivide-into-two">Â¶</a>One Pointerï¼šDivide into two</h2><p>åˆå§‹åŒ–å°äºç­‰äºåŒºï¼ˆä¸‹ç§° åŒºï¼‰ ç­‰äº <code>-1</code> ï¼Œ éå†æ•°ç»„ï¼š</p><ol><li>å¦‚æœå½“å‰æ•°å­—&lt;= åŒºåˆ†å€¼ï¼š<strong>å½“å‰æ•°</strong>å’Œ<strong>åŒºä¸‹ä¸€ä¸ª</strong>åšäº¤æ¢ï¼ŒåŒºå³æ‰©ä¸€ä¸ªä½ç½®ï¼Œå½“å‰æ•°è·³ä¸‹ä¸€ä¸ª</li><li>å¦‚æœå½“å‰æ•°å­—&gt; åŒºåˆ†å€¼ï¼ŒåŒºä¸æ‰©ï¼Œå½“å‰æ•°è·³ä¸‹ä¸€ä¸ª</li></ol><h2 id="Netherland-Flag"><a class="header-anchor" href="#Netherland-Flag">Â¶</a>Netherland Flag</h2><p>åˆå§‹åŒ–å°äºåŒºç­‰äº<code>-1</code>å’Œå¤§äºåŒº<code>len(array)</code>ï¼Œéå†æ•°ç»„ï¼š</p><ol><li><p>å½“å‰æ•°&lt; åŒºåˆ†å€¼ï¼š</p><p>å½“å‰æ•°å’Œ<strong>å°åŒºä¸‹ä¸€ä¸ª</strong>äº¤æ¢ï¼Œå°åŒºå³æ‰©ï¼Œå½“å‰æ•°è·³ä¸‹ä¸€ä¸ª</p></li><li><p>å½“å‰æ•°== åŒºåˆ†å€¼</p><p>å½“å‰æ•°è·³ä¸‹ä¸€ä¸ª</p></li><li><p>å½“å‰æ•°&gt; åŒºåˆ†å€¼</p><p>å½“å‰æ•°å’Œ<strong>å¤§åŒºå‰ä¸€ä¸ª</strong>äº¤æ¢ï¼Œå¤§åŒºå·¦æ‰©ï¼Œå½“å‰æ•°ï¼Œ<strong>å½“å‰æ•°ä¸åŠ¨</strong>ï¼ˆå› ä¸ºå½“å‰æ•°è¿˜æ²¡æœ‰è¢«partitionï¼‰</p></li></ol><p>ä¸‰ä¸ªåŒºåŸŸéƒ½æ˜¯ä¸ºé—­åŒºé—´ï¼šç­‰äºåŒºå¯ä»¥è¡¨ç¤ºä¸º <code>[less+1, more-1]</code>ï¼Œå¦‚æœ <code>less+1 &gt; more-1</code> å³è¡¨æ˜æ²¡æœ‰ç­‰äºåŒº</p><h2 id="Quick-Sort"><a class="header-anchor" href="#Quick-Sort">Â¶</a>Quick Sort</h2><h1 id="è¿è¡Œæ—¶é—´-Run-time"><a class="header-anchor" href="#è¿è¡Œæ—¶é—´-Run-time">Â¶</a>è¿è¡Œæ—¶é—´ Run-time</h1><h1 id="åæ€-Introspection"><a class="header-anchor" href="#åæ€-Introspection">Â¶</a>åæ€ Introspection</h1>]]></content>
    
    
    <categories>
      
      <category>Algo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>KMP</title>
    <link href="/2021/05/10/KMP/"/>
    <url>/2021/05/10/KMP/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å¼€å§‹-Starting"><a class="header-anchor" href="#å¼€å§‹-Starting">Â¶</a>å¼€å§‹ Starting</h1><p>æ­¤ç¯‡æ–‡å­—è°¨ä»¥è®°å½•å…³äºKMPç®—æ³•ï¼Œå¿…é¡»å†™ç‚¹ä»€ä¹ˆå·©å›ºè‡ªå·±çš„å°è±¡</p><p>é¢˜ç›®ï¼š<a href="https://leetcode-cn.com/problems/implement-strstr/">https://leetcode-cn.com/problems/implement-strstr/</a></p><span id="more"></span><h1 id="é¢˜ç›®-Question"><a class="header-anchor" href="#é¢˜ç›®-Question">Â¶</a>é¢˜ç›® Question</h1><p>Implement strStr().</p><p>Return the index of the first occurrence of needle in haystack, or -1 if needle is not part of haystack.</p><h1 id="æƒ³æ³•-Thinking"><a class="header-anchor" href="#æƒ³æ³•-Thinking">Â¶</a>æƒ³æ³• Thinking</h1><p>ä¸€å¼€å§‹æƒ³ç”¨Brutal-forceï¼Œ ç„¶ä¸çŸ¥ä¸ºä½•pythonå†™çš„brutal force ç«Ÿç„¶è¶…æ—¶äº†ã€‚ã€‚ã€‚çœ‹é¢˜è§£å‘ç°æœ‰ä¸€ä¸ªé“­æ–‡KMP çš„ç®—æ³•ï¼Œé‚å†æœç´¢ä¸€ç•ªï¼Œå¥½å¥½å­¦ä¹ äº†ä¸€ä¸‹</p><h1 id="ç®—æ³•-Algorithm"><a class="header-anchor" href="#ç®—æ³•-Algorithm">Â¶</a>ç®—æ³• Algorithm</h1><p>é¦–å…ˆæš´åŠ›ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">strStr</span>(<span class="hljs-params">self, haystack: <span class="hljs-built_in">str</span>, needle: <span class="hljs-built_in">str</span></span>) -&gt; int:</span><br>        i = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">if</span> needle == <span class="hljs-string">&#x27;&#x27;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> i &lt; <span class="hljs-built_in">len</span>(haystack):<br>            <span class="hljs-keyword">if</span> haystack[i:i+<span class="hljs-built_in">len</span>(needle)] == needle:<br>                <span class="hljs-keyword">return</span> i<br>            <span class="hljs-keyword">else</span>:<br>                i+=<span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œå¼ºçƒˆæ¨èæœ¬è§†é¢‘https://www.youtube.com/watch?v=dgPabAsTFa8</p><p>é…åˆè¿™ç¯‡å›ç­”ï¼Œ<a href="https://www.zhihu.com/question/21923021%EF%BC%8C%E5%AF%B9KMP%E4%BC%9A%E6%9C%89%E5%BE%88%E5%A5%BD%E7%9A%84%E7%90%86%E8%A7%A3">https://www.zhihu.com/question/21923021ï¼Œå¯¹KMPä¼šæœ‰å¾ˆå¥½çš„ç†è§£</a></p><p>KMPç®—æ³•ä¸»è¦åŒ…å«ä¸¤ä¸ªä¸»ä½“ï¼š</p><ol><li>ç”±Partial Match Table åŠ ä»¥æ›´æ”¹å¾—åˆ°çš„Next table (prefix table)</li><li>è°ƒç”¨Next table çš„KMP ç®—æ³•</li></ol><h2 id="Next-table"><a class="header-anchor" href="#Next-table">Â¶</a>Next table</h2><h3 id="å‰åç¼€"><a class="header-anchor" href="#å‰åç¼€">Â¶</a>å‰åç¼€</h3><p>ä¸¾ä¸ªğŸŒ°å­ï¼š</p><p>â€Harryâ€çš„å‰ç¼€åŒ…æ‹¬{â€Hâ€, â€Haâ€, â€Harâ€, â€Harrâ€}</p><p>â€Potterâ€çš„åç¼€åŒ…æ‹¬{â€otterâ€, â€tterâ€, â€terâ€, â€erâ€, â€râ€}</p><p>Note: å­—ç¬¦ä¸²æœ¬èº«å¹¶ä¸æ˜¯è‡ªå·±çš„å‰åç¼€ã€‚</p><h3 id="PMT"><a class="header-anchor" href="#PMT">Â¶</a>PMT</h3><p><strong>Partial Match Table (PMT) ä¸­çš„å€¼æ˜¯å­—ç¬¦ä¸²çš„å‰ç¼€é›†åˆä¸åç¼€é›†åˆçš„äº¤é›†ä¸­æœ€é•¿å…ƒç´ çš„é•¿åº¦</strong>.</p><blockquote><p>ä¾‹å¦‚ï¼Œå¯¹äºâ€abaâ€ï¼Œå®ƒçš„å‰ç¼€é›†åˆä¸º{â€aâ€, â€abâ€}ï¼Œåç¼€ é›†åˆä¸º{â€baâ€, â€aâ€}ã€‚ä¸¤ä¸ªé›†åˆçš„äº¤é›†ä¸º{â€aâ€}ï¼Œé‚£ä¹ˆé•¿åº¦æœ€é•¿çš„å…ƒç´ å°±æ˜¯å­—ç¬¦ä¸²â€aâ€äº†ï¼Œé•¿ åº¦ä¸º1ï¼Œæ‰€ä»¥å¯¹äºâ€abaâ€è€Œè¨€ï¼Œå®ƒåœ¨PMTè¡¨ä¸­å¯¹åº”çš„å€¼å°±æ˜¯1ã€‚å†æ¯”å¦‚ï¼Œå¯¹äºå­—ç¬¦ä¸²â€ababaâ€ï¼Œå®ƒçš„å‰ç¼€é›†åˆä¸º{â€aâ€, â€abâ€, â€abaâ€, â€ababâ€}ï¼Œå®ƒçš„åç¼€é›†åˆä¸º{â€babaâ€, â€abaâ€, â€baâ€, â€aâ€}ï¼Œ ä¸¤ä¸ªé›†åˆçš„äº¤é›†ä¸º{â€aâ€, â€abaâ€}ï¼Œå…¶ä¸­æœ€é•¿çš„å…ƒç´ ä¸ºâ€abaâ€ï¼Œé•¿åº¦ä¸º3ã€‚</p></blockquote><blockquote><p>å¦‚å›¾ 1.12 æ‰€ç¤ºï¼Œè¦åœ¨ä¸»å­—ç¬¦ä¸²&quot;ababababca&quot;ä¸­æŸ¥æ‰¾æ¨¡å¼å­—ç¬¦ä¸²&quot;abababca&quot;ã€‚å¦‚æœåœ¨ len å¤„å­—ç¬¦ä¸åŒ¹é…ï¼Œé‚£ä¹ˆç”±äºå‰è¾¹æ‰€è¯´çš„æ¨¡å¼å­—ç¬¦ä¸² PMT çš„æ€§è´¨ï¼Œä¸»å­—ç¬¦ä¸²ä¸­ i æŒ‡é’ˆä¹‹å‰çš„ PMT[len âˆ’1] ä½å°±ä¸€å®šä¸æ¨¡å¼å­—ç¬¦ä¸²çš„ç¬¬ 0 ä½è‡³ç¬¬ PMT[lenâˆ’1] ä½æ˜¯ç›¸åŒçš„ã€‚è¿™æ˜¯å› ä¸ºä¸»å­—ç¬¦ä¸²åœ¨ i ä½å¤±é…ï¼Œä¹Ÿå°±æ„å‘³ç€ä¸»å­—ç¬¦ä¸²ä» iâˆ’len åˆ° i è¿™ä¸€æ®µæ˜¯ä¸æ¨¡å¼å­—ç¬¦ä¸²çš„ 0 åˆ° len è¿™ä¸€æ®µæ˜¯å®Œå…¨ç›¸åŒçš„ã€‚è€Œæˆ‘ä»¬ä¸Šé¢ä¹Ÿè§£é‡Šäº†ï¼Œæ¨¡å¼å­—ç¬¦ä¸²ä» 0 åˆ° lenâˆ’1 ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­å°±æ˜¯â€abababâ€ï¼Œå…¶å‰ç¼€é›†åˆä¸åç¼€é›†åˆçš„äº¤é›†çš„æœ€é•¿å…ƒç´ ä¸ºâ€ababâ€ï¼Œ é•¿åº¦ä¸º4ã€‚æ‰€ä»¥å°±å¯ä»¥æ–­è¨€ï¼Œä¸»å­—ç¬¦ä¸²ä¸­iæŒ‡é’ˆä¹‹å‰çš„ 4 ä½ä¸€å®šä¸æ¨¡å¼å­—ç¬¦ä¸²çš„ç¬¬0ä½è‡³ç¬¬ 4 ä½æ˜¯ç›¸åŒçš„ï¼Œå³é•¿åº¦ä¸º 4 çš„åç¼€ä¸å‰ç¼€ç›¸åŒã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†è¿™äº›å­—ç¬¦æ®µçš„æ¯”è¾ƒçœç•¥æ‰ã€‚å…·ä½“çš„åšæ³•æ˜¯ï¼Œä¿æŒiæŒ‡é’ˆä¸åŠ¨ï¼Œç„¶åå°†lenæŒ‡é’ˆæŒ‡å‘æ¨¡å¼å­—ç¬¦ä¸²çš„PMT[len âˆ’1]ä½å³å¯ã€‚</p></blockquote><p>ç®€è€Œè¨€ä¹‹ï¼Œé¦–å…ˆè¿›è¡Œæ™®é€šåŒ¹é…ï¼Œå‘ç°åœ¨iï¼Œjå¤„å¤±é…ï¼Œå› ä¸ºPMT çš„æ€§è´¨ï¼Œæˆ‘ä»¬çŸ¥é“æ¨¡å¼å­—ç¬¦ä¸²å‰6ä½çš„æœ€é•¿å‰åç¼€äº¤é›†é•¿åº¦ä¸º4ï¼Œå› ä¸ºæ¨¡å¼å­—ç¬¦ä¸²å‰j-1ä½éƒ½æ˜¯åŒ¹é…çš„ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ä¸»å­—ç¬¦ä¸²çš„åç¼€èƒ½å¤Ÿå’Œæ¨¡å¼å­—ç¬¦ä¸²çš„å‰ç¼€åŒ¹é…ä¸Šã€‚ é‚£ä¹ˆè‡ªç„¶è€Œç„¶çš„ï¼Œå›¾(a) çš„ç°è‰²éƒ¨åˆ†å°±ä¸éœ€è¦åŒ¹é…äº†ã€‚ç›¸å½“äº</p><p><strong>å›¾ç‰‡åœ¨å›ç­”ä¸­æŸ¥çœ‹</strong></p><h3 id="Next-Table"><a class="header-anchor" href="#Next-Table">Â¶</a>Next Table</h3><p>next table å°±æ˜¯æŠŠpmt ç»™å³ç§»äº†ï¼Œå¹¶ä¸”åœ¨ç¬¬0ä¸ªä½ç½®å˜æˆäº† -1</p><p><strong>å›¾ç‰‡åœ¨å›ç­”ä¸­æŸ¥çœ‹</strong></p><h3 id="å¦‚ä½•åˆ›å»º-next-table"><a class="header-anchor" href="#å¦‚ä½•åˆ›å»º-next-table">Â¶</a>å¦‚ä½•åˆ›å»º next table</h3><p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥å‘ç°ä¸€ä¸ªè§„å¾‹ï¼šå¦‚æœåˆ—ä¸¾å‡ºæ‰€æœ‰æ¨¡å¼å­—ç¬¦ä¸²çš„substring:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># Given: P= ABABCABA</span><br><span class="hljs-comment"># All possible substrings in a list :</span><br><span class="hljs-attribute">A</span>              #  substrings[<span class="hljs-number">0</span>]     next table: <span class="hljs-number">0</span><br><span class="hljs-attribute">AB</span>   #  substrings[<span class="hljs-number">1</span>]     next table: <span class="hljs-number">0</span><br><span class="hljs-attribute">ABA</span>            #  substrings[<span class="hljs-number">2</span>]     next table: <span class="hljs-number">1</span><br><span class="hljs-attribute">ABAB</span>           #  substrings[<span class="hljs-number">3</span>]     next table: <span class="hljs-number">2</span><br><span class="hljs-attribute">ABABC</span>          #  substrings[<span class="hljs-number">4</span>]     next table: <span class="hljs-number">0</span><br><span class="hljs-attribute">ABABCA</span>         #  substrings[<span class="hljs-number">5</span>]     next table: <span class="hljs-number">1</span><br><span class="hljs-attribute">ABABCAB</span>        #  substrings[<span class="hljs-number">6</span>]     next table: <span class="hljs-number">2</span><br><span class="hljs-attribute">ABABCABA</span>       #  substrings[<span class="hljs-number">7</span>]     next table: <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>å¦‚æœå·²çŸ¥æŸä¸€ä¸ªsubstrings[i] çš„pmt å€¼ï¼Œæƒ³å¾—åˆ° substrings[ i+1 ]çš„pmt å€¼ï¼Œæˆ‘ä»¬å‘ç°å¦‚æœsubstrings[i+1] çš„æœ€åä¸€ä½å¦‚æœç­‰äº åœ¨substrings[i] çš„pmtå€¼ æ‰€å¯¹åº”çš„é‚£ä¸€ä½ï¼ˆæŠŠè¿™ä¸ªpmtå½“æˆindexï¼‰ï¼Œé‚£ä¹ˆ substrings[ i+1 ]çš„pmt å€¼ ç­‰äºsubstrings[i] çš„pmtå€¼+1ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºæŸä¸ªnext table ä¸­çš„å€¼ï¼ˆç§°ä¸º nextï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºåŒ…å«å½“å‰å­—æ¯çš„substring çš„æœ€é•¿å…¬å…±å‰åç¼€çš„å¤§å°ï¼Œä¹Ÿå¯ä»¥è¡¨æ˜å½“å‰substring çš„ç¬¬next-1 ä½å­—æ¯å’Œä¸ºæœ€é•¿å…¬å…±å‰åç¼€çš„æœ€åä¸€ä¸ªå­—æ¯</p><p>æ —å­å°±æ˜¯ä¸Šé¢ABABCA çš„pmt æ˜¯1ï¼Œå¦‚æœB ==  P[ABABCABçš„pmt] å¯ä»¥å¾—åˆ°ABABCABçš„pmt+1ã€‚</p><p>å¦‚æœä¸ç›¸ç­‰ï¼Œæˆ‘ä»¬åˆ™å›æº¯åˆ°len=next[len-1]ã€‚æˆ‘ä»¬å¹¶éæ˜¯åœ¨æ–œç€å¯¹ï¼Œ<strong>ç›®çš„æ˜¯æ‰¾åˆ°ä¹‹å‰æœ€é•¿prefixé‡Œé¢çš„æœ€é•¿prefixæ˜¯å¤šå°‘ï¼Œä»è€Œåˆ¤æ–­æœ€ååŠ è¿›æ¥çš„é‚£ä¸ªå­—ç¬¦å¯èƒ½ç»„æˆä¸ºå¤šé•¿çš„æ–°çš„prefix</strong>ã€‚ä¾‹å¦‚ p = aaabaaaaè¿™ä¸ªä¾‹å­ï¼Œå½“å€’æ•°ç¬¬ä¸€ä¸ªa ï¼Œi=7ï¼Œ len=3ï¼Œ é¦–å…ˆaä¸ç­‰äºbï¼Œ æ‰€ä»¥æˆ‘ä»¬æ’é™¤bï¼Œè€ƒè™‘ len= next[2] = 2 ã€‚è®°ä½ï¼Œnextè¡¨ç¤ºçš„æ˜¯æœ€å¤§å‰åç¼€ï¼Œ å³aaä¸ºæœ€å¤§å‰åç¼€ï¼Œæ­¤æ—¶p[i] == p[2] ï¼Œå³next[i]  = len+1!</p><p>è¿™ç§åˆ›å»ºæ–¹æ³•å¯ä»¥å‚è€ƒä¸Šé¢è´´çš„æ²¹ç®¡é“¾æ¥ã€‚</p><p>æ ¹æ®åŸç†æˆ‘ä»¬å¯ä»¥å¾—åˆ°next:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getNext</span>(<span class="hljs-params">pattern: <span class="hljs-built_in">str</span></span>) -&gt; List[int]:</span><br>            <span class="hljs-built_in">next</span> = [<span class="hljs-literal">None</span>] * <span class="hljs-built_in">len</span>(pattern)<br>            <span class="hljs-built_in">next</span>[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>            i = <span class="hljs-number">1</span> <span class="hljs-comment"># start from next[1]</span><br>            <span class="hljs-built_in">len</span> = <span class="hljs-number">0</span><br>            <span class="hljs-keyword">while</span> i &lt; <span class="hljs-built_in">len</span>(pattern):<br>                <span class="hljs-keyword">if</span> pattern[i] == pattern[<span class="hljs-built_in">len</span>]: <span class="hljs-comment">#next[1] = 0 </span><br>                    <span class="hljs-built_in">len</span>+=<span class="hljs-number">1</span><br>                    <span class="hljs-built_in">next</span>[i] = <span class="hljs-built_in">len</span><br>                    i+=<span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>&gt;<span class="hljs-number">0</span>:<br>                        <span class="hljs-built_in">len</span> = <span class="hljs-built_in">next</span>[<span class="hljs-built_in">len</span>-<span class="hljs-number">1</span>] <span class="hljs-comment">#å›æº¯åˆ°ä¸Šä¸€ä¸ª</span><br>                    <span class="hljs-keyword">else</span>:<br>                        <span class="hljs-built_in">next</span>[i] = <span class="hljs-built_in">len</span> <span class="hljs-comment"># =0</span><br>                        i+=<span class="hljs-number">1</span><br>            <span class="hljs-comment"># Right shift 1 </span><br>            i = <span class="hljs-built_in">len</span>(<span class="hljs-built_in">next</span>)-<span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> i &gt; <span class="hljs-number">0</span>:<br>                <span class="hljs-built_in">next</span>[i] = <span class="hljs-built_in">next</span>[i-<span class="hljs-number">1</span>]<br>                i-=<span class="hljs-number">1</span><br>            <span class="hljs-built_in">next</span>[<span class="hljs-number">0</span>] = -<span class="hljs-number">1</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">next</span><br>        <br></code></pre></td></tr></table></figure><p>æˆ–è€…æœ‰ç§ç®€å•çš„æƒ³æ³•ï¼š</p><blockquote><p>å…¶å®ï¼Œæ±‚nextæ•°ç»„çš„è¿‡ç¨‹å®Œå…¨å¯ä»¥çœ‹æˆå­—ç¬¦ä¸²åŒ¹é…çš„è¿‡ç¨‹ï¼Œå³ä»¥æ¨¡å¼å­—ç¬¦ä¸²ä¸ºä¸»å­—ç¬¦ä¸²ï¼Œä»¥æ¨¡å¼å­—ç¬¦ä¸²çš„å‰ç¼€ä¸ºç›®æ ‡å­—ç¬¦ä¸²ï¼Œä¸€æ—¦å­—ç¬¦ä¸²åŒ¹é…æˆåŠŸï¼Œé‚£ä¹ˆå½“å‰çš„nextå€¼å°±æ˜¯åŒ¹é…æˆåŠŸçš„å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯ä»æ¨¡å¼å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä½(æ³¨æ„ï¼Œä¸åŒ…æ‹¬ç¬¬0ä½)å¼€å§‹å¯¹è‡ªèº«è¿›è¡ŒåŒ¹é…è¿ç®—ã€‚ åœ¨ä»»ä¸€ä½ç½®ï¼Œèƒ½åŒ¹é…çš„æœ€é•¿é•¿åº¦å°±æ˜¯å½“å‰ä½ç½®çš„nextå€¼ã€‚</p></blockquote><p>Note: next çš„ç¬¬ä¸€ä½æ˜¯è¢«shift å¾—åˆ°çš„ï¼Œä¸€å®šä¸º-1ï¼Œç¬¬äºŒä½å› ä¸ºæ˜¯æ±‚å¾—äºé•¿åº¦ä»…ä¸º1 çš„substringï¼Œ å¿…å®šæ­¤next å€¼ä¸º0ã€‚æœ€åä¸€ä½ä¼šè¢«shiftæ‰ï¼Œæ‰€ä»¥ä¹Ÿä¸ç”¨care\</p><p>æ€»ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">strStr</span>(<span class="hljs-params">self, haystack: <span class="hljs-built_in">str</span>, needle: <span class="hljs-built_in">str</span></span>) -&gt; int:</span><br>        <span class="hljs-keyword">if</span> needle == <span class="hljs-string">&quot;&quot;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br>        <span class="hljs-built_in">next</span> = self.next_table(needle)<br>        i = <span class="hljs-number">0</span> <span class="hljs-comment"># for haystack</span><br>        j = <span class="hljs-number">0</span> <span class="hljs-comment"># for needle</span><br>        <span class="hljs-keyword">while</span> i &lt; <span class="hljs-built_in">len</span>(haystack):<br>            <span class="hljs-keyword">if</span> j == <span class="hljs-built_in">len</span>(needle) -<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> haystack[i] == needle[j]:<br>                <span class="hljs-keyword">return</span> i-j<br>            <span class="hljs-keyword">if</span> haystack[i] == needle[j]:<br>                i += <span class="hljs-number">1</span><br>                j += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                j = <span class="hljs-built_in">next</span>[j]<br>                <span class="hljs-keyword">if</span> j == -<span class="hljs-number">1</span>:<br>                    i += <span class="hljs-number">1</span><br>                    j += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">next_table</span>(<span class="hljs-params">self, arr</span>):</span><br>        <span class="hljs-built_in">next</span> = [<span class="hljs-literal">None</span>] * <span class="hljs-built_in">len</span>(arr)<br>        <span class="hljs-built_in">next</span>[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>        <span class="hljs-comment"># i represents the substring [0:i]</span><br>        i = <span class="hljs-number">1</span><br>            <span class="hljs-comment"># j represents the possible next value </span><br>        j = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> i &lt; <span class="hljs-built_in">len</span>(arr):<br>            <span class="hljs-keyword">if</span> arr[i] == arr[j]:<br>                j+=<span class="hljs-number">1</span><br>                <span class="hljs-built_in">next</span>[i] = j<br>                i+=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">if</span> j &gt; <span class="hljs-number">0</span>:<br>                    j = <span class="hljs-built_in">next</span>[j-<span class="hljs-number">1</span>]<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-built_in">next</span>[i] = j<br>                    i+=<span class="hljs-number">1</span><br>        <span class="hljs-comment"># right shift</span><br>        i = <span class="hljs-built_in">len</span>(<span class="hljs-built_in">next</span>) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> i &gt;= <span class="hljs-number">0</span>:<br>            <span class="hljs-built_in">next</span>[i] =<span class="hljs-built_in">next</span>[i-<span class="hljs-number">1</span>]<br>            i-=<span class="hljs-number">1</span><br>        <span class="hljs-built_in">next</span>[<span class="hljs-number">0</span>] = -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">next</span><br>    <br></code></pre></td></tr></table></figure><h1 id="è¿è¡Œæ—¶é—´-Run-time"><a class="header-anchor" href="#è¿è¡Œæ—¶é—´-Run-time">Â¶</a>è¿è¡Œæ—¶é—´ Run-time</h1><p>æš´åŠ›ç®—æ³• O(mn)</p><p>KMPç®—æ³• O(m+n)</p><h1 id="åæ€-Introspection"><a class="header-anchor" href="#åæ€-Introspection">Â¶</a>åæ€ Introspection</h1><p>éœ€è¦å¤šæ¬¡å¤ä¹ åŠ æ·±å°è±¡</p><p>å¯¹äº getNext çš„ç»†èŠ‚ï¼Œéœ€è¦å¤šåŠ å¤ä¹ </p>]]></content>
    
    
    <categories>
      
      <category>Algo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Longest-Increasing-Subsequence</title>
    <link href="/2021/04/18/Longest-Increasing-Subsequence/"/>
    <url>/2021/04/18/Longest-Increasing-Subsequence/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å¼€å§‹-Starting"><a class="header-anchor" href="#å¼€å§‹-Starting">Â¶</a>å¼€å§‹ Starting</h1><p>Longest Increasing Subsequence</p><p><em>Algorithm by Sanjoy Dasgupta  p. 171</em></p><p><a href="https://leetcode.com/problems/longest-increasing-subsequence/">https://leetcode.com/problems/longest-increasing-subsequence/</a></p><span id="more"></span><h1 id="é¢˜ç›®-Question"><a class="header-anchor" href="#é¢˜ç›®-Question">Â¶</a>é¢˜ç›® Question</h1><p>Given an integer array <code>nums</code>, return the length of the longest strictly increasing subsequence.</p><p>A <strong>subsequence</strong> is a sequence that can be derived from an array by deleting some or no elements without changing the order of the remaining elements. For example, <code>[3,6,2,7]</code> is a subsequence of the array <code>[0,3,1,6,2,2,7]</code>.</p><h1 id="æƒ³æ³•-Thinking"><a class="header-anchor" href="#æƒ³æ³•-Thinking">Â¶</a>æƒ³æ³• Thinking</h1><p>åŸºäºRecursionï¼Œå¯ä»¥ç”¨ DP èŠ‚çœæ—¶é—´ï¼Œå¤§æ¦‚å› ä¸ºè‡ªå·±åŸºç¡€ä¸å¤ªå¥½çš„åŸå› ï¼Œå¬ç°åœ¨è¿™ä¸ªè€å¸ˆçš„è®²è¯¾å¬å¾—æˆ‘å¾ˆè¿·èŒ«ï¼Œäºæ˜¯å‡†å¤‡é‡æ–°æä¸€ä¸‹è¿™é“é¢˜ã€‚</p><p>å¯¹äºDynamic Programmingï¼šè¯¾ä¸Šæ€»ç»“äº†ä»¥ä¸‹çš„general steps:</p><ol><li>Break problem into smaller subproblem</li><li>Solve smaller subproblems first (bottom-up)</li><li>Use information from smaller problem to solve a large subproblem</li></ol><p>åœ¨è¿™ä¸€é¢˜ä¸­ï¼Œä¹¦ä¸Šæä¾›çš„æ€è·¯ä¸ºæŠŠinput çœ‹ä½œæ˜¯ä¸€ä¸ªDAG (<em>directed acyclic graph</em>) $E$ï¼Œæ¯ä¸ªnode æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå¯¹äºè¿™ä¸ªDAG ä¸Šçš„nodeï¼Œ ç¼–ä¸Šåºå·ä¸º $a_{i}$ å’Œ $a_{j}$ ï¼Œedge çš„åˆ›å»ºæ¡ä»¶å¦‚ä¸‹ï¼ˆå¼•ç”¨åŸæ–‡ï¼‰ï¼š</p><blockquote><p>Establish a node i for each element ai , and add directed edges (i, j) whenever it is possible for ai and aj to be consecutive elements in an increasing subsequence, that is, whenever i &lt; j and ai &lt; aj</p></blockquote><h1 id="ç®—æ³•-Algorithm"><a class="header-anchor" href="#ç®—æ³•-Algorithm">Â¶</a>ç®—æ³• Algorithm</h1><p>for j = 1,2,3,â€¦,n:</p><p>â€‹$L(j) = 1+max{L(i): (i,j) \in E}$</p><p>return $max_{j}L(j)$</p><p>å³ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment"># Dynamic programming Python implementation</span><br><span class="hljs-comment"># of LIS problem</span><br> <br><span class="hljs-comment"># lis returns length of the longest</span><br><span class="hljs-comment"># increasing subsequence in arr of size n</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lis</span>(<span class="hljs-params">arr</span>):</span><br>    n = <span class="hljs-built_in">len</span>(arr)<br> <br>    <span class="hljs-comment"># Declare the list (array) for LIS and</span><br>    <span class="hljs-comment"># initialize LIS values for all indexes</span><br>    lis = [<span class="hljs-number">1</span>]*n<br> <br>    <span class="hljs-comment"># Compute optimized LIS values in bottom up manner</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">1</span> , n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span> , i):<br>            <span class="hljs-keyword">if</span> arr[i] &gt; arr[j] <span class="hljs-keyword">and</span> lis[i]&lt; lis[j] + <span class="hljs-number">1</span> :<br>                lis[i] = lis[j]+<span class="hljs-number">1</span><br> <br>    <span class="hljs-comment"># Initialize maximum to 0 to get</span><br>    <span class="hljs-comment"># the maximum of all LIS</span><br>    maximum = <span class="hljs-number">0</span><br> <br>    <span class="hljs-comment"># Pick maximum of all LIS values</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        maximum = <span class="hljs-built_in">max</span>(maximum , lis[i])<br> <br>    <span class="hljs-keyword">return</span> maximum<br><span class="hljs-comment"># end of lis function</span><br> <br><span class="hljs-comment"># Driver program to test above function</span><br>arr = [<span class="hljs-number">10</span>, <span class="hljs-number">22</span>, <span class="hljs-number">9</span>, <span class="hljs-number">33</span>, <span class="hljs-number">21</span>, <span class="hljs-number">50</span>, <span class="hljs-number">41</span>, <span class="hljs-number">60</span>]<br><span class="hljs-built_in">print</span> <span class="hljs-string">&quot;Length of lis is&quot;</span>, lis(arr)<br><span class="hljs-comment"># This code is contributed by Nikhil Kumar Singh</span><br></code></pre></td></tr></table></figure><p>æ¥æºï¼š<a href="https://www.geeksforgeeks.org/longest-increasing-subsequence-dp-3">GeeksForGeeks</a></p><p>node æ˜¯å¦å­˜åœ¨ ç”±ï¼š<code>if arr[i] &gt; arr[j]</code> å®ç°</p><p>max functionæ˜¯ ç”±: <code>lis[i]&lt; lis[j] + 1 </code> å®ç°</p><h1 id="è¿è¡Œæ—¶é—´-Run-time"><a class="header-anchor" href="#è¿è¡Œæ—¶é—´-Run-time">Â¶</a>è¿è¡Œæ—¶é—´ Run-time</h1><p>$O(n^2)$</p><p>å› ä¸ºDP æ˜¯åŸºäº recursion ä¸Šæ›´æ”¹çš„ï¼ˆIteration ç‰ˆæœ¬æ¯æ¬¡iterateæ•´ä¸ªarr[0:i] for i&lt; len(arr)ã€‚ DP çš„ä¼˜åŠ¿åœ¨äº æŠŠæ¯ä¸ªnode çš„LIS result éƒ½å­˜åˆ°äº†ä¸€ä¸ªarrayä¸­ï¼Œè¿™æ ·ä¸éœ€è¦é‡å¤è®¡ç®—å·²ç»è®¡ç®—è¿‡çš„sub-problemã€‚</p><h1 id="åæ€-Introspection"><a class="header-anchor" href="#åæ€-Introspection">Â¶</a>åæ€ Introspection</h1><p>å­¦ä¹ ç®—æ³•ï¼Œå…‰è®¤çœŸå¬è¯¾æ”¶è·ä¸ä¼šå¾ˆå¤§ï¼Œç»“åˆä¹¦æœ¬ï¼Œç½‘ç»œï¼Œæ²¹ç®¡å¯¹ç®—æ³•è¿›è¡Œè¿›ä¸€æ­¥çš„å®ç°ä¼šæœ‰æ›´å¤§å¸®åŠ©</p>]]></content>
    
    
    <categories>
      
      <category>algo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CMPSC465</tag>
      
      <tag>DP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Edit-Distance</title>
    <link href="/2021/04/14/Edit-Distance/"/>
    <url>/2021/04/14/Edit-Distance/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å¼€å§‹-Starting"><a class="header-anchor" href="#å¼€å§‹-Starting">Â¶</a>å¼€å§‹ Starting</h1><p>Edit Distance</p><p><em>Algorithm by Sanjoy Dasgupta</em></p><p>p.175</p><p><a href="https://leetcode.com/problems/edit-distance/">https://leetcode.com/problems/edit-distance/</a></p><span id="more"></span><h1 id="é¢˜ç›®-Question"><a class="header-anchor" href="#é¢˜ç›®-Question">Â¶</a>é¢˜ç›® Question</h1><p>Given two strings <code>word1</code> and <code>word2</code>, return <em>the minimum number of operations required to convert <code>word1</code> to <code>word2</code></em>.</p><p>You have the following three operations permitted on a word:</p><ul><li>Insert a character</li><li>Delete a character</li><li>Replace a character</li></ul><h1 id="æƒ³æ³•-Thinking"><a class="header-anchor" href="#æƒ³æ³•-Thinking">Â¶</a>æƒ³æ³• Thinking</h1><p>æˆ‘ä»¬å…ˆæƒ³å½“æœ€å¥½æƒ…å†µä¸‹çš„alignment between $x[1:i]$ å’Œ $y[1:j]$ : æœ‰ä¸‰ç§æƒ…å†µï¼š</p><table><thead><tr><th>x[1:i-1] and y[1:j] remains</th><th>x[1:i] and y[1:j-1] remains</th><th>x[1:i-1] and y[1:j-1] remains</th></tr></thead><tbody><tr><td>x[i]</td><td>â€”</td><td>x[i]</td></tr><tr><td>â€”</td><td>y[j]</td><td>y[j]</td></tr></tbody></table><p>å‰ä¸¤è€…æƒ…å†µ Cost éƒ½ä¸º 1ï¼Œ æœ€åä¸€ç§æƒ…å†µ å¦‚æœç›¸ç­‰åˆ™cost ä¸º0ï¼Œotherwise ä¸º1</p><blockquote><p>In short, we have expressed E(i, j) in terms of three smaller subproblems E(i âˆ’ 1, j), E(i, j âˆ’ 1), E(i âˆ’ 1, j âˆ’ 1).</p></blockquote><p>å› ä¸ºæ— ä»çŸ¥æ™“å“ªç§æƒ…å†µæ˜¯æœ€ä¼˜ï¼Œåšä¸€ä¸ªminï¼š</p><p>$E(i, j) = min$ {$1 + E(i âˆ’ 1, j), 1 + E(i, j âˆ’ 1), diff(i, j) + E(i âˆ’ 1, j âˆ’ 1)$}</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„problem å·²ç»å¯ä»¥è½¬åŒ–æˆå¤šä¸ªsub-problemï¼Œç„¶å optimal æ˜¯ç”±å…¶ä¸­æœ€å°çš„ç»„æˆã€‚ æˆ‘ä»¬å¯ä»¥ç”¨matrix æŠŠæ‰€æœ‰å¯èƒ½çš„ (i,j) ç»„åˆè¡¨ç¤ºå‡ºæ¥</p><p><img src="../images/Figure6-4.png" alt="image-20210414172023798"></p><p><img src="../images/figure6-5.png" alt="image-20210414173117110"></p><p>æˆ‘ä»¬å¯ä»¥åŒæ—¶è®°å½•pathï¼Œ è¿™æ ·åˆ°æœ€åç»“æœçš„pathå°±èƒ½è¢«è®°å½•ä¸‹æ¥ã€‚å¾€ä¸‹èµ°æ˜¯delete ï¼ˆç¬¬ä¸€ç§æƒ…å†µï¼‰ ï¼Œå¾€å³èµ°æ˜¯insert ï¼ˆç¬¬äºŒç§æƒ…å†µï¼‰, æ–œç€èµ°æ˜¯ match or substitution</p><h1 id="ç®—æ³•-Algorithm"><a class="header-anchor" href="#ç®—æ³•-Algorithm">Â¶</a>ç®—æ³• Algorithm</h1><figure class="highlight reasonml"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//Psedo-code</span><br><span class="hljs-keyword">for</span> i = <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, . . . , m:<br><span class="hljs-constructor">E(<span class="hljs-params">i</span>, 0)</span> = i<br><span class="hljs-keyword">for</span> j = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, . . . , n:<br><span class="hljs-constructor">E(0, <span class="hljs-params">j</span>)</span> = j<br><span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, . . . , m:<br><span class="hljs-keyword">for</span> j = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, . . . , n:<br><span class="hljs-constructor">E(<span class="hljs-params">i</span>, <span class="hljs-params">j</span>)</span> = min&#123;<span class="hljs-constructor">E(<span class="hljs-params">i</span> âˆ’ 1, <span class="hljs-params">j</span>)</span> + <span class="hljs-number">1</span>, <span class="hljs-constructor">E(<span class="hljs-params">i</span>, <span class="hljs-params">j</span> âˆ’ 1)</span> + <span class="hljs-number">1</span>, <span class="hljs-constructor">E(<span class="hljs-params">i</span> âˆ’ 1, <span class="hljs-params">j</span> âˆ’ 1)</span> + diff(i, j)&#125;<br>return <span class="hljs-constructor">E(<span class="hljs-params">m</span>, <span class="hljs-params">n</span>)</span><br><br></code></pre></td></tr></table></figure><p>å‰é¢ä¸¤ä¸ªfor loop initialize è¿™ä¸ªmatrixï¼Œ ç¬¬ä¸‰ä¸ª for loop éå†æ‰€æœ‰çš„æ ¼å­ï¼ˆrow by rowï¼‰</p><h1 id="è¿è¡Œæ—¶é—´-Run-time"><a class="header-anchor" href="#è¿è¡Œæ—¶é—´-Run-time">Â¶</a>è¿è¡Œæ—¶é—´ Run-time</h1><p>æ¯æ¬¡å¡«å†™æ ¼å­å¸¸æ•°æ—¶é—´ï¼Œæ‰€ä»¥å…±O(mn)</p><h1 id="åæ€-Introspection"><a class="header-anchor" href="#åæ€-Introspection">Â¶</a>åæ€ Introspection</h1><p>ğŸ˜‚çœ‹ä¹¦æ¯”ä¸Šè¯¾ç®¡ç”¨</p>]]></content>
    
    
    <categories>
      
      <category>algo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CMPSC465</tag>
      
      <tag>DP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jQuery(1)</title>
    <link href="/2021/03/18/jQuery_1/"/>
    <url>/2021/03/18/jQuery_1/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç®€å•å…¥é—¨-jQueryï¼ˆ1ï¼‰"><a class="header-anchor" href="#ç®€å•å…¥é—¨-jQueryï¼ˆ1ï¼‰">Â¶</a>ç®€å•å…¥é—¨ jQueryï¼ˆ1ï¼‰</h1><p>å°ä¼™ä¼´ä¸€èµ·åšprojectï¼Œ è‡ªå­¦jQuery è·Ÿä¸Šè¿›åº¦</p><p>ä¸»è¦éƒ½æŒºæœ‰ç”¨ï¼Œæ‰€ä»¥ç›¸å½“äºæ¬è¿äº†è¿‡æ¥ï¼Œæœ‰æ„æ€çš„è¯åŒå­¦ä»¬å¯ä»¥å»å®éªŒæ¥¼å­¦ä¸€ä¸‹</p><span id="more"></span><p>ä»¥ä¸‹å†…å®¹å…¨éƒ¨æ¥æºï¼š</p><p><a href="https://www.lanqiao.cn/courses/22/">https://www.lanqiao.cn/courses/22/</a></p><p>[TOC]</p><h1 id="å¼•å…¥"><a class="header-anchor" href="#å¼•å…¥">Â¶</a>å¼•å…¥</h1><p>jQuery å¯ä»¥ä½¿ç”¨ CDN å¼•å…¥ï¼š</p><p><strong>Google CDN</strong></p><figure class="highlight html"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  &lt;script<br>    type=&quot;text/javascript&quot;<br>    src=&quot;http://ajax.googleapis.com/ajax/libs<br>/jquery/1.4.0/jquery.min.js&quot;<br>  &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br></code></pre></td></tr></table></figure><p>MicroSoft CDN</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  &lt;script<br>    type=&quot;text/javascript&quot;<br>    src=&quot;http://ajax.microsoft.com/ajax/jquery<br>/jquery-1.4.min.js&quot;<br>  &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="Syntax"><a class="header-anchor" href="#Syntax">Â¶</a>Syntax</h1><blockquote><p>jQuery è¯­æ³•æ˜¯ä¸º HTML å…ƒç´ çš„é€‰å–ç¼–åˆ¶çš„ï¼Œå¯ä»¥å¯¹å…ƒç´ æ‰§è¡ŒæŸäº›æ“ä½œã€‚</p><p>åŸºç¡€è¯­æ³•æ˜¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$(selector).action();<br></code></pre></td></tr></table></figure><ul><li>ç¾å…ƒç¬¦å· $ å®šä¹‰ jQueryã€‚</li><li>é€‰æ‹©ç¬¦ï¼ˆselectorï¼‰â€œæŸ¥è¯¢â€å’Œâ€œæŸ¥æ‰¾â€ HTML å…ƒç´ ã€‚</li><li>jQuery çš„ action() æ‰§è¡Œå¯¹å…ƒç´ çš„æ“ä½œã€‚</li></ul><p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨ jQuery åº“ä¸­ $ ç¬¦å·å°±æ˜¯ jQuery çš„ä¸€ä¸ªç®€å†™å½¢å¼ï¼Œä¾‹å¦‚ <code>$(&quot;#syl&quot;)</code> å’Œ <code>jQuery(&quot;#syl&quot;)</code> æ˜¯ç­‰ä»·çš„ï¼Œ<code>$.ajax</code> å’Œ <code>jQuery.ajax</code> æ˜¯ç­‰ä»·çš„ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«è¯´æ˜ï¼Œç¨‹åºä¸­çš„ <code>$</code> ç¬¦å·éƒ½æ˜¯ jQuery çš„ä¸€ä¸ªç®€å†™å½¢å¼ã€‚</p></blockquote><p>æ‰€æœ‰çš„ jQuery å‡½æ•°ä½äºä¸€ä¸ª document ready å‡½æ•°ä¸­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br><br>&#125;);<br><br><span class="hljs-comment">// å¯ä»¥ç®€å†™æˆ</span><br><br>$(<span class="hljs-function"><span class="hljs-title">funciton</span>(<span class="hljs-params"></span>)</span>&#123;<br><br>&#125;);<br></code></pre></td></tr></table></figure><h2 id="DOM"><a class="header-anchor" href="#DOM">Â¶</a>DOM</h2><blockquote><p>DOM ï¼ˆDocument Object Modelï¼‰å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸è¯´çš„æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œæ¯ä¸€ä»½ DOM éƒ½å¯ä»¥è¡¨ç¤ºæˆä¸€æ£µ DOM æ ‘ï¼š</p><p><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1547429789687.png" alt="img"></p><p>æ¯”å¦‚è¿™æ ·çš„ä¸€æ®µä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><p>h1,p,ul ä»¥åŠ li æ ‡ç­¾éƒ½æ˜¯ DOM å…ƒç´ èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ JavaScript ä¸­çš„ <code>document.getElementById()</code>ï¼Œ<code>document.getElementsByTagName()</code> ç­‰æ¥è·å–å…ƒç´ èŠ‚ç‚¹ï¼Œåƒè¿™æ ·è·å–çš„ DOM å…ƒç´ å°±æ˜¯ DOM å¯¹è±¡ï¼ŒDOM å¯¹è±¡å¯ä»¥ä½¿ç”¨ JavaScript ä¸­çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> domObj = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;id&#x27;</span>); <span class="hljs-comment">//è·å–DOMå¯¹è±¡</span><br><span class="hljs-keyword">var</span> objHtml = domObj.innerHTML; <span class="hljs-comment">//ä½¿ç”¨JavaScriptä¸­çš„å±æ€§innerHTML</span><br></code></pre></td></tr></table></figure></blockquote><h2 id="jQuery-å¯¹è±¡"><a class="header-anchor" href="#jQuery-å¯¹è±¡">Â¶</a>jQuery å¯¹è±¡</h2><blockquote><p>jQuery å¯¹è±¡å°±æ˜¯é€šè¿‡ jQuery åŒ…è£… DOM å¯¹è±¡åäº§ç”Ÿçš„å¯¹è±¡ã€‚jQuery å¯¹è±¡æ˜¯ jQuery ç‹¬æœ‰çš„ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æ˜¯ jQuery å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥ä½¿ç”¨ jQuery é‡Œçš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$(<span class="hljs-string">&#x27;#syl&#x27;</span>).html(); <span class="hljs-comment">//è·å–idä¸ºsylçš„å…ƒç´ å†…çš„htmlä»£ç ï¼Œhtml()æ˜¯jQueryä¸­çš„æ–¹æ³•</span><br></code></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ç­‰åŒäºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;syl&#x27;</span>).innerHTML;<br></code></pre></td></tr></table></figure><p>åœ¨ jQuery å¯¹è±¡ä¸­æ— æ³•ä½¿ç”¨ DOM å¯¹è±¡ä¸­çš„ä»»ä½•æ–¹æ³•ï¼Œä¾‹å¦‚ <code>$(&quot;#syl&quot;).innerHTML;</code> ä¹‹ç±»çš„å†™æ³•æ˜¯é”™çš„ï¼Œå¯ä»¥ä½¿ç”¨ <code>$(&quot;#syl&quot;).html();</code> ä¹‹ç±»çš„ jQuery æ–¹æ³•æ¥ä»£æ›¿ï¼ŒåŒæ ·çš„é“ç†ï¼ŒDOM å¯¹è±¡ä¹Ÿä¸èƒ½ä½¿ç”¨ jQuery é‡Œçš„æ–¹æ³•ï¼Œä¾‹å¦‚:<code>document.getElementById(&quot;syl&quot;).html();</code>ä¹Ÿæ˜¯ä¼šæŠ¥é”™çš„ã€‚</p><p>æ³¨ï¼šç”¨ <code>#id</code> ä½œä¸ºé€‰æ‹©ç¬¦å–å¾—çš„æ˜¯ jQuery å¯¹è±¡è€Œå¹¶é <code>document.getElementById(&quot;id&quot;);</code> æ‰€å¾—åˆ°çš„ DOM å¯¹è±¡ï¼Œä¸¤è€…å¹¶ä¸ç­‰ä»·ã€‚æˆ‘ä»¬ä¸€å®šè¦ä»å¼€å§‹å°±æ ‘ç«‹è¿™æ ·çš„ä¸€ä¸ªè§‚å¿µï¼šjQuery å¯¹è±¡å’Œ DOM å¯¹è±¡æ˜¯æœ‰åŒºåˆ«çš„ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯ç­‰ä»·çš„ã€‚</p><h4 id="jQuery-å¯¹è±¡å’Œ-DOM-å¯¹è±¡ä¹‹é—´çš„ç›¸äº’è½¬æ¢"><a class="header-anchor" href="#jQuery-å¯¹è±¡å’Œ-DOM-å¯¹è±¡ä¹‹é—´çš„ç›¸äº’è½¬æ¢">Â¶</a>jQuery å¯¹è±¡å’Œ DOM å¯¹è±¡ä¹‹é—´çš„ç›¸äº’è½¬æ¢</h4><p>åœ¨è®²è§£ <code>jQuery</code> å¯¹è±¡å’Œ <code>DOM</code> å¯¹è±¡ä¹‹é—´çš„ç›¸äº’è½¬æ¢ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçº¦å®šå¥½å®šä¹‰å˜é‡çš„é£æ ¼ï¼Œå¦‚æœè·å–çš„æ˜¯ <code>jQuery</code> å¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨å˜é‡å‰é¢åŠ ä¸Š <code>$</code> ç¬¦å·ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> $test = jQuery å¯¹è±¡;<br></code></pre></td></tr></table></figure><p>å¦‚æœè·å–çš„æ˜¯ DOM å¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> test = DOM å¯¹è±¡;<br><br></code></pre></td></tr></table></figure></blockquote><blockquote><ol><li>jQuery å¯¹è±¡è½¬æ¢ä¸º DOM å¯¹è±¡</li></ol><p>æˆ‘ä»¬å‰é¢è¯´è¿‡ jQuery å¯¹è±¡ä¸èƒ½ä½¿ç”¨ DOM ä¸­çš„æ–¹æ³•ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åˆä¸å¾—ä¸ä½¿ç”¨ DOM ä¸­çš„æ–¹æ³•å‘¢ï¼Ÿæ¯”å¦‚ï¼šå¯¹ jQuery å¯¹è±¡æ‰€æä¾›çš„æ–¹æ³•ä¸ç†Ÿæ‚‰æˆ–è€…å¿˜äº†ä½†æ˜¯çŸ¥é“ DOM ä¸­çš„æ–¹æ³•ï¼Œè‡ªå·±åˆå¾ˆæ‡’ä¸æƒ³å»æŸ¥ jQuery æ‰‹å†Œæˆ–è€… jQuery æœ¬èº«å°±æ²¡æœ‰å°è£…æˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„æ–¹æ³•ã€‚æœ‰ä»¥ä¸‹çš„ä¸¤ç§å¤„ç†æ–¹æ³•ï¼š</p><ul><li>[index]:jQuery å¯¹è±¡æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ <code>[index]</code> çš„æ–¹æ³•å¾—åˆ°å¯¹åº”çš„ DOM å¯¹è±¡ï¼Œæ¯”å¦‚ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> $cr = $(<span class="hljs-string">&#x27;#cr&#x27;</span>); <span class="hljs-comment">//jQuery å¯¹è±¡</span><br><span class="hljs-keyword">var</span> cr = $cr[<span class="hljs-number">0</span>]; <span class="hljs-comment">//DOM å¯¹è±¡</span><br></code></pre></td></tr></table></figure><ul><li>é€šè¿‡ get(index) æ–¹æ³•å¾—åˆ°ç›¸åº”çš„ DOM å¯¹è±¡ï¼Œæ¯”å¦‚ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> $cr = $(<span class="hljs-string">&#x27;#cr&#x27;</span>); <span class="hljs-comment">//jQuery å¯¹è±¡</span><br><span class="hljs-keyword">var</span> cr = $cr.get(<span class="hljs-number">0</span>); <span class="hljs-comment">//DOM å¯¹è±¡</span><br></code></pre></td></tr></table></figure><ol><li>DOM å¯¹è±¡è½¬æ¢ä¸º jQuery å¯¹è±¡</li></ol><p>å¯¹äºä¸€ä¸ª DOM å¯¹è±¡ï¼Œåªéœ€è¦ç”¨ <code>$()</code> æŠŠ DOM å¯¹è±¡åŒ…è£…èµ·æ¥ï¼Œå°±å¯ä»¥è·å¾—ä¸€ä¸ª jQuery å¯¹è±¡äº†ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> cr = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;cr&#x27;</span>); <span class="hljs-comment">//DOM å¯¹è±¡</span><br><span class="hljs-keyword">var</span> $cr = $(cr); <span class="hljs-comment">//jQuery å¯¹è±¡</span><br></code></pre></td></tr></table></figure></blockquote><p>ä¾‹å­ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs html"> $(document).ready(function () &#123;<br>        var $cr = $(&#x27;#cr&#x27;);<br>        $cr.click(function () &#123;<br>          if ($cr.is(&#x27;:checked&#x27;)) &#123;<br>            alert(&#x27;ä½ å·²åŒæ„æœ¬åè®®&#x27;);<br>          &#125;<br>        &#125;);<br>      &#125;);// DOM æ–¹å¼ åˆ¤æ–­ å‹¾é€‰å¤é€‰æ¡†<br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cr&quot;</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;cr&quot;</span>&gt;</span>æˆ‘å·²é˜…è¯»åè®®<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      <span class="hljs-comment">//ç­‰å¾…domå…ƒç´ åŠ è½½å®Œæ¯•</span></span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> $cr = $(<span class="hljs-string">&#x27;#cr&#x27;</span>); <span class="hljs-comment">//jQueryå¯¹è±¡</span></span><br><span class="javascript">        <span class="hljs-keyword">var</span> cr = $cr[<span class="hljs-number">0</span>]; <span class="hljs-comment">//DOMå¯¹è±¡ï¼Œæˆ–è€…$cr.get(0)</span></span><br><span class="javascript">        $cr.click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br>          if (cr.checked) &#123;<br><span class="javascript">            <span class="hljs-comment">//DOMæ–¹å¼åˆ¤æ–­</span></span><br><span class="javascript">            alert(<span class="hljs-string">&#x27;ä½ å·²åŒæ„æœ¬åè®®&#x27;</span>);</span><br>          &#125;<br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br>// jQuery æ–¹å¼åˆ¤æ–­ å¤é€‰æ¡†<br> $(document).ready(function () &#123;<br>        var $cr = $(&#x27;#cr&#x27;);<br>        $cr.click(function () &#123;<br>          if ($cr.is(&#x27;:checked&#x27;)) &#123;<br>            alert(&#x27;ä½ å·²åŒæ„æœ¬åè®®&#x27;);<br>          &#125;<br>        &#125;);<br>      &#125;);<br></code></pre></td></tr></table></figure><h2 id="noConflict"><a class="header-anchor" href="#noConflict">Â¶</a>noConflict()</h2><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade">$.noConflict(); <span class="hljs-comment">// é‡Šæ”¾ $æ ‡è¯†ç¬¦çš„æ§åˆ¶</span><br><span class="hljs-keyword">var</span> jq = $.noConflict(); <span class="hljs-comment">//æ›¿ä»£</span><br><br></code></pre></td></tr></table></figure><p>æŠŠ <code>$</code> ä½œä¸º å˜é‡ä¼ é€’ç»™ ready æ–¹æ³•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>ç‚¹æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      <span class="hljs-comment">//ç­‰å¾…domå…ƒç´ åŠ è½½å®Œæ¯•</span></span><br><span class="javascript">      $.noConflict();</span><br><span class="javascript">      jQuery(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;button&#x27;</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          $(<span class="hljs-string">&#x27;p&#x27;</span>).text(<span class="hljs-string">&#x27;jQuery ä»ç„¶åœ¨å·¥ä½œ!&#x27;</span>);</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="Selector-é€‰æ‹©å™¨"><a class="header-anchor" href="#Selector-é€‰æ‹©å™¨">Â¶</a>Selector é€‰æ‹©å™¨</h1><blockquote><ul><li>jQuery ä¸­ çš„é€‰æ‹©å™¨å®Œå…¨ç»§æ‰¿äº† CSS çš„é£æ ¼ï¼Œé€šè¿‡ä½¿ç”¨ jQuery é€‰æ‹©å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿçš„æ‰¾åˆ°ç›®æ ‡ DOM å…ƒç´ ï¼Œç„¶åå¯¹å®ƒä»¬è¿›è¡Œä¸€ç³»åˆ—æ“ä½œï¼Œå­¦ä¼šä½¿ç”¨é€‰æ‹©å™¨æ˜¯å­¦ä¹  jQuery çš„åŸºç¡€ï¼ŒjQuery çš„è¡Œä¸ºè§„åˆ™éƒ½å¿…é¡»åœ¨è·å–åˆ°å…ƒç´ åæ‰èƒ½ç”Ÿæ•ˆã€‚</li><li>jQuery é€‰æ‹©å™¨å…è®¸æ‚¨å¯¹ HTML å…ƒç´ ç»„æˆ–å•ä¸ªå…ƒç´ è¿›è¡Œæ“ä½œã€‚</li><li>jQuery é€‰æ‹©å™¨åŸºäºå…ƒç´ çš„ idã€ç±»ã€ç±»å‹ã€å±æ€§ã€å±æ€§å€¼ç­‰&quot;æŸ¥æ‰¾&quot;ï¼ˆæˆ–é€‰æ‹©ï¼‰HTML å…ƒç´ ã€‚ å®ƒåŸºäºå·²ç»å­˜åœ¨çš„ CSS é€‰æ‹©å™¨ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜æœ‰ä¸€äº›è‡ªå®šä¹‰çš„é€‰æ‹©å™¨ã€‚</li><li>jQuery ä¸­æ‰€æœ‰é€‰æ‹©å™¨éƒ½ä»¥ç¾å…ƒç¬¦å·å¼€å¤´ï¼š<code>$()</code>ã€‚</li><li>jQuery é€‰æ‹©å™¨çš„å†™æ³•å’Œ CSS é€‰æ‹©å™¨çš„å†™æ³•ååˆ†ç›¸ä¼¼ï¼Œåªä¸è¿‡ä¸¤è€…çš„ä½œç”¨æ•ˆæœä¸åŒï¼ŒCSS é€‰æ‹©å™¨æ‰¾åˆ°å…ƒç´ åæ˜¯æ·»åŠ æ ·å¼ï¼Œè€Œ jQuery é€‰æ‹©å™¨æ‰¾åˆ°å…ƒç´ åæ˜¯æ·»åŠ è¡Œä¸ºï¼ŒjQuery ä¸­æ¶‰åŠæ“ä½œ CSS æ ·å¼çš„éƒ¨åˆ†æ¯”å•çº¯çš„ CSS åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ï¼Œå¹¶ä¸”æ‹¥æœ‰è·¨æµè§ˆå™¨çš„å…¼å®¹æ€§ã€‚</li></ul></blockquote><p>jQuery æ‹¥æœ‰æ›´å¥½çš„é”™è¯¯å¤„ç†æœºåˆ¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>      å®éªŒæ¥¼<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-string">&#x27;#syl&#x27;</span>).css(<span class="hljs-string">&#x27;color&#x27;</span>, <span class="hljs-string">&#x27;red&#x27;</span>);</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å°½ç®¡å…ƒç´ ä¸å­˜åœ¨ï¼Œä¸ä¼šæŠ¥é”™</p><blockquote><p>å¦å¤–éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œ<code>$('#syl')</code> è·å–çš„æ°¸è¿œæ˜¯å¯¹è±¡ï¼Œå³ä½¿ç½‘é¡µä¸Šæ²¡æœ‰æ­¤å…ƒç´ ï¼Œå› ä¸ºå½“è¦ç”¨ jQuery æ¥æ£€æŸ¥æŸä¸ªå…ƒç´ å†ç½‘é¡µä¸Šæ˜¯å¦å­˜åœ¨æ—¶ï¼Œä¸èƒ½ä½¿ç”¨ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> ($(<span class="hljs-string">&#x27;#syl&#x27;</span>)) &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p>è€Œåº”è¯¥æ ¹æ®è·å–åˆ°å…ƒç´ çš„é•¿åº¦æ¥åˆ¤æ–­ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> ($(<span class="hljs-string">&#x27;#syl&#x27;</span>).length &gt; <span class="hljs-number">0</span>) &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–è€…è½¬åŒ–æˆ DOM å¯¹è±¡æ¥åˆ¤æ–­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> ($(<span class="hljs-string">&#x27;#syl&#x27;</span>)[<span class="hljs-number">0</span>]) &#123;<br>&#125;<br></code></pre></td></tr></table></figure></blockquote><h2 id="1-ID-Selectorï¼š-document-getElementById"><a class="header-anchor" href="#1-ID-Selectorï¼š-document-getElementById">Â¶</a>1. ID Selectorï¼š  document.getElementById()</h2><h4 id="ID-Selector-id-é€‰æ‹©ä¸€ä¸ªå…·æœ‰ç»™å®š-id-å±æ€§çš„å•ä¸ªå…ƒç´ "><a class="header-anchor" href="#ID-Selector-id-é€‰æ‹©ä¸€ä¸ªå…·æœ‰ç»™å®š-id-å±æ€§çš„å•ä¸ªå…ƒç´ ">Â¶</a><code>ID Selector (&quot;#id&quot;)</code> é€‰æ‹©ä¸€ä¸ªå…·æœ‰ç»™å®š id å±æ€§çš„å•ä¸ªå…ƒç´ </h4><p>ä¾‹å­ï¼š</p><p>é€‰æ‹© id ä¸º demo çš„å…ƒç´ ï¼Œå¹¶ä¸ºæ­¤å…ƒç´ è®¾ç½®é•¿ã€å®½ã€èƒŒæ™¯è‰²ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;#demo&#x27;</span>).css(&#123;</span><br><span class="javascript">          width: <span class="hljs-string">&#x27;100px&#x27;</span>,</span><br><span class="javascript">          height: <span class="hljs-string">&#x27;100px&#x27;</span>,</span><br><span class="javascript">          <span class="hljs-string">&#x27;background-color&#x27;</span>: <span class="hljs-string">&#x27;red&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="2-Class-Selectorï¼š-getElementsByClassName"><a class="header-anchor" href="#2-Class-Selectorï¼š-getElementsByClassName">Â¶</a>2. Class Selectorï¼š getElementsByClassName()</h2><h4 id="Class-Selector-class-é€‰æ‹©ç»™å®šæ ·å¼ç±»åçš„æ‰€æœ‰å…ƒç´ "><a class="header-anchor" href="#Class-Selector-class-é€‰æ‹©ç»™å®šæ ·å¼ç±»åçš„æ‰€æœ‰å…ƒç´ ">Â¶</a><code>Class Selector (&quot;.class&quot;)</code> é€‰æ‹©ç»™å®šæ ·å¼ç±»åçš„æ‰€æœ‰å…ƒç´ </h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;.demo&#x27;</span>).css(&#123;</span><br><span class="javascript">          width: <span class="hljs-string">&#x27;100px&#x27;</span>,</span><br><span class="javascript">          height: <span class="hljs-string">&#x27;100px&#x27;</span>,</span><br><span class="javascript">          <span class="hljs-string">&#x27;background-color&#x27;</span>: <span class="hljs-string">&#x27;red&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="3-Element-Selector-getElementsByTagName"><a class="header-anchor" href="#3-Element-Selector-getElementsByTagName">Â¶</a>3. Element Selector: getElementsByTagName()</h2><h4 id="Element-Selector-element-æ ¹æ®ç»™å®šï¼ˆhtmlï¼‰æ ‡è®°åç§°é€‰æ‹©æ‰€æœ‰çš„å…ƒç´ "><a class="header-anchor" href="#Element-Selector-element-æ ¹æ®ç»™å®šï¼ˆhtmlï¼‰æ ‡è®°åç§°é€‰æ‹©æ‰€æœ‰çš„å…ƒç´ ">Â¶</a><code>Element Selector (&quot;element&quot;)</code> æ ¹æ®ç»™å®šï¼ˆhtmlï¼‰æ ‡è®°åç§°é€‰æ‹©æ‰€æœ‰çš„å…ƒç´ </h4><p>ä¾‹å­ï¼š</p><p>é€‰æ‹©æ‰€æœ‰ div å…ƒç´ ,å¹¶ä¸ºæ‰€æœ‰å…ƒç´ è®¾ç½®é•¿ã€å®½ã€èƒŒæ™¯è‰²ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>shiyanlou1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>shiyanlou2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;div&#x27;</span>).css(&#123;</span><br><span class="javascript">          width: <span class="hljs-string">&#x27;100px&#x27;</span>,</span><br><span class="javascript">          height: <span class="hljs-string">&#x27;100px&#x27;</span>,</span><br><span class="javascript">          <span class="hljs-string">&#x27;background-color&#x27;</span>: <span class="hljs-string">&#x27;red&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="4-All-Selector-â€œ-â€"><a class="header-anchor" href="#4-All-Selector-â€œ-â€">Â¶</a>4. All Selector (â€œ*â€)</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>shiyanlou1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>shiyanlou2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;*&#x27;</span>).css(&#123;</span><br><span class="javascript">          width: <span class="hljs-string">&#x27;100px&#x27;</span>,</span><br><span class="javascript">          height: <span class="hljs-string">&#x27;100px&#x27;</span>,</span><br><span class="javascript">          <span class="hljs-string">&#x27;background-color&#x27;</span>: <span class="hljs-string">&#x27;red&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="5-Multiple-Selector-â€œselector1-selector2-selectorNâ€"><a class="header-anchor" href="#5-Multiple-Selector-â€œselector1-selector2-selectorNâ€">Â¶</a>5. Multiple Selector (â€œselector1, selector2, selectorNâ€)</h2><h4 id="å°†æ¯ä¸€ä¸ªé€‰æ‹©å™¨åŒ¹é…åˆ°çš„å…ƒç´ åˆå¹¶åä¸€èµ·è¿”å›"><a class="header-anchor" href="#å°†æ¯ä¸€ä¸ªé€‰æ‹©å™¨åŒ¹é…åˆ°çš„å…ƒç´ åˆå¹¶åä¸€èµ·è¿”å›">Â¶</a>å°†æ¯ä¸€ä¸ªé€‰æ‹©å™¨åŒ¹é…åˆ°çš„å…ƒç´ åˆå¹¶åä¸€èµ·è¿”å›</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.lanqiao.cn/&quot;</span>&gt;</span>https://www.lanqiao.cn/<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;div,a&#x27;</span>).css(&#123;</span><br><span class="javascript">          <span class="hljs-string">&#x27;font-size&#x27;</span>: <span class="hljs-string">&#x27;30px&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="å±‚æ¬¡é€‰æ‹©å™¨"><a class="header-anchor" href="#å±‚æ¬¡é€‰æ‹©å™¨">Â¶</a>å±‚æ¬¡é€‰æ‹©å™¨</h1><h2 id="1-Descendant-Selector-â€œancestor-descendantâ€"><a class="header-anchor" href="#1-Descendant-Selector-â€œancestor-descendantâ€">Â¶</a>1. Descendant Selector (â€œancestor descendantâ€)</h2><p>å¦‚æœæƒ³é€šè¿‡ DOM å…ƒç´ ä¹‹é—´çš„å±‚æ¬¡å…³ç³»æ¥è·å–ç‰¹å®šå…ƒç´ ï¼Œä¾‹å¦‚åä»£å…ƒç´ ã€å­å…ƒç´ ã€ç›¸é‚»å…ƒç´ å’ŒåŒè¾ˆå…ƒç´ ç­‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ jQuery å±‚æ¬¡é€‰æ‹©å™¨ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.lanqiao.cn/&quot;</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;innerDemo&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.lanqiao.cn/&quot;</span>&gt;</span>SHIYANLOU<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;.demo a&#x27;</span>).css(&#123;</span><br><span class="javascript">          <span class="hljs-string">&#x27;font-size&#x27;</span>: <span class="hljs-string">&#x27;30px&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="2-Child-Selector-â€œparent-childâ€"><a class="header-anchor" href="#2-Child-Selector-â€œparent-childâ€">Â¶</a>2. Child Selector (â€œparent &gt; childâ€)</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.lanqiao.cn/&quot;</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;innerDemo&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.lanqiao.cn/&quot;</span>&gt;</span>SHIYANLOU<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;.demo&gt;a&#x27;</span>).css(&#123;</span><br><span class="javascript">          <span class="hljs-string">&#x27;font-size&#x27;</span>: <span class="hljs-string">&#x27;30px&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="3-Next-Adjacent-Selector-â€œprev-nextâ€"><a class="header-anchor" href="#3-Next-Adjacent-Selector-â€œprev-nextâ€">Â¶</a>3. Next Adjacent Selector (â€œprev + nextâ€)</h2><p>prev å’Œ next æ˜¯ä¸¤ä¸ªåŒçº§åˆ«çš„å…ƒç´ ï¼Œé€‰ä¸­åœ¨ prev å…ƒç´ åé¢çš„ next å…ƒç´ ã€‚</p><p>ä¾‹å­ï¼š</p><p>é€‰ä¸­ class ä¸º demo åé¢çš„ a å…ƒç´ ï¼Œå¹¶è®¾ç½®å­—ä½“å¤§å°ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.lanqiao.cn/&quot;</span>&gt;</span>SHIYANLOU<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;.demo+a&#x27;</span>).css(&#123;</span><br><span class="javascript">          <span class="hljs-string">&#x27;font-size&#x27;</span>: <span class="hljs-string">&#x27;30px&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="4-Next-Siblings-Selector-â€œprev-siblingsâ€"><a class="header-anchor" href="#4-Next-Siblings-Selector-â€œprev-siblingsâ€">Â¶</a>4. Next Siblings Selector (â€œprev ~ siblingsâ€)</h2><p><code>prev + next</code> å’Œ <code>prev ~ siblings</code> ä¹‹é—´æœ€å€¼å¾—æ³¨æ„çš„ä¸åŒç‚¹æ˜¯ä»–ä»¬å„è‡ªçš„å¯åŠä¹‹èŒƒå›´ã€‚å‰è€…åªè¾¾åˆ°ç´§éšçš„åŒçº§å…ƒç´ ï¼Œåè€…æ‰©å±•äº†è¯¥è¾¾åˆ°è·Ÿéšå…¶çš„æ‰€æœ‰åŒçº§å…ƒç´ ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.lanqiao.cn/&quot;</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.lanqiao.cn/&quot;</span>&gt;</span>SHIYANLOU<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;.demo~a&#x27;</span>).css(&#123;</span><br><span class="javascript">          <span class="hljs-string">&#x27;font-size&#x27;</span>: <span class="hljs-string">&#x27;30px&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="../images/image-20210319005357146.png" alt=""></p><p>è¿™æ˜¯ sibling ï¼ˆ~ï¼‰æ•ˆæœ</p><p><img src="../images/image-20210319005548159.png" alt="image-20210319005548159"></p><p>è¿™æ˜¯ next (+) æ•ˆæœ</p><blockquote><p>åœ¨å±‚æ¬¡é€‰æ‹©å™¨ä¸­ï¼Œç¬¬ 1 ä¸ªå’Œç¬¬ 2 ä¸ªé€‰æ‹©å™¨æ¯”è¾ƒå¸¸ç”¨ï¼Œè€Œåé¢ä¸¤ä¸ªå› ä¸ºåœ¨ jQuery é‡Œé¢å¯ä»¥ç”¨æ›´åŠ ç®€å•çš„æ–¹æ³•æ¥ä»£æ›¿ï¼Œæ‰€ä»¥ä½¿ç”¨çš„å‡ ç‡ç›¸å¯¹ä¼šå°‘äº›ï¼š</p><ul><li>å¯ä»¥ä½¿ç”¨ next() æ–¹æ³•æ¥ä»£æ›¿ $(â€˜prev+nextâ€™) é€‰æ‹©å™¨ã€‚æ¯”å¦‚ <code>$(&quot;.one + div);</code> å’Œ <code>$(&quot;.one&quot;).next(&quot;div&quot;);</code> æ˜¯ç­‰ä»·çš„ã€‚</li><li>å¯ä»¥ä½¿ç”¨ nextAll() æ–¹æ³•æ¥ä»£æ›¿ $(â€˜prev~siblingsâ€™) é€‰æ‹©å™¨ã€‚æ¯”å¦‚ <code>$(&quot;#prev~div&quot;);</code>å’Œ<code>$(&quot;#prev&quot;).nextAll(&quot;div&quot;);</code> æ˜¯ç­‰ä»·çš„ã€‚</li><li>$(â€œ#prevâ€).siblings(â€œdivâ€) åŒ…å«æ‰€æœ‰åŒçº§çš„å…ƒç´ </li><li>$(â€˜prev~siblingsâ€™) åªåŒ…å«åé¢çš„</li></ul></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;prev&quot;</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">            $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">                <span class="hljs-comment">//é€‰å–#prevä¹‹åçš„æ‰€æœ‰åŒè¾ˆdivå…ƒç´ </span></span><br><span class="javascript">                $(<span class="hljs-string">&quot;#prev~div&quot;</span>).css(<span class="hljs-string">&quot;background&quot;</span>, <span class="hljs-string">&quot;#bbffaa&quot;</span>);</span><br><span class="javascript">                <span class="hljs-comment">//åŒä¸Š</span></span><br><span class="javascript">                $(<span class="hljs-string">&quot;#prev&quot;</span>).nextAll(<span class="hljs-string">&quot;div&quot;</span>).css(<span class="hljs-string">&quot;background&quot;</span>, <span class="hljs-string">&quot;#bbffaa&quot;</span>);</span><br><span class="javascript">                <span class="hljs-comment">//é€‰å–#prevæ‰€æœ‰çš„åŒè¾ˆdivå…ƒç´ ï¼Œæ— è®ºå‰åä½ç½® </span></span><br><span class="javascript">                $(<span class="hljs-string">&quot;#prev&quot;</span>).siblings(<span class="hljs-string">&quot;div&quot;</span>).css(&#123;</span><br><span class="javascript">                    <span class="hljs-string">&quot;width&quot;</span>: <span class="hljs-string">&quot;100px&quot;</span>,</span><br><span class="javascript">                    <span class="hljs-string">&quot;height&quot;</span>: <span class="hljs-string">&quot;100px&quot;</span>,</span><br><span class="javascript">                    <span class="hljs-string">&quot;border&quot;</span>: <span class="hljs-string">&quot;1px solid red&quot;</span></span><br>                &#125;)<br>            &#125;);<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="è¿‡æ»¤é€‰æ‹©å™¨"><a class="header-anchor" href="#è¿‡æ»¤é€‰æ‹©å™¨">Â¶</a>è¿‡æ»¤é€‰æ‹©å™¨</h1><h2 id="ï¼ˆ1ï¼‰åŸºæœ¬è¿‡æ»¤é€‰æ‹©å™¨"><a class="header-anchor" href="#ï¼ˆ1ï¼‰åŸºæœ¬è¿‡æ»¤é€‰æ‹©å™¨">Â¶</a>ï¼ˆ1ï¼‰åŸºæœ¬è¿‡æ»¤é€‰æ‹©å™¨</h2><blockquote><p>è¿‡æ»¤é€‰æ‹©å™¨ä¸»è¦æ˜¯é€šè¿‡ç‰¹å®šçš„è¿‡æ»¤è§„åˆ™æ¥ç­›é€‰å‡ºæ‰€éœ€è¦çš„ DOM å…ƒç´ ï¼Œè¿‡æ»¤è§„åˆ™ä¸ CSS ä¸­çš„ä¼ªç±»é€‰æ‹©å™¨è¯­æ³•ç›¸åŒï¼Œå³é€‰æ‹©å™¨éƒ½ä»¥ä¸€ä¸ªå†’å· <code>:</code> å¼€å¤´ï¼ŒæŒ‰ç…§ä¸åŒçš„è¿‡æ»¤è§„åˆ™ï¼Œè¿‡æ»¤é€‰æ‹©å™¨å¯ä»¥åˆ†ä¸ºï¼š</p><ul><li><p>åŸºæœ¬è¿‡æ»¤é€‰æ‹©å™¨</p></li><li><p>å†…å®¹è¿‡æ»¤é€‰æ‹©å™¨</p></li><li><p>å¯è§æ€§è¿‡æ»¤é€‰æ‹©å™¨</p></li><li><p>å±æ€§è¿‡æ»¤é€‰æ‹©å™¨</p></li><li><p>å­å…ƒç´ è¿‡æ»¤é€‰æ‹©å™¨</p></li><li><p>è¡¨å•å¯¹è±¡å±æ€§è¿‡æ»¤é€‰æ‹©å™¨</p></li><li><p><code>:animated Selector</code> é€‰æ‹©æ‰€æœ‰æ­£åœ¨æ‰§è¡ŒåŠ¨ç”»æ•ˆæœçš„å…ƒç´ .</p></li><li><p><code>:eq() Selector</code> åœ¨åŒ¹é…çš„é›†åˆä¸­é€‰æ‹©ç´¢å¼•å€¼ä¸º index çš„å…ƒç´ ã€‚</p></li><li><p><code>:even Selector</code> é€‰æ‹©ç´¢å¼•å€¼ä¸ºå¶æ•°çš„å…ƒç´ ï¼Œä» 0 å¼€å§‹è®¡æ•°ã€‚ ä¹Ÿå¯ä»¥æŸ¥çœ‹ odd.</p></li><li><p><code>:first Selector</code> é€‰æ‹©ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ã€‚</p></li><li><p><code>:focus Selector</code> é€‰æ‹©å½“å‰è·å–ç„¦ç‚¹çš„å…ƒç´ ã€‚</p></li><li><p><code>:gt() Selector</code> é€‰æ‹©åŒ¹é…é›†åˆä¸­æ‰€æœ‰å¤§äºç»™å®š indexï¼ˆç´¢å¼•å€¼ï¼‰çš„å…ƒç´ ã€‚</p></li><li><p><code>:header Selector</code> é€‰æ‹©æ‰€æœ‰æ ‡é¢˜å…ƒç´ ï¼Œåƒ h1, h2, h3 ç­‰.</p></li><li><p><code>:lang() Selector</code> é€‰æ‹©æŒ‡å®šè¯­è¨€çš„æ‰€æœ‰å…ƒç´ ã€‚</p></li><li><p><code>:last Selector</code> é€‰æ‹©æœ€åä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ã€‚</p></li><li><p><code>:lt() Selector</code> é€‰æ‹©åŒ¹é…é›†åˆä¸­æ‰€æœ‰ç´¢å¼•å€¼å°äºç»™å®š index å‚æ•°çš„å…ƒç´ ã€‚</p></li><li><p><code>:not() Selector</code> é€‰æ‹©æ‰€æœ‰å…ƒç´ å»é™¤ä¸åŒ¹é…ç»™å®šçš„é€‰æ‹©å™¨çš„å…ƒç´ ã€‚</p></li><li><p><code>:odd Selector</code> é€‰æ‹©ç´¢å¼•å€¼ä¸ºå¥‡æ•°å…ƒç´ ï¼Œä» 0 å¼€å§‹è®¡æ•°ã€‚åŒæ ·æŸ¥çœ‹å¶æ•° even.</p></li><li><p><code>:root Selector</code> é€‰æ‹©è¯¥æ–‡æ¡£çš„æ ¹å…ƒç´ ã€‚</p></li><li><p><code>:target Selector</code> é€‰æ‹©ç”±æ–‡æ¡£ URI çš„æ ¼å¼åŒ–è¯†åˆ«ç è¡¨ç¤ºçš„ç›®æ ‡å…ƒç´ ã€‚</p></li></ul></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html">ç¤ºä¾‹ï¼šé€‰å–æ‰€æœ‰çš„ input å…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ª input å…ƒç´ ï¼Œå¹¶è®¾ç½®é«˜åº¦ã€‚<br><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">text</span>=<span class="hljs-string">&quot;text&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">text</span>=<span class="hljs-string">&quot;textaera&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;input:first&#x27;</span>).css(&#123;</span><br><span class="javascript">          height: <span class="hljs-string">&#x27;300px&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ›´å¤šè¯¦ç»†çš„ï¼šçœ‹Doc</p><h2 id="ï¼ˆ2ï¼‰-å†…å®¹è¿‡æ»¤é€‰æ‹©å™¨"><a class="header-anchor" href="#ï¼ˆ2ï¼‰-å†…å®¹è¿‡æ»¤é€‰æ‹©å™¨">Â¶</a>ï¼ˆ2ï¼‰ å†…å®¹è¿‡æ»¤é€‰æ‹©å™¨</h2><p>å†…å®¹è¿‡æ»¤é€‰æ‹©å™¨çš„è¿‡æ»¤è§„åˆ™ä¸»è¦ä½“ç°åœ¨å®ƒæ‰€åŒ…å«çš„å­å…ƒç´ æˆ–æ–‡æœ¬å†…å®¹ä¸Šã€‚</p><ul><li><p><code>:contains() Selector</code> é€‰æ‹©æ‰€æœ‰åŒ…å«æŒ‡å®šæ–‡æœ¬çš„å…ƒç´ ã€‚</p></li><li><p><code>:empty Selector</code> é€‰æ‹©æ‰€æœ‰æ²¡æœ‰å­å…ƒç´ çš„å…ƒç´ ï¼ˆåŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹ï¼‰ã€‚</p></li><li><p><code>:has() Selector</code> é€‰æ‹©å…ƒç´ å…¶ä¸­è‡³å°‘åŒ…å«æŒ‡å®šé€‰æ‹©å™¨åŒ¹é…çš„ä¸€ä¸ªç§å…ƒç´ ã€‚</p></li><li><p><code>:parent Selector</code> é€‰æ‹©æ‰€æœ‰å«æœ‰å­å…ƒç´ æˆ–è€…æ–‡æœ¬çš„çˆ¶çº§å…ƒç´ ã€‚</p></li></ul><p>ç¤ºä¾‹ï¼šé€‰å–åŒ…å«æ–‡æœ¬â€œshiyanlouâ€çš„ div å…ƒç´ ï¼Œå¹¶è®¾ç½®å­—ä½“å¤§å°ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&quot;div:contains(&#x27;shiyanlou&#x27;)&quot;</span>).css(&#123;</span><br><span class="javascript">          <span class="hljs-string">&#x27;font-size&#x27;</span>: <span class="hljs-string">&#x27;30px&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ï¼ˆ3ï¼‰å¯è§æ€§è¿‡æ»¤é€‰æ‹©å™¨"><a class="header-anchor" href="#ï¼ˆ3ï¼‰å¯è§æ€§è¿‡æ»¤é€‰æ‹©å™¨">Â¶</a>ï¼ˆ3ï¼‰å¯è§æ€§è¿‡æ»¤é€‰æ‹©å™¨</h2><p>å¯è§æ€§è¿‡æ»¤é€‰æ‹©å™¨æ˜¯æ ¹æ®å…ƒç´ çš„å¯è§å’Œä¸å¯è§çŠ¶æ€æ¥é€‰æ‹©ç›¸åº”çš„å…ƒç´ ã€‚</p><ul><li><code>:hidden Selector</code> é€‰æ‹©æ‰€æœ‰éšè—çš„å…ƒç´ ã€‚</li><li><code>:visible Selector</code> é€‰æ‹©æ‰€æœ‰å¯è§çš„å…ƒç´ ã€‚</li></ul><p>æ³¨æ„ï¼šåœ¨å¯è§æ€§é€‰æ‹©å™¨ä¸­ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯é€‰æ‹©å™¨ :hidden,å®ƒä¸ä»…åŒ…æ‹¬æ ·å¼å±æ€§ display ä¸º â€œnoneâ€ çš„å…ƒç´ ï¼Œä¹ŸåŒ…æ‹¬æ–‡æœ¬éšè—åŸŸï¼ˆ<input type="hidden" />ï¼‰å’Œ visibility:hidden; ä¹‹ç±»çš„å…ƒç´ ã€‚</p><h2 id="ï¼ˆ4ï¼‰å±æ€§è¿‡æ»¤é€‰æ‹©å™¨"><a class="header-anchor" href="#ï¼ˆ4ï¼‰å±æ€§è¿‡æ»¤é€‰æ‹©å™¨">Â¶</a>ï¼ˆ4ï¼‰å±æ€§è¿‡æ»¤é€‰æ‹©å™¨</h2><p>å±æ€§è¿‡æ»¤é€‰æ‹©å™¨çš„è¿‡æ»¤è§„åˆ™æ˜¯é€šè¿‡å…ƒç´ çš„å±æ€§æ¥è·å–ç›¸åº”çš„å…ƒç´ ã€‚</p><ul><li><code>Attribute Contains Prefix Selector [name|=&quot;value&quot;]</code> é€‰æ‹©æŒ‡å®šå±æ€§å€¼ç­‰äºç»™å®šå­—ç¬¦ä¸²æˆ–ä»¥è¯¥å­—ç¬¦ä¸²ä¸ºå‰ç¼€ï¼ˆè¯¥å­—ç¬¦ä¸²åè·Ÿä¸€ä¸ªè¿å­—ç¬¦â€œ-â€ ï¼‰çš„å…ƒç´ ã€‚</li><li><code>Attribute Contains Selector [name*=&quot;value&quot;]</code> é€‰æ‹©æŒ‡å®šå±æ€§å…·æœ‰åŒ…å«ä¸€ä¸ªç»™å®šçš„å­å­—ç¬¦ä¸²çš„å…ƒç´ ã€‚ï¼ˆé€‰æ‹©ç»™å®šçš„å±æ€§æ˜¯ä»¥åŒ…å«æŸäº›å€¼çš„å…ƒç´ ï¼‰</li><li><code>Attribute Contains Word Selector [name~=&quot;value&quot;]</code> é€‰æ‹©æŒ‡å®šå±æ€§ç”¨ç©ºæ ¼åˆ†éš”çš„å€¼ä¸­åŒ…å«ä¸€ä¸ªç»™å®šå€¼çš„å…ƒç´ ã€‚</li><li><code>Attribute Ends With Selector [name$=&quot;value&quot;]</code> é€‰æ‹©æŒ‡å®šå±æ€§æ˜¯ä»¥ç»™å®šå€¼ç»“å°¾çš„å…ƒç´ ã€‚è¿™ä¸ªæ¯”è¾ƒæ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚</li><li><code>Attribute Equals Selector [name=&quot;value&quot;]</code> é€‰æ‹©æŒ‡å®šå±æ€§æ˜¯ç»™å®šå€¼çš„å…ƒç´ ã€‚</li><li><code>Attribute Not Equal Selector [name!=&quot;value&quot;]</code> é€‰æ‹©ä¸å­˜åœ¨æŒ‡å®šå±æ€§ï¼Œæˆ–è€…æŒ‡å®šçš„å±æ€§å€¼ä¸ç­‰äºç»™å®šå€¼çš„å…ƒç´ ã€‚</li><li><code>Attribute Starts With Selector [name^=&quot;value&quot;]</code> é€‰æ‹©æŒ‡å®šå±æ€§æ˜¯ä»¥ç»™å®šå­—ç¬¦ä¸²å¼€å§‹çš„å…ƒç´ </li><li><code>Has Attribute Selector [name]</code> é€‰æ‹©æ‰€æœ‰å…·æœ‰æŒ‡å®šå±æ€§çš„å…ƒç´ ï¼Œè¯¥å±æ€§å¯ä»¥æ˜¯ä»»ä½•å€¼ã€‚</li><li><code>Multiple Attribute Selector [name=&quot;value&quot;][name2=&quot;value2&quot;]</code> é€‰æ‹©åŒ¹é…æ‰€æœ‰æŒ‡å®šçš„å±æ€§ç­›é€‰å™¨çš„å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html">ç¤ºä¾‹ï¼šé€‰å–æ‹¥æœ‰ class å±æ€§çš„ div å…ƒç´ ï¼Œå¹¶è®¾ç½®å­—ä½“å¤§å°ã€‚<br><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shiyanlou&quot;</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;div[class]&#x27;</span>).css(&#123;</span><br><span class="javascript">          <span class="hljs-string">&#x27;font-size&#x27;</span>: <span class="hljs-string">&#x27;30px&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="5-å­å…ƒç´ è¿‡æ»¤é€‰æ‹©å™¨"><a class="header-anchor" href="#5-å­å…ƒç´ è¿‡æ»¤é€‰æ‹©å™¨">Â¶</a>(5) å­å…ƒç´ è¿‡æ»¤é€‰æ‹©å™¨</h2><ul><li><code>:first-child Selector</code> é€‰æ‹©æ‰€æœ‰çˆ¶çº§å…ƒç´ ä¸‹çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚</li><li><code>:first-of-type Selector</code> é€‰æ‹©æ‰€æœ‰ç›¸åŒçš„å…ƒç´ åç§°çš„ç¬¬ä¸€ä¸ªå…„å¼Ÿå…ƒç´ ã€‚</li><li><code>:last-child Selector</code> é€‰æ‹©æ‰€æœ‰çˆ¶çº§å…ƒç´ ä¸‹çš„æœ€åä¸€ä¸ªå­å…ƒç´ ã€‚</li><li><code>:last-of-type Selector</code> é€‰æ‹©çš„æ‰€æœ‰å…ƒç´ ä¹‹é—´å…·æœ‰ç›¸åŒå…ƒç´ åç§°çš„æœ€åä¸€ä¸ªå…„å¼Ÿå…ƒç´ ã€‚</li><li><code>:nth-child() Selector</code> é€‰æ‹©çš„ä»–ä»¬æ‰€æœ‰çˆ¶å…ƒç´ çš„ç¬¬ n ä¸ªå­å…ƒç´ ã€‚</li><li><code>:nth-last-child() Selector</code> é€‰æ‹©æ‰€æœ‰ä»–ä»¬çˆ¶å…ƒç´ çš„ç¬¬ n ä¸ªå­å…ƒç´ ã€‚è®¡æ•°ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹åˆ°ç¬¬ä¸€ä¸ªã€‚</li><li><code>:nth-last-of-type() Selector</code> é€‰æ‹©çš„æ‰€æœ‰ä»–ä»¬çš„çˆ¶çº§å…ƒç´ çš„ç¬¬ n ä¸ªå­å…ƒç´ ï¼Œè®¡æ•°ä»æœ€åä¸€ä¸ªå…ƒç´ åˆ°ç¬¬ä¸€ä¸ªã€‚</li><li><code>:nth-of-type() Selector</code> é€‰æ‹©åŒå±äºä¸€ä¸ªçˆ¶å…ƒç´ ä¹‹ä¸‹ï¼Œå¹¶ä¸”æ ‡ç­¾åç›¸åŒçš„å­å…ƒç´ ä¸­çš„ç¬¬ n ä¸ªã€‚</li><li><code>:only-child Selector</code> å¦‚æœæŸä¸ªå…ƒç´ æ˜¯å…¶çˆ¶å…ƒç´ çš„å”¯ä¸€å­å…ƒç´ ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šè¢«é€‰ä¸­ã€‚</li><li><code>:only-of-type Selector</code> é€‰æ‹©æ‰€æœ‰æ²¡æœ‰å…„å¼Ÿå…ƒç´ ï¼Œä¸”å…·æœ‰ç›¸åŒçš„å…ƒç´ åç§°çš„å…ƒç´ ã€‚</li></ul><p>ç¤ºä¾‹ï¼šé€‰å–ç±»åä¸º demo çš„å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­ div å…ƒç´ ï¼Œå¹¶è®¾ç½®å­—ä½“å¤§å°ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>SHIYANLOU<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;.demo div:first-child&#x27;</span>).css(&#123;</span><br><span class="javascript">          <span class="hljs-string">&#x27;font-size&#x27;</span>: <span class="hljs-string">&#x27;30px&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ï¼ˆ6ï¼‰è¡¨å•å¯¹è±¡å±æ€§è¿‡æ»¤é€‰æ‹©å™¨"><a class="header-anchor" href="#ï¼ˆ6ï¼‰è¡¨å•å¯¹è±¡å±æ€§è¿‡æ»¤é€‰æ‹©å™¨">Â¶</a>ï¼ˆ6ï¼‰è¡¨å•å¯¹è±¡å±æ€§è¿‡æ»¤é€‰æ‹©å™¨</h2><ul><li><code>:enabled Selector</code> é€‰æ‹©æ‰€æœ‰å¯ç”¨çš„ï¼ˆæ³¨ï¼šæœªè¢«ç¦ç”¨çš„å…ƒç´ ï¼‰å…ƒç´ ã€‚</li><li><code>:disabled Selector</code> é€‰æ‹©æ‰€æœ‰è¢«ç¦ç”¨çš„å…ƒç´ ã€‚</li><li><code>:checked Selector</code> åŒ¹é…æ‰€æœ‰å‹¾é€‰çš„å…ƒç´ ã€‚</li><li><code>:selected Selector</code> è·å– select å…ƒç´ ä¸­æ‰€æœ‰è¢«é€‰ä¸­çš„å…ƒç´ ã€‚</li></ul><p>ç¤ºä¾‹ï¼šé€‰æ‹©è¢«é€‰ä¸­å…ƒç´ ï¼Œå¹¶è®¾ç½®å®½åº¦ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">checked</span>=<span class="hljs-string">&quot;checked&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;input:checked&#x27;</span>).css(&#123;</span><br><span class="javascript">          width: <span class="hljs-string">&#x27;300px&#x27;</span>,</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ³¨ï¼šç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯é€‰æ‹©å™¨ä¸­çš„ç©ºæ ¼æ˜¯ä¸å®¹å¿½è§†çš„ï¼Œå¤šä¸€ä¸ªç©ºæ ¼æˆ–è€…å°‘ä¸€ä¸ªç©ºæ ¼ä¹Ÿè®¸å¾—åˆ°çš„ç»“æœå°±æˆªç„¶ä¸åŒäº†ï¼Œæ¯”å¦‚ <code>$('.test :hidden');</code> å¸¦ç©ºæ ¼çš„æ˜¯åä»£é€‰æ‹©å™¨ï¼Œè¡¨ç¤ºé€‰å– class ä¸º test çš„å…ƒç´ é‡Œé¢çš„éšè—å…ƒç´ ï¼Œè€Œ <code>$('.test:hidden');</code> ä¸å¸¦ç©ºæ ¼çš„æ˜¯è¿‡æ»¤é€‰æ‹©å™¨ï¼Œè¡¨ç¤ºé€‰å–éšè—çš„ class ä¸º test çš„å…ƒç´ ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JS</tag>
      
      <tag>jQuery</tag>
      
      <tag>front-end</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jQuery(2)</title>
    <link href="/2021/03/18/jQuery_2/"/>
    <url>/2021/03/18/jQuery_2/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç®€å•å…¥é—¨-jQuery-ï¼ˆ2ï¼‰"><a class="header-anchor" href="#ç®€å•å…¥é—¨-jQuery-ï¼ˆ2ï¼‰">Â¶</a>ç®€å•å…¥é—¨ jQuery ï¼ˆ2ï¼‰</h1><p>å°ä¼™ä¼´ä¸€èµ·åšprojectï¼Œ è‡ªå­¦jQuery è·Ÿä¸Šè¿›åº¦</p><p>ç¬¬äºŒéƒ¨åˆ†</p><p>æˆ‘è·³è¿‡äº†ä¸‰ä¸ªä¸æ˜¯å¤ªé‡è¦çš„ç« èŠ‚ï¼Œå¯ä»¥å»å®éªŒæ¥¼çœ‹å“¦ï¼Œé“¾æ¥åœ¨é‡Œé¢</p><span id="more"></span><p>ä»¥ä¸‹å†…å®¹å…¨éƒ¨æ¥æºï¼š</p><p><a href="https://www.lanqiao.cn/courses/22/">https://www.lanqiao.cn/courses/22/</a></p><p>[TOC]</p><h1 id="DOM-æ“ä½œ"><a class="header-anchor" href="#DOM-æ“ä½œ">Â¶</a>DOM æ“ä½œ</h1><p>ä½¿ç”¨ jQuery åœ¨æ–‡æ¡£æ ‘ä¸ŠæŸ¥æ‰¾èŠ‚ç‚¹éå¸¸å®¹æ˜“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¬¬äºŒä¸ªå®éªŒæ‰€å­¦çš„ jQuery é€‰æ‹©å™¨æ¥å®Œæˆã€‚</p><h2 id="ï¼ˆ1ï¼‰æŸ¥æ‰¾å…ƒç´ èŠ‚ç‚¹"><a class="header-anchor" href="#ï¼ˆ1ï¼‰æŸ¥æ‰¾å…ƒç´ èŠ‚ç‚¹">Â¶</a>ï¼ˆ1ï¼‰æŸ¥æ‰¾å…ƒç´ èŠ‚ç‚¹</h2><figure class="highlight js"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> $li = $(<span class="hljs-string">&#x27;ol li:eq(0)&#x27;</span>); <span class="hljs-comment">//è·å–&lt;ol&gt;é‡Œç¬¬ä¸€ä¸ª&lt;li&gt;èŠ‚ç‚¹</span><br><span class="hljs-keyword">var</span> li_txt = $li.text(); <span class="hljs-comment">//è·å–ç¬¬ä¸€ä¸ª&lt;li&gt;å…ƒç´ èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹</span><br>alert(li_txt); <span class="hljs-comment">//æ‰“å°æ–‡æœ¬å†…å®¹</span><br></code></pre></td></tr></table></figure><h2 id="ï¼ˆ2ï¼‰æŸ¥æ‰¾å±æ€§èŠ‚ç‚¹"><a class="header-anchor" href="#ï¼ˆ2ï¼‰æŸ¥æ‰¾å±æ€§èŠ‚ç‚¹">Â¶</a>ï¼ˆ2ï¼‰æŸ¥æ‰¾å±æ€§èŠ‚ç‚¹</h2><p>åˆ©ç”¨ jQuery é€‰æ‹©å™¨æŸ¥æ‰¾åˆ°éœ€è¦çš„å…ƒç´ ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>attr()</code> æ–¹æ³•æ¥è·å–å®ƒçš„å„ç§å±æ€§çš„å€¼ã€‚attr() æ–¹æ³•çš„å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸¤ä¸ªã€‚å½“å‚æ•°æ˜¯ä¸€ä¸ªæ—¶ï¼Œåˆ™æ˜¯è¦æŸ¥è¯¢çš„å±æ€§çš„åå­—ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> $para = $(<span class="hljs-string">&#x27;p&#x27;</span>); <span class="hljs-comment">//è·å–&lt;p&gt;èŠ‚ç‚¹</span><br><span class="hljs-keyword">var</span> p_txt = $para.attr(<span class="hljs-string">&#x27;title&#x27;</span>); <span class="hljs-comment">//è·å–&lt;p&gt;å…ƒç´ èŠ‚ç‚¹å±æ€§title</span><br>alert(p_txt); <span class="hljs-comment">//æ‰“å°titleå±æ€§å€¼</span><br></code></pre></td></tr></table></figure><blockquote><h2 id="ï¼ˆ1ï¼‰åˆ›å»ºå…ƒç´ èŠ‚ç‚¹"><a class="header-anchor" href="#ï¼ˆ1ï¼‰åˆ›å»ºå…ƒç´ èŠ‚ç‚¹">Â¶</a>ï¼ˆ1ï¼‰åˆ›å»ºå…ƒç´ èŠ‚ç‚¹</h2><p>åˆ›å»ºå…ƒç´ èŠ‚ç‚¹å¯ä»¥ç”¨ <code>$(html)</code> å‡½æ•°ã€‚$(html) æ–¹æ³•ä¼šæ ¹æ®ä¼ å…¥çš„ HTML æ ‡è®°å­—ç¬¦ä¸²ï¼Œåˆ›å»ºä¸€ä¸ª DOM å¯¹è±¡ï¼Œå¹¶å°†è¿™ä¸ª DOM å¯¹è±¡åŒ…è£…æˆä¸€ä¸ª jQuery å¯¹è±¡åè¿”å›ã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ª li å…ƒç´ å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> $li = $(<span class="hljs-string">&#x27;&lt;li&gt;&lt;/li&gt;&#x27;</span>); <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ª&lt;li&gt;å…ƒç´ </span><br></code></pre></td></tr></table></figure><p>å½“ç„¶ä¸Šé¢åªæ˜¯åˆ›å»ºå‡ºæ¥äº†ï¼Œè¦ä½¿ç”¨çš„è¯ï¼Œè¿˜éœ€è¦ä½¿ç”¨ <code>append()</code> ç­‰æ–¹æ³•å°†è¯¥å…ƒç´ æ’å…¥æ–‡æ¡£ä¸­ï¼ˆä¸‹é¢ä¼šè®²æ’å…¥èŠ‚ç‚¹ï¼‰ã€‚</p><h2 id="ï¼ˆ2ï¼‰åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹"><a class="header-anchor" href="#ï¼ˆ2ï¼‰åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹">Â¶</a>ï¼ˆ2ï¼‰åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹</h2><p>åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹å°±æ˜¯åœ¨åˆ›å»ºå…ƒç´ èŠ‚ç‚¹æ—¶ç›´æ¥æŠŠæ–‡æœ¬å†…å®¹å†™å‡ºæ¥ï¼Œç„¶åä½¿ç”¨ <code>append()</code> ç­‰æ–¹æ³•å°†å®ƒä»¬æ·»åŠ åˆ°æ–‡æ¡£ä¸­å°±å¯ä»¥äº†ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> $li = $(<span class="hljs-string">&#x27;&lt;li&gt;syl&lt;/li&gt;&#x27;</span>); <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ª&lt;li&gt;å…ƒç´ ,åŒ…æ‹¬å…ƒç´ èŠ‚ç‚¹å’Œæ–‡æœ¬èŠ‚ç‚¹ï¼Œâ€œsylâ€å°±æ˜¯åˆ›å»ºçš„æ–‡æœ¬èŠ‚ç‚¹</span><br></code></pre></td></tr></table></figure><h2 id="ï¼ˆ3ï¼‰åˆ›å»ºå±æ€§èŠ‚ç‚¹"><a class="header-anchor" href="#ï¼ˆ3ï¼‰åˆ›å»ºå±æ€§èŠ‚ç‚¹">Â¶</a>ï¼ˆ3ï¼‰åˆ›å»ºå±æ€§èŠ‚ç‚¹</h2><p>åˆ›å»ºå±æ€§èŠ‚ç‚¹å’Œåˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç›´æ¥åœ¨åˆ›å»ºå…ƒç´ èŠ‚ç‚¹æ—¶ä¸€èµ·åˆ›å»ºï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> $li = $(<span class="hljs-string">&quot;&lt;li title=&#x27;syl&#x27;&gt;syl&lt;/li&gt;&quot;</span>); <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ª&lt;li&gt;å…ƒç´ ,åŒ…æ‹¬å…ƒç´ èŠ‚ç‚¹å’Œæ–‡æœ¬èŠ‚ç‚¹å’Œå±æ€§èŠ‚ç‚¹ï¼Œâ€œsylâ€å°±æ˜¯åˆ›å»ºçš„æ–‡æœ¬èŠ‚ç‚¹,title=&#x27;syl&#x27; å°±æ˜¯åˆ›å»ºçš„å±æ€§èŠ‚ç‚¹</span><br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼šå°†æ–°å»ºçš„ li å…ƒç´ æ’å…¥åˆ° ul ä¸­</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>blue<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>white<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>red<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> li_obj = $(<span class="hljs-string">&#x27;&lt;li&gt;é»„è‰²&lt;/li&gt;&#x27;</span>);</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;ul&#x27;</span>).append(li_obj);</span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></blockquote><h2 id="1-DOM-æ’å…¥ç°æœ‰å…ƒç´ å†…"><a class="header-anchor" href="#1-DOM-æ’å…¥ç°æœ‰å…ƒç´ å†…">Â¶</a>(1) DOM æ’å…¥ç°æœ‰å…ƒç´ å†…:</h2><ul><li><code>.append()</code> åœ¨æ¯ä¸ªåŒ¹é…å…ƒç´ é‡Œé¢çš„æœ«å°¾å¤„æ’å…¥å‚æ•°å†…å®¹ã€‚</li><li><code>.appendTo()</code> å°†åŒ¹é…çš„å…ƒç´ æ’å…¥åˆ°ç›®æ ‡å…ƒç´ çš„æœ€åé¢ã€‚</li><li><code>.html()</code> è·å–é›†åˆä¸­ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„ HTML å†…å®¹ è®¾ç½®æ¯ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„ html å†…å®¹ã€‚</li><li><code>.prepend()</code> å°†å‚æ•°å†…å®¹æ’å…¥åˆ°æ¯ä¸ªåŒ¹é…å…ƒç´ çš„å‰é¢ï¼ˆå…ƒç´ å†…éƒ¨ï¼‰ã€‚</li><li><code>.prependTo()</code> å°†æ‰€æœ‰å…ƒç´ æ’å…¥åˆ°ç›®æ ‡å‰é¢ï¼ˆå…ƒç´ å†…ï¼‰ã€‚</li><li><code>.text()</code> å¾—åˆ°åŒ¹é…å…ƒç´ é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„åˆå¹¶æ–‡æœ¬ï¼ŒåŒ…æ‹¬ä»–ä»¬çš„åä»£è®¾ç½®åŒ¹é…å…ƒç´ é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„æ–‡æœ¬å†…å®¹ä¸ºæŒ‡å®šçš„æ–‡æœ¬å†…å®¹ã€‚</li></ul><h2 id="2-DOM-æ’å…¥ç°æœ‰å…ƒç´ å¤–"><a class="header-anchor" href="#2-DOM-æ’å…¥ç°æœ‰å…ƒç´ å¤–">Â¶</a>(2) DOM æ’å…¥ç°æœ‰å…ƒç´ å¤–:</h2><ul><li><code>.after()</code> åœ¨åŒ¹é…å…ƒç´ é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ åé¢æ’å…¥å‚æ•°æ‰€æŒ‡å®šçš„å†…å®¹ï¼Œä½œä¸ºå…¶å…„å¼ŸèŠ‚ç‚¹ã€‚</li><li><code>.before()</code> æ ¹æ®å‚æ•°è®¾å®šï¼Œåœ¨åŒ¹é…å…ƒç´ çš„å‰é¢æ’å…¥å†…å®¹ã€‚</li><li><code>.insertAfter()</code> åœ¨ç›®æ ‡å…ƒç´ åé¢æ’å…¥é›†åˆä¸­æ¯ä¸ªåŒ¹é…çš„å…ƒç´ (æ³¨ï¼šæ’å…¥çš„å…ƒç´ ä½œä¸ºç›®æ ‡å…ƒç´ çš„å…„å¼Ÿå…ƒç´ )ã€‚</li><li><code>.insertBefore()</code> åœ¨ç›®æ ‡å…ƒç´ å‰é¢æ’å…¥é›†åˆä¸­æ¯ä¸ªåŒ¹é…çš„å…ƒç´ (æ³¨ï¼šæ’å…¥çš„å…ƒç´ ä½œä¸ºç›®æ ‡å…ƒç´ çš„å…„å¼Ÿå…ƒç´ )ã€‚</li></ul><p>æ³¨ï¼šè¿™äº›æ’å…¥èŠ‚ç‚¹çš„æ–¹æ³•ä¸ä»…èƒ½å°†æ–°åˆ›å»ºçš„ DOM å…ƒç´ æ’å…¥åˆ°æ–‡æ¡£ä¸­ï¼Œä¹Ÿèƒ½å¯¹åŸæœ‰çš„ DOM å…ƒç´ è¿›è¡Œç§»åŠ¨ã€‚</p><p>æ’å…¥èŠ‚ç‚¹ç¤ºä¾‹ï¼šå°†æ–°å»ºçš„ li å…ƒç´ æ’å…¥åˆ° ul ä¸­</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>blue<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>white<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>red<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;&lt;li&gt;yellow&lt;/li&gt;&#x27;</span>).appendTo(<span class="hljs-string">&#x27;ul&#x27;</span>);</span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ç§»åŠ¨èŠ‚ç‚¹"><a class="header-anchor" href="#ç§»åŠ¨èŠ‚ç‚¹">Â¶</a>ç§»åŠ¨èŠ‚ç‚¹</h2><p>ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>blue<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>white<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>red<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>I like<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> $li = $(<span class="hljs-string">&#x27;ul li:eq(1)&#x27;</span>); <span class="hljs-comment">//è·å–&lt;ul&gt;èŠ‚ç‚¹ä¸­çš„ç¬¬2ä¸ª&lt;li&gt;å…ƒç´ èŠ‚ç‚¹</span></span><br><span class="javascript">        <span class="hljs-keyword">var</span> $h1 = $(<span class="hljs-string">&#x27;h1&#x27;</span>); <span class="hljs-comment">//è·å–&lt;h1&gt;èŠ‚ç‚¹</span></span><br><span class="javascript">        $h1.insertBefore($li); <span class="hljs-comment">//ç§»åŠ¨èŠ‚ç‚¹</span></span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1554967438062.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°" style="zoom: 67%;" /><h2 id="åˆ é™¤èŠ‚ç‚¹"><a class="header-anchor" href="#åˆ é™¤èŠ‚ç‚¹">Â¶</a>åˆ é™¤èŠ‚ç‚¹</h2><h3 id="detach-æ–¹æ³•"><a class="header-anchor" href="#detach-æ–¹æ³•">Â¶</a><code>detach()</code> æ–¹æ³•</h3><p>ä» DOM ä¸­å»æ‰æ‰€æœ‰åŒ¹é…çš„å…ƒç´ ã€‚<code>.detach()</code> æ–¹æ³•å’Œ <code>.remove()</code> ä¸€æ ·, é™¤äº† <code>.detach()</code> ä¿å­˜æ‰€æœ‰ jQuery æ•°æ®è€Œä¸”å’Œè¢«ç§»èµ°çš„å…ƒç´ ç›¸å…³è”ã€‚å½“éœ€è¦ç§»èµ°ä¸€ä¸ªå…ƒç´ ï¼Œä¸ä¹…åˆå°†è¯¥å…ƒç´ æ’å…¥ DOM æ—¶ï¼Œè¿™ç§æ–¹æ³•å¾ˆæœ‰ç”¨ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>blue<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;syl&quot;</span>&gt;</span>white<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>red<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;ul li&#x27;</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          alert($(<span class="hljs-built_in">this</span>).html());</span><br>        &#125;);<br><span class="javascript">        <span class="hljs-keyword">var</span> $li = $(<span class="hljs-string">&#x27;ul li:eq(1)&#x27;</span>).detach(); <span class="hljs-comment">//åˆ é™¤å…ƒç´ </span></span><br><span class="javascript">        $li.appendTo(<span class="hljs-string">&#x27;ul&#x27;</span>); <span class="hljs-comment">//é‡æ–°è¿½åŠ æ­¤å…ƒç´ ,å‘ç°å®ƒä¹‹å‰ç»‘å®šçš„äº‹ä»¶è¿˜åœ¨,å¦‚æœä½¿ç”¨remove()æ–¹æ³•åˆ é™¤å…ƒç´ çš„è¯,é‚£ä¹ˆå®ƒä¹‹å‰ç»‘å®šçš„äº‹ä»¶å°†å¤±æ•ˆ</span></span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="empty-æ–¹æ³•"><a class="header-anchor" href="#empty-æ–¹æ³•">Â¶</a>empty() æ–¹æ³•</h3><p>ä» DOM ä¸­ç§»é™¤é›†åˆä¸­åŒ¹é…å…ƒç´ çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚è¿™ä¸ªæ–¹æ³•ä¸æ¥å—ä»»ä½•å‚æ•°ã€‚è¿™ä¸ªæ–¹æ³•ä¸ä»…ç§»é™¤å­å…ƒç´ ï¼ˆå’Œå…¶ä»–åä»£å…ƒç´ ï¼‰ï¼ŒåŒæ ·ç§»é™¤å…ƒç´ é‡Œçš„æ–‡æœ¬ã€‚å› ä¸ºï¼Œæ ¹æ®è¯´æ˜ï¼Œå…ƒç´ é‡Œä»»ä½•æ–‡æœ¬å­—ç¬¦ä¸²éƒ½è¢«çœ‹åšæ˜¯è¯¥å…ƒç´ çš„å­èŠ‚ç‚¹ã€‚</p><h2 id="remove-æ–¹æ³•"><a class="header-anchor" href="#remove-æ–¹æ³•">Â¶</a>remove() æ–¹æ³•</h2><p>è¯·çœ‹Doc</p><p><a href="https://www.jquery123.com/category/manipulation/dom-removal/">jQuery ä¸­æ–‡å®˜ç½‘ DOM ç§»é™¤</a></p><h2 id="å¤åˆ¶èŠ‚ç‚¹"><a class="header-anchor" href="#å¤åˆ¶èŠ‚ç‚¹">Â¶</a>å¤åˆ¶èŠ‚ç‚¹</h2><h3 id="Clone"><a class="header-anchor" href="#Clone">Â¶</a>Clone()</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>blue<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;syl&quot;</span>&gt;</span>white<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>red<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;ul li&#x27;</span>).on(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          $(<span class="hljs-built_in">this</span>).clone().appendTo(<span class="hljs-string">&#x27;ul&#x27;</span>);</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="æ›¿æ¢èŠ‚ç‚¹"><a class="header-anchor" href="#æ›¿æ¢èŠ‚ç‚¹">Â¶</a>æ›¿æ¢èŠ‚ç‚¹</h2><ul><li><code>.replaceAll()</code> ç”¨é›†åˆçš„åŒ¹é…å…ƒç´ æ›¿æ¢æ¯ä¸ªç›®æ ‡å…ƒç´ ã€‚</li><li><code>.replaceWith()</code> ç”¨æä¾›çš„å†…å®¹æ›¿æ¢é›†åˆä¸­æ‰€æœ‰åŒ¹é…çš„å…ƒç´ å¹¶ä¸”è¿”å›è¢«åˆ é™¤å…ƒç´ çš„é›†åˆã€‚</li></ul><p>æ³¨ï¼š<code>.replaceAll()</code> å’Œ <code>.replaceWith()</code> åŠŸèƒ½ä¸€æ ·ï¼Œä½†æ˜¯ç›®æ ‡å’Œæºç›¸åã€‚</p><p>ç¤ºä¾‹ï¼šæ›¿æ¢ p å…ƒç´ </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;p&#x27;</span>).replaceWith(<span class="hljs-string">&#x27;&lt;p&gt;SHIYANLOU&lt;/p&gt;&#x27;</span>);</span><br><span class="javascript">        <span class="hljs-comment">//æ³¨é‡Šä»£ç ä¸ä¸Šé¢çš„ä»£ç ä½œç”¨ä¸€æ ·</span></span><br><span class="handlebars"><span class="xml">        // $(&quot;<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>SHIYANLOU<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>&quot;).replaceAll(&quot;p&quot;);</span></span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="Wrap-åŒ…è£¹èŠ‚ç‚¹"><a class="header-anchor" href="#Wrap-åŒ…è£¹èŠ‚ç‚¹">Â¶</a>Wrap() åŒ…è£¹èŠ‚ç‚¹</h2><blockquote><p>æ¯ä¸ªåŒ¹é…çš„å…ƒç´ å¤–å±‚åŒ…ä¸Šä¸€ä¸ª html å…ƒç´ ã€‚<code>.wrap()</code> å‡½æ•°å¯ä»¥æ¥å—ä»»ä½•å­—ç¬¦ä¸²æˆ–å¯¹è±¡ï¼Œå¯ä»¥ä¼ é€’ç»™ $() å·¥å‚å‡½æ•°æ¥æŒ‡å®šä¸€ä¸ª DOM ç»“æ„ã€‚è¿™ç§ç»“æ„å¯ä»¥åµŒå¥—äº†å¥½å‡ å±‚æ·±ï¼Œä½†åº”è¯¥åªåŒ…å«ä¸€ä¸ªæ ¸å¿ƒçš„å…ƒç´ ã€‚æ¯ä¸ªåŒ¹é…çš„å…ƒç´ éƒ½ä¼šè¢«è¿™ç§ç»“æ„åŒ…è£¹ã€‚è¯¥æ–¹æ³•è¿”å›åŸå§‹çš„å…ƒç´ é›†ï¼Œä»¥ä¾¿ä¹‹åä½¿ç”¨é“¾å¼æ–¹æ³•</p></blockquote><p>ä¾‹å­ï¼š</p><p>ç”¨ä¸€ä¸ªæœ‰è¾¹æ¡†çš„ DIV å°† P å…ƒç´ åŒ…è£¹èµ·æ¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;p&#x27;</span>).wrap(<span class="hljs-string">&quot;&lt;div style=&#x27;border:1px red solid;&#x27;&gt;&lt;/div&gt;&quot;</span>);</span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœä¸ºï¼š</p><p><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1554973461328.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p><p>ï¼ˆ2ï¼‰<code>wrapAll()</code> æ–¹æ³•</p><p>åœ¨æ‰€æœ‰åŒ¹é…å…ƒç´ å¤–é¢åŒ…ä¸€å±‚ HTML ç»“æ„ã€‚<code>.wrapAll()</code> å‡½æ•°å¯ä»¥æ¥å—ä»»ä½•å­—ç¬¦ä¸²æˆ–å¯¹è±¡ï¼Œå¯ä»¥ä¼ é€’ç»™ <code>\$()</code> å·¥å‚å‡½æ•°æ¥æŒ‡å®šä¸€ä¸ª DOM ç»“æ„ã€‚è¿™ç§ç»“æ„å¯ä»¥åµŒå¥—å¤šå±‚ï¼Œä½†æ˜¯æœ€å†…å±‚åªèƒ½æœ‰ä¸€ä¸ªå…ƒç´ ã€‚æ‰€æœ‰åŒ¹é…å…ƒç´ å°†ä¼šè¢«å½“ä½œæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œåœ¨è¿™ä¸ªæ•´ä½“çš„å¤–éƒ¨ç”¨æŒ‡å®šçš„ HTML ç»“æ„è¿›è¡ŒåŒ…è£¹ã€‚</p><p>æ³¨ï¼šè¯¥å…ƒç´ ä¼šå°†æ‰€æœ‰åŒ¹é…çš„å…ƒç´ ç”¨ä¸€ä¸ªå…ƒç´ æ¥åŒ…è£¹ï¼Œå®ƒä¸åŒäº <code>wrap()</code> æ–¹æ³•ï¼Œ<code>wrap()</code> æ–¹æ³•æ˜¯å°†æ‰€æœ‰çš„å…ƒç´ è¿›è¡Œå•ç‹¬çš„åŒ…è£¹ã€‚</p><p>ä¾‹å­ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;p&#x27;</span>).wrapAll(<span class="hljs-string">&quot;&lt;div style=&#x27;border:1px red solid;&#x27;&gt;&lt;/div&gt;&quot;</span>);</span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœä¸ºï¼š</p><p><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1554973617931.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p><p>ï¼ˆ3ï¼‰<code>wrapInner()</code> æ–¹æ³•</p><p>åœ¨åŒ¹é…å…ƒç´ é‡Œçš„å†…å®¹å¤–åŒ…ä¸€å±‚ç»“æ„ã€‚<code>.wrapInner()</code> å‡½æ•°å¯ä»¥æ¥å—ä»»ä½•å­—ç¬¦ä¸²æˆ–å¯¹è±¡ï¼Œå¯ä»¥ä¼ é€’ç»™ <code>$()</code> å·¥å‚å‡½æ•°æ¥æŒ‡å®šä¸€ä¸ª DOM ç»“æ„ã€‚è¿™ç§ç»“æ„å¯ä»¥åµŒå¥—å¤šå±‚ï¼Œä½†æ˜¯æœ€å†…å±‚åªèƒ½æœ‰ä¸€ä¸ªå…ƒç´ ã€‚æ¯ä¸ªåŒ¹é…å…ƒç´ çš„å†…å®¹éƒ½ä¼šè¢«è¿™ç§ç»“æ„åŒ…è£¹ã€‚<code>wrapInner()</code> æ–¹æ³•å°†æ¯ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ çš„å­å†…å®¹ï¼ˆåŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹ï¼‰ç”¨å…¶ä»–ç»“æ„åŒ–çš„æ ‡è®°åŒ…è£¹èµ·æ¥ã€‚</p><p>ä¾‹å­ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;p&#x27;</span>).wrapInner(<span class="hljs-string">&quot;&lt;div style=&#x27;border:1px red solid;&#x27;&gt;&lt;/div&gt;&quot;</span>);</span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœä¸ºï¼š</p><p><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1554973962583.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p><p>è¯¦æƒ…çœ‹ å®˜ç½‘å“ˆ</p><h2 id="å±æ€§æ“ä½œ"><a class="header-anchor" href="#å±æ€§æ“ä½œ">Â¶</a>å±æ€§æ“ä½œ</h2><p>ç¤ºä¾‹ï¼šè·å– P å…ƒç´ çš„ class å±æ€§å€¼ï¼Œå¹¶è¿½åŠ åˆ° div ä¸­</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shiyanlou-class&quot;</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> p_class = $(<span class="hljs-string">&#x27;p&#x27;</span>).attr(<span class="hljs-string">&#x27;class&#x27;</span>);</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;div&#x27;</span>).append(p_class);</span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1554974979373.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p><h3 id="ï¼ˆ2ï¼‰è®¾ç½®å…ƒç´ å±æ€§"><a class="header-anchor" href="#ï¼ˆ2ï¼‰è®¾ç½®å…ƒç´ å±æ€§">Â¶</a>ï¼ˆ2ï¼‰è®¾ç½®å…ƒç´ å±æ€§</h3><p>å¦‚æœéœ€è¦è®¾ç½®å…ƒç´ çš„å±æ€§å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>attr()</code> æ–¹æ³•ï¼Œä¸åŒçš„æ˜¯ï¼Œéœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°å³å±æ€§åç§°å’Œå¯¹åº”çš„å€¼ã€‚</p><p>ç¤ºä¾‹ï¼šè®¾ç½® div çš„ class å€¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><br>      .demo &#123;<br><span class="css">        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;</span><br><span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br>      &#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;div&#x27;</span>).attr(<span class="hljs-string">&#x27;class&#x27;</span>, <span class="hljs-string">&#x27;demo&#x27;</span>);</span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ï¼ˆ3ï¼‰åˆ é™¤å…ƒç´ å±æ€§"><a class="header-anchor" href="#ï¼ˆ3ï¼‰åˆ é™¤å…ƒç´ å±æ€§">Â¶</a>ï¼ˆ3ï¼‰åˆ é™¤å…ƒç´ å±æ€§</h3><p>ç”¨ <code>removeAttr()</code> æ–¹æ³•æ¥å®ç°åˆ é™¤å…ƒç´ å±æ€§ã€‚<code>.removeAttr()</code> æ–¹æ³•ä½¿ç”¨åŸç”Ÿçš„ JavaScript removeAttribute() å‡½æ•°,ä½†æ˜¯å®ƒçš„ä¼˜ç‚¹æ˜¯å¯ä»¥ç›´æ¥åœ¨ä¸€ä¸ª jQuery å¯¹è±¡ä¸Šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¹¶ä¸”å®ƒè§£å†³äº†è·¨æµè§ˆå™¨çš„å±æ€§åä¸åŒçš„é—®é¢˜ã€‚</p><p>ç¤ºä¾‹ï¼šåˆ é™¤ div çš„ class</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><br>      .demo &#123;<br><span class="css">        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;</span><br><span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br>      &#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;div&#x27;</span>).removeAttr(<span class="hljs-string">&#x27;class&#x27;</span>);</span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="æ ·å¼æ“ä½œ-Class"><a class="header-anchor" href="#æ ·å¼æ“ä½œ-Class">Â¶</a>æ ·å¼æ“ä½œ Class</h2><h3 id="attr"><a class="header-anchor" href="#attr">Â¶</a>attr()</h3><p>HTML ä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;syl&quot;</span>&gt;</span>å®éªŒæ¥¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å…¶ä¸­ class ä¹Ÿæ˜¯ p æ ‡ç­¾çš„å±æ€§ï¼Œå› æ­¤è·å– class å’Œ è®¾ç½® class éƒ½å¯ä»¥ä½¿ç”¨æˆ‘ä»¬å‰é¢æ‰€å­¦çš„ <code>attr()</code> æ–¹æ³•ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><br>            .syl &#123;<br><span class="css">                <span class="hljs-attribute">background-color</span>: red;</span><br>            &#125;<br>            .SYL &#123;<br><span class="css">                <span class="hljs-attribute">background-color</span>: yellow;</span><br>            &#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;syl&quot;</span>&gt;</span>å®éªŒæ¥¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">            $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">                    <span class="hljs-keyword">var</span>  p_class = $(<span class="hljs-string">&quot;p&quot;</span>).attr(<span class="hljs-string">&quot;class&quot;</span>);<span class="hljs-comment">//è·å–&lt;p&gt;å…ƒç´ çš„class</span></span><br><span class="javascript">                    <span class="hljs-built_in">console</span>.log(p_class);<span class="hljs-comment">//æ‰“å°å€¼ä¸ºsyl</span></span><br><span class="javascript">                    $(<span class="hljs-string">&quot;p&quot;</span>).attr(<span class="hljs-string">&quot;class&quot;</span>,<span class="hljs-string">&quot;SYL&quot;</span>);<span class="hljs-comment">//æ›¿æ¢classæ ·å¼ï¼Œå¦‚æœæƒ³è¦æ·»åŠ å¯ä»¥ä½¿ç”¨addClass()æ–¹æ³•</span></span><br>            &#125;);<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ï¼ˆ2ï¼‰è¿½åŠ æ ·å¼"><a class="header-anchor" href="#ï¼ˆ2ï¼‰è¿½åŠ æ ·å¼">Â¶</a>ï¼ˆ2ï¼‰è¿½åŠ æ ·å¼</h3><p><code>.addClass()</code> æ–¹æ³•ä¸ºæ¯ä¸ªåŒ¹é…çš„å…ƒç´ æ·»åŠ æŒ‡å®šçš„æ ·å¼ç±»åï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯è¿™ä¸ªæ–¹æ³•ä¸ä¼šæ›¿æ¢ä¸€ä¸ªæ ·å¼ç±»åã€‚å®ƒåªæ˜¯ç®€å•çš„æ·»åŠ ä¸€ä¸ªæ ·å¼ç±»ååˆ°å…ƒç´ ä¸Šã€‚</p><p>ç¤ºä¾‹ï¼šä¸º div è¿½åŠ ä¸€ä¸ªæ–°æ ·å¼ another</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><br>      .demo &#123;<br><span class="css">        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;</span><br><span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br>      &#125;<br><br>      .another &#123;<br><span class="css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;</span><br>      &#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;div&#x27;</span>).addClass(<span class="hljs-string">&#x27;another&#x27;</span>);</span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ³¨ï¼šä¸Šä¾‹ä¸­ div å…ƒç´ åŒæ—¶æ‹¥æœ‰ä¸¤ä¸ª class å€¼ï¼Œå³ â€œdemoâ€ å’Œ â€œanotherâ€ ï¼Œåœ¨ css ä¸­æœ‰ä»¥ä¸‹ä¸¤æ¡è§„å®šï¼š</p><ul><li>å¦‚æœç»™ä¸€ä¸ªå…ƒç´ æ·»åŠ äº†å¤šä¸ª class å€¼ï¼Œé‚£ä¹ˆå°±ç›¸å½“äºåˆå¹¶äº†å®ƒä»¬çš„æ ·å¼ã€‚</li><li>å¦‚æœæœ‰ä¸åŒçš„ class è®¾å®šäº†åŒä¸€æ ·å¼å±æ€§ï¼Œåˆ™åè€…è¦†ç›–å‰è€…ã€‚</li></ul><p>ï¼ˆ3ï¼‰ç§»é™¤æ ·å¼</p><p><code>.removeClass()</code> æ–¹æ³•ç§»é™¤é›†åˆä¸­æ¯ä¸ªåŒ¹é…å…ƒç´ ä¸Šä¸€ä¸ªï¼Œå¤šä¸ªæˆ–å…¨éƒ¨æ ·å¼ã€‚å¦‚æœä¸€ä¸ªæ ·å¼ç±»åä½œä¸ºä¸€ä¸ªå‚æ•°,åªæœ‰è¿™æ ·å¼ç±»ä¼šè¢«ä»åŒ¹é…çš„å…ƒç´ é›†åˆä¸­åˆ é™¤ ã€‚å¦‚æœæ²¡æœ‰æ ·å¼åä½œä¸ºå‚æ•°ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„æ ·å¼ç±»å°†è¢«ç§»é™¤ã€‚</p><p>ç¤ºä¾‹ï¼šç§»é™¤ div çš„ another æ ·å¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><br>      .demo &#123;<br><span class="css">        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;</span><br><span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br>      &#125;<br><br>      .another &#123;<br><span class="css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;</span><br>      &#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo another&quot;</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;div&#x27;</span>).removeClass(<span class="hljs-string">&#x27;another&#x27;</span>);</span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ³¨ï¼šå¦‚æœè¦åˆ é™¤å¤šä¸ª class å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ç©ºæ ¼çš„æ–¹å¼åˆ é™¤å¤šä¸ª class åï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$(<span class="hljs-string">&#x27;div&#x27;</span>).removeClass(<span class="hljs-string">&#x27;another demo&#x27;</span>); <span class="hljs-comment">//åˆ é™¤ another ç±»å’Œ demo ç±»</span><br></code></pre></td></tr></table></figure><p>å¦‚æœ <code>removeClass()</code> æ–¹æ³•ä¸å¸¦å‚æ•°ï¼Œå°±ä¼šå°† class çš„å€¼å…¨éƒ¨åˆ é™¤ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$(<span class="hljs-string">&#x27;div&#x27;</span>).removeClass(); <span class="hljs-comment">//åˆ é™¤&lt;div&gt;å…ƒç´ çš„æ‰€æœ‰class</span><br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰åˆ‡æ¢æ ·å¼"><a class="header-anchor" href="#ï¼ˆ4ï¼‰åˆ‡æ¢æ ·å¼">Â¶</a>ï¼ˆ4ï¼‰åˆ‡æ¢æ ·å¼</h4><p><code>.toggleClass()</code> åœ¨åŒ¹é…çš„å…ƒç´ é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ ä¸Šæ·»åŠ æˆ–åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæ ·å¼ç±»,å–å†³äºè¿™ä¸ªæ ·å¼ç±»æ˜¯å¦å­˜åœ¨æˆ–å€¼åˆ‡æ¢å±æ€§ã€‚å³ï¼šå¦‚æœå­˜åœ¨ï¼ˆä¸å­˜åœ¨ï¼‰å°±åˆ é™¤ï¼ˆæ·»åŠ ï¼‰ä¸€ä¸ªç±»ã€‚</p><p>ä¾‹å­ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><br>      .main &#123;<br><span class="css">        <span class="hljs-attribute">color</span>: red;</span><br>      &#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å®éªŒæ¥¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn1&quot;</span>&gt;</span>åˆ‡æ¢æ®µè½çš„ &quot;main&quot; ç±»<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;button&#x27;</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          $(<span class="hljs-string">&#x27;p&#x27;</span>).toggleClass(<span class="hljs-string">&#x27;main&#x27;</span>);</span><br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœä¸ºï¼š</p><p><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1555039666845.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p><h4 id="ï¼ˆ5ï¼‰åˆ¤æ–­æ˜¯å¦å«æœ‰æŸä¸ªæ ·å¼"><a class="header-anchor" href="#ï¼ˆ5ï¼‰åˆ¤æ–­æ˜¯å¦å«æœ‰æŸä¸ªæ ·å¼">Â¶</a>ï¼ˆ5ï¼‰åˆ¤æ–­æ˜¯å¦å«æœ‰æŸä¸ªæ ·å¼</h4><p><code>.hasClass()</code> å¯ä»¥ç”¨æ¥åˆ¤æ–­å…ƒç´ ä¸­æ˜¯å¦å«æœ‰æŸä¸ª classï¼Œå¦‚æœæœ‰åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚æ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$(<span class="hljs-string">&#x27;p&#x27;</span>).hasClass(<span class="hljs-string">&#x27;another&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="è·å–-HTMLï¼Œ-æ–‡æœ¬å’Œå€¼"><a class="header-anchor" href="#è·å–-HTMLï¼Œ-æ–‡æœ¬å’Œå€¼">Â¶</a>è·å– HTMLï¼Œ æ–‡æœ¬å’Œå€¼</h2><h3 id="ï¼ˆ1ï¼‰-html-æ–¹æ³•"><a class="header-anchor" href="#ï¼ˆ1ï¼‰-html-æ–¹æ³•">Â¶</a>ï¼ˆ1ï¼‰<code>.html()</code> æ–¹æ³•</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">     $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">       <span class="hljs-keyword">var</span> div_html = $(<span class="hljs-string">&#x27;div&#x27;</span>).html(); <span class="hljs-comment">//è·å–&lt;div&gt;å…ƒç´ çš„HTMLä»£ç </span></span><br><span class="javascript">       alert(div_html); <span class="hljs-comment">//æ‰“å°&lt;div&gt;å…ƒç´ çš„HTMLä»£ç </span></span><br>     &#125;);<br>   <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1555061984913.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p><p>è®¾ç½® div ä¸­çš„ HTML å†…å®¹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">     $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">       $(<span class="hljs-string">&#x27;div&#x27;</span>).html(<span class="hljs-string">&#x27;&lt;span&gt;shiyanlou&lt;/span&gt;&#x27;</span>);</span><br>     &#125;);<br>   <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ï¼ˆ2ï¼‰-text-æ–¹æ³•"><a class="header-anchor" href="#ï¼ˆ2ï¼‰-text-æ–¹æ³•">Â¶</a>ï¼ˆ2ï¼‰<code>.text()</code> æ–¹æ³•</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>       <span class="hljs-keyword">var</span> p_text = $(<span class="hljs-string">&#x27;div&#x27;</span>).text();<br>       alert(p_text);<br>     &#125;);<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>        $(<span class="hljs-string">&#x27;div&#x27;</span>).text(<span class="hljs-string">&#x27;shiyanlou&#x27;</span>);<br>      &#125;); <span class="hljs-comment">//è®¾ç½® å€¼</span><br></code></pre></td></tr></table></figure><h3 id="3-val-æ–¹æ³•"><a class="header-anchor" href="#3-val-æ–¹æ³•">Â¶</a>(3) .val() æ–¹æ³•</h3><p>ä¾‹å¦‚ï¼šè®¾ç½®æ–‡æœ¬æ¡†çš„å€¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;input&#x27;</span>).val(<span class="hljs-string">&#x27;shiyanlou&#x27;</span>);</span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1555062428371.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p><h2 id="éå†èŠ‚ç‚¹"><a class="header-anchor" href="#éå†èŠ‚ç‚¹">Â¶</a>éå†èŠ‚ç‚¹</h2><h3 id="ï¼ˆ1ï¼‰-children-æ–¹æ³•"><a class="header-anchor" href="#ï¼ˆ1ï¼‰-children-æ–¹æ³•">Â¶</a>ï¼ˆ1ï¼‰<code>.children()</code> æ–¹æ³•</h3><p>è·å¾—åŒ¹é…å…ƒç´ é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„å­å…ƒç´ ï¼Œé€‰æ‹©å™¨é€‰æ‹©æ€§ç­›é€‰ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>blue<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>white<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>red<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        <span class="hljs-keyword">var</span> ul_chlildList = $(<span class="hljs-string">&#x27;ul&#x27;</span>).children();</span><br><span class="javascript">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = ul_chlildList.length; i &lt; len; i++) &#123;</span><br>          alert(ul_chlildList[i].innerHTML);<br>        &#125;<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1555062497856.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p><h3 id="ï¼ˆ2ï¼‰-next-æ–¹æ³•"><a class="header-anchor" href="#ï¼ˆ2ï¼‰-next-æ–¹æ³•">Â¶</a>ï¼ˆ2ï¼‰<code>.next()</code> æ–¹æ³•</h3><p>ä¸è¯´äº†</p><h3 id="ï¼ˆ3ï¼‰-prev"><a class="header-anchor" href="#ï¼ˆ3ï¼‰-prev">Â¶</a>ï¼ˆ3ï¼‰<code>.prev()</code></h3><h3 id="ï¼ˆ4ï¼‰-siblings-æ–¹æ³•"><a class="header-anchor" href="#ï¼ˆ4ï¼‰-siblings-æ–¹æ³•">Â¶</a>ï¼ˆ4ï¼‰<code>.siblings()</code> æ–¹æ³•</h3><h3 id="ï¼ˆ5ï¼‰-parent-æ–¹æ³•"><a class="header-anchor" href="#ï¼ˆ5ï¼‰-parent-æ–¹æ³•">Â¶</a>ï¼ˆ5ï¼‰<code>.parent()</code> æ–¹æ³•</h3><p>ç»†èŠ‚çœ‹ å®éªŒæ¥¼</p><h2 id="CSS-DOM"><a class="header-anchor" href="#CSS-DOM">Â¶</a>CSS DOM</h2><p>CSS-DOM æŠ€æœ¯ç®€å•æ¥è¯´å°±æ˜¯è¯»å–å’Œè®¾ç½® style å¯¹è±¡çš„å„ç§å±æ€§ã€‚</p><h3 id="ï¼ˆ1ï¼‰-css"><a class="header-anchor" href="#ï¼ˆ1ï¼‰-css">Â¶</a>ï¼ˆ1ï¼‰<code>.css()</code></h3><p>ç¤ºä¾‹ï¼šè·å– div çš„èƒŒæ™¯é¢œè‰²</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><br><span class="css">      <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">        <span class="hljs-attribute">background-color</span>: red;</span><br>      &#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      alert($(<span class="hljs-string">&#x27;div&#x27;</span>).css(<span class="hljs-string">&#x27;background-color&#x27;</span>));</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœä¸ºï¼š</p><p><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1555062888673.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p><p>ç¤ºä¾‹ï¼šä¸º div è®¾ç½®è¾¹æ¡†å’Œé«˜åº¦å±æ€§</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-string">&#x27;div&#x27;</span>).css(&#123; <span class="hljs-attr">border</span>: <span class="hljs-string">&#x27;1px solid red&#x27;</span>, <span class="hljs-attr">height</span>: <span class="hljs-string">&#x27;100px&#x27;</span> &#125;);</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœä¸ºï¼š</p><p><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1555062949580.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p><p>å¯¹äºé€æ˜åº¦çš„è®¾ç½®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ opacity å±æ€§ï¼ŒjQuery å·²ç»å¤„ç†å¥½äº†å…¼å®¹æ€§çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$(<span class="hljs-string">&#x27;p&#x27;</span>).css(<span class="hljs-string">&#x27;opacity&#x27;</span>, <span class="hljs-string">&#x27;0.5&#x27;</span>);<br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰<code>.height()</code>ã€<code>.width()</code></p><ul><li><code>.height()</code> è·å–åŒ¹é…å…ƒç´ é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å½“å‰è®¡ç®—é«˜åº¦å€¼ æˆ– è®¾ç½®æ¯ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„é«˜åº¦å€¼ã€‚</li><li><code>.width()</code> ä¸ºåŒ¹é…çš„å…ƒç´ é›†åˆä¸­è·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„å½“å‰è®¡ç®—å®½åº¦å€¼ æˆ– ç»™æ¯ä¸ªåŒ¹é…çš„å…ƒç´ è®¾ç½®å®½åº¦ã€‚</li></ul><p>ç¤ºä¾‹ï¼šè·å– div çš„é«˜åº¦å’Œå®½åº¦</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><br>      .demo &#123;<br><span class="css">        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;</span><br><span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br>      &#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span>shiyanlou<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript">      alert($(<span class="hljs-string">&#x27;div&#x27;</span>).height() + <span class="hljs-string">&#x27; &amp;&amp; &#x27;</span> + $(<span class="hljs-string">&#x27;div&#x27;</span>).width());</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœä¸ºï¼š</p><p><img src="https://doc.shiyanlou.com/document-uid897174labid9222timestamp1555063004720.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p><p><code>height()</code> æ–¹æ³•ä¹Ÿèƒ½ç”¨æ¥è®¾ç½®å…ƒç´ çš„é«˜åº¦ï¼Œå¦‚æœä¼ é€’çš„æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œåˆ™é»˜è®¤å•ä½æ˜¯ pxï¼Œå¦‚æœè¦ç”¨å…¶ä»–å•ä½ï¼Œåˆ™å¿…é¡»ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">$(<span class="hljs-string">&quot;p&quot;</span>).height(<span class="hljs-number">520</span>);<span class="hljs-comment">//è®¾ç½®&lt;p&gt;å…ƒç´ çš„é«˜åº¦å€¼ä¸º520px</span><br>$(<span class="hljs-string">&quot;p&quot;</span>).height(10rem);<span class="hljs-comment">//è®¾ç½®&lt;p&gt;å…ƒç´ çš„é«˜åº¦å€¼ä¸º10rem</span><br></code></pre></td></tr></table></figure><p>è¿˜å¯ä»¥é€šè¿‡ css æ–¹æ³•æ¥è·å–é«˜åº¦å€¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$(element).css(<span class="hljs-string">&#x27;height&#x27;</span>);<br></code></pre></td></tr></table></figure><p>ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼š<code>css()</code> æ–¹æ³•è·å–çš„é«˜åº¦å€¼ä¸æ ·å¼çš„è®¾ç½®æœ‰å…³ï¼Œå¯èƒ½ä¼šå¾—åˆ° â€œautoâ€ ï¼Œä¹Ÿå¯èƒ½å¾—åˆ° â€œ10pxâ€ ä¹‹ç±»çš„å­—ç¬¦ä¸²ï¼Œè€Œ <code>height()</code> æ–¹æ³•è·å–çš„é«˜åº¦å€¼åˆ™æ˜¯å…ƒç´ åœ¨é¡µé¢ä¸­çš„å®é™…é«˜åº¦ï¼Œä¸æ ·å¼çš„è®¾ç½®æ— å…³ï¼Œè€Œä¸”ä¸å¸¦å•ä½ã€‚</p><p>åŒæ ·çš„ width æ–¹æ³•ä¹Ÿæ˜¯ç›¸ç±»ä¼¼çš„ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤çš„è®²è§£äº†ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œå°è¯•ä½¿ç”¨çœ‹çœ‹æ•ˆæœã€‚</p><p>ï¼ˆ3ï¼‰å…ƒç´ å®šä½</p><ul><li><code>offset()</code> æ–¹æ³•ï¼Œåœ¨åŒ¹é…çš„å…ƒç´ é›†åˆä¸­ï¼Œè·å–çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å½“å‰åæ ‡ï¼Œæˆ–è®¾ç½®æ¯ä¸€ä¸ªå…ƒç´ çš„åæ ‡ï¼Œåæ ‡ç›¸å¯¹äºæ–‡æ¡£ã€‚è¿™ä¸ªæ–¹æ³•ä¸æ¥å—ä»»ä½•å‚æ•°ã€‚<code>.offset()</code> æ–¹æ³•å…è®¸æˆ‘ä»¬æ£€ç´¢ä¸€ä¸ªå…ƒç´ ç›¸å¯¹äºæ–‡æ¡£ï¼ˆdocumentï¼‰çš„å½“å‰ä½ç½®ã€‚å’Œ <code>.position()</code> çš„å·®åˆ«åœ¨äºï¼š<code>.position()</code> æ˜¯ç›¸å¯¹äºç›¸å¯¹äºçˆ¶çº§å…ƒç´ çš„ä½ç§»ã€‚å½“é€šè¿‡å…¨å±€æ“ä½œï¼ˆç‰¹åˆ«æ˜¯é€šè¿‡æ‹–æ‹½æ“ä½œï¼‰å°†ä¸€ä¸ªæ–°çš„å…ƒç´ æ”¾ç½®åˆ°å¦ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å…ƒç´ çš„ä¸Šé¢æ—¶ï¼Œè‹¥è¦å–å¾—è¿™ä¸ªæ–°çš„å…ƒç´ çš„ä½ç½®ï¼Œé‚£ä¹ˆä½¿ç”¨ <code>.offset()</code> æ›´åˆé€‚ã€‚<code>.offset()</code> è¿”å›ä¸€ä¸ªåŒ…å« top å’Œ left å±æ€§çš„å¯¹è±¡ ã€‚æ¯”å¦‚ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> p_offset = $(<span class="hljs-string">&#x27;p&#x27;</span>).offset(); <span class="hljs-comment">//è·å–&lt;p&gt;å…ƒç´ çš„offset()</span><br><span class="hljs-keyword">var</span> p_offsetLeft = p_offset.left; <span class="hljs-comment">//è·å–å·¦åç§»</span><br><span class="hljs-keyword">var</span> p_offsetTop = p_offset.top; <span class="hljs-comment">//è·å–å³åç§»</span><br></code></pre></td></tr></table></figure><ul><li><code>position()</code> æ–¹æ³•ï¼Œè·å–åŒ¹é…å…ƒç´ ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„å½“å‰åæ ‡ï¼Œç›¸å¯¹äº offset parent çš„åæ ‡ã€‚(offset parent æŒ‡ç¦»è¯¥å…ƒç´ æœ€è¿‘çš„è€Œä¸”è¢«å®šä½è¿‡çš„ç¥–å…ˆå…ƒç´  ) <code>.position()</code> æ–¹æ³•å¯ä»¥å–å¾—å…ƒç´ ç›¸å¯¹äºçˆ¶å…ƒç´ çš„åç§»ä½ç½®ã€‚ä¸ <code>.offset()</code> ä¸åŒ, <code>.offset()</code> æ˜¯è·å¾—è¯¥å…ƒç´ ç›¸å¯¹äº documet çš„å½“å‰åæ ‡ å½“æŠŠä¸€ä¸ªæ–°å…ƒç´ æ”¾åœ¨åŒä¸€ä¸ªå®¹å™¨é‡Œé¢å¦ä¸€ä¸ªå…ƒç´ é™„è¿‘æ—¶ï¼Œç”¨ <code>.position()</code> æ›´å¥½ç”¨ã€‚<code>.position()</code>è¿”å›ä¸€ä¸ªåŒ…å« top å’Œ left å±æ€§çš„å¯¹è±¡ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> position = $(<span class="hljs-string">&#x27;p&#x27;</span>).position(); <span class="hljs-comment">//è·å–&lt;p&gt;å…ƒç´ çš„position()</span><br><span class="hljs-keyword">var</span> left = position.left; <span class="hljs-comment">//è·å–å·¦åç§»</span><br><span class="hljs-keyword">var</span> top = position.top; <span class="hljs-comment">//è·å–å³åç§»</span><br></code></pre></td></tr></table></figure><ul><li><code>scrollTop()</code> æ–¹æ³•å’Œ <code>scrollLeft()</code> æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯åˆ†åˆ«è·å–å…ƒç´ çš„æ»šåŠ¨æ¡è·é¡¶ç«¯çš„è·ç¦»å’Œè·å·¦ä¾§çš„è·ç¦»ã€‚å¦å¤–å¯ä»¥ä¸ºè¿™ä¸¤ä¸ªæ–¹æ³•æŒ‡å®šä¸€ä¸ªå‚æ•°ï¼Œæ§åˆ¶å…ƒç´ çš„æ»šåŠ¨æ¡æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®ã€‚æ¯”å¦‚ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> $p = $(<span class="hljs-string">&#x27;p&#x27;</span>);<br><span class="hljs-keyword">var</span> scrollTop = $p.scrollTop(); <span class="hljs-comment">//è·å–å…ƒç´ çš„æ»šåŠ¨æ¡è·é¡¶ç«¯çš„è·ç¦»</span><br><span class="hljs-keyword">var</span> scrollLeft = $p.scrollLeft(); <span class="hljs-comment">//è·å–å…ƒç´ çš„æ»šåŠ¨æ¡è·å·¦ä¾§çš„è·ç¦»</span><br>$(<span class="hljs-string">&#x27;textarea&#x27;</span>).scrollTop(<span class="hljs-number">300</span>); <span class="hljs-comment">//å…ƒç´ çš„å‚ç›´æ»šåŠ¨æ¡æ»šåŠ¨åˆ°æŒ‡å®šçš„ä½ç½®</span><br>$(<span class="hljs-string">&#x27;textarea&#x27;</span>).scrollLeft(<span class="hljs-number">300</span>); <span class="hljs-comment">//å…ƒç´ çš„æ¨ªå‘æ»šåŠ¨æ¡æ»šåŠ¨åˆ°æŒ‡å®šçš„ä½ç½®</span><br></code></pre></td></tr></table></figure><p>æƒ³è¦äº†è§£æ›´å¤šå…³äº css å±æ€§çš„æ“ä½œå¯ä»¥è®¿é—® <a href="https://www.jquery123.com/category/manipulation/style-properties/">jQuery ä¸­æ–‡å®˜ç½‘ CSS å±æ€§</a>ã€‚</p><h1 id="Event-and-Animation"><a class="header-anchor" href="#Event-and-Animation">Â¶</a>Event and Animation</h1><h1 id="Form"><a class="header-anchor" href="#Form">Â¶</a>Form</h1><h1 id="AJAX"><a class="header-anchor" href="#AJAX">Â¶</a>AJAX</h1><p>åˆ›å»º XMLHttpRequest å¯¹è±¡çš„è¯­æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¼šä½¿ç”¨ XMLHttpRequest å¯¹è±¡çš„ open() å’Œ send() æ–¹æ³•æ¥å°†è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ã€‚</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>open(method,url,async)</td><td>è§„å®šè¯·æ±‚çš„ç±»å‹ã€URL ä»¥åŠæ˜¯å¦å¼‚æ­¥å¤„ç†è¯·æ±‚ã€‚ method: è¯·æ±‚çš„ç±»å‹ï¼Œhttp çš„è¯·æ±‚ç±»å‹ï¼Œå¦‚ GETã€POSTã€‚ url: è¯·æ±‚çš„æœåŠ¡ç«¯è·¯å¾„ async: Boolean ç±»å‹ï¼Œtrue (å¼‚æ­¥å¤„ç†)ï¼Œfalse(åŒæ­¥å¤„ç†)</td></tr><tr><td>send(string)</td><td>å°†è¯·æ±‚å‘é€åˆ°æœåŠ¡ç«¯ã€‚ stringï¼šä»…ç”¨äº post è¯·æ±‚ã€‚</td></tr></tbody></table><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ GET è¯·æ±‚:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">xhr.open(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;index.html&#x27;</span>, <span class="hljs-literal">true</span>);<br>xhr.send();<br></code></pre></td></tr></table></figure><p>xhr æ˜¯æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ XMLHttpRequest å¯¹è±¡çš„å®ä¾‹ï¼Œé€šè¿‡è°ƒç”¨ XMLHttpRequest å¯¹è±¡çš„ open å’Œ send æ–¹æ³•ï¼Œå°±å®ç°äº†ä¸€ä¸ªç®€å•çš„å‘è·¯å¾„ <code>index.html</code> å‘èµ·çš„ GET è¯·æ±‚ï¼Œå¼‚æ­¥å¤„ç†ã€‚å› ä¸º GET è¯·æ±‚çš„ header ä¸­æ˜¯æ²¡æœ‰å‚æ•°çš„ï¼Œæ‰€ä»¥ send() é‡Œçš„å€¼ä¸º nullã€‚å¦‚æœæƒ³è¦åŠ ä¸Šå‚æ•°åˆ™éœ€è¦åœ¨è¯·æ±‚çš„ url åæ·»åŠ ï¼Œå¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">xhr.open(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;http://helloworld.com?id=1&#x27;</span>, <span class="hljs-string">&#x27;true&#x27;</span>);<br>xhr.send();<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ª post è¯·æ±‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">xhr.open(<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;index.php&#x27;</span>, <span class="hljs-literal">true</span>);<br>xhr.setRequestHeader(<span class="hljs-string">&#x27;Content-type&#x27;</span>, <span class="hljs-string">&#x27;application/x-www-form-urlencoded&#x27;</span>);<br>xhr.send(<span class="hljs-string">&#x27;name=syl&amp;id=2&#x27;</span>);<br></code></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æƒ³åƒ HTML è¡¨å•é‚£æ · POST æ•°æ®ï¼Œåˆ™éœ€è¦ä½¿ç”¨ setRequestHeader() æ¥æ·»åŠ  HTTP å¤´ï¼Œç„¶ååœ¨ send ä¸­è§„å®šè¦å‘é€çš„æ•°æ®ã€‚</p><p>åœ¨ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­ä¸­ï¼Œasync æˆ‘ä»¬éƒ½æ˜¯ç”¨äº† trueï¼Œä½¿ç”¨ true å’Œ false æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ç°åœ¨åªæ˜¯å‘é€äº†è¯·æ±‚ï¼Œä¸€ä¸ªå®Œæ•´çš„ AJAX è¿‡ç¨‹è¿˜è¦åŒ…æ‹¬æœåŠ¡ç«¯è¿”å›ä¿¡æ¯ï¼Œè¿™ä¸ªè¿‡ç¨‹çš„æ—¶é—´å°±æ˜¯æˆ‘ä»¬æ— æ³•ä¼°è®¡çš„äº†ï¼Œè°éƒ½æ²¡æ³•ç¡®å®šæœåŠ¡ç«¯ä¼šä»€ä¹ˆæ—¶å€™è¿”å›ä¿¡æ¯ï¼Œæ‰€ä»¥å¦‚æœ async è®¾ä¸º trueï¼Œå½“å‘é€äº† AJAX è¯·æ±‚åï¼Œjs æ— éœ€ç­‰å¾…æœåŠ¡ç«¯çš„å“åº”ï¼Œè€Œæ˜¯ä¼šå»å¤„ç†å…¶å®ƒçš„è„šæœ¬ï¼Œç­‰åˆ°æœåŠ¡ç«¯å“åº”å°±ç»ªçš„æ—¶å€™ï¼Œjs ä¼šè¿”å›å¯¹ AJAX ä¸­çš„å‰©ä½™éƒ¨åˆ†ä½œç›¸åº”å¤„ç†ï¼Œè¿™ä¸ªç›¸åº”å¤„ç†éœ€è¦é€šè¿‡ <code>onreadystatechange</code> æ¥å®ç°ï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸‹ä¸€éƒ¨åˆ†ä¸­ä»‹ç»ã€‚å¦‚æœ async è®¾ä¸º falseï¼Œå½“ç„¶ï¼Œä¸€èˆ¬ä¸æ¨èä½¿ç”¨ async = falseï¼Œå¦‚æœä½ è¿™ä¹ˆä½¿ç”¨äº†ï¼Œé‚£ä¹ˆè¯·ä¸è¦ç¼–å†™ <code>onreadystatechange</code> å‡½æ•°ï¼Œå¦åˆ™ js ä¼šæŒ‚èµ·åœ¨è¿™ä¸ªå‡½æ•°çš„åœ°æ–¹ï¼Œç­‰å¾…æœåŠ¡ç«¯å“åº”ï¼Œå¦‚æœæœåŠ¡ç«¯ç˜«ç—ªäº†ï¼Œé‚£ä¹ˆä½ çš„è„šæœ¬å°±ä¼šæ— æ³•è¿è¡Œã€‚æ‰€ä»¥å¦‚æœä½¿ç”¨äº† async = falseï¼ŒæŠŠå¤„ç†ä»£ç æ”¾åˆ° send() åé¢å³å¯ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">xhr.open(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;index.text&#x27;</span>, <span class="hljs-literal">false</span>);<br>xhr.send();<br><span class="hljs-built_in">console</span>.log(xhr.responseText);<br></code></pre></td></tr></table></figure><h2 id="æœåŠ¡å™¨å“åº”"><a class="header-anchor" href="#æœåŠ¡å™¨å“åº”">Â¶</a>æœåŠ¡å™¨å“åº”</h2><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†çš„å°±æ˜¯ <code>readyState == 4 &amp;&amp; status == 200</code> çš„æƒ…å†µï¼Œæ‰€ä»¥ onreadystatechange ï¼Œç”¨äºå¤„ç†æœåŠ¡ç«¯å“åº”çš„æ–¹æ³•ä¸€èˆ¬å†™æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (xhr.readyState == <span class="hljs-number">4</span> &amp;&amp; xhr.status == <span class="hljs-number">200</span>) &#123;<br>    <span class="hljs-comment">//code å‰ç«¯å¤„ç†ä»£ç </span><br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="jQuery-å°è£…-AJAX"><a class="header-anchor" href="#jQuery-å°è£…-AJAX">Â¶</a>jQuery å°è£… AJAX</h2><h2 id="3-1-1-load"><a class="header-anchor" href="#3-1-1-load">Â¶</a>3.1.1 load()</h2><p>load() æ˜¯ jQuery ä¸­æœ€ç®€å•å’Œå¸¸ç”¨çš„ AJAX æ–¹æ³•ï¼Œè¯­æ³•ä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">load(url, [data], [callback]);<br></code></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>è¯·æ±‚çš„ url åœ°å€</td></tr><tr><td>data(å¯é€‰)</td><td>Object</td><td>å‘é€åˆ°æœåŠ¡å™¨çš„æ•°æ®</td></tr><tr><td>callback(å¯é€‰)</td><td>Function</td><td>è¯·æ±‚å®Œæˆæ—¶çš„å›è°ƒå‡½æ•°ï¼Œæ— è®ºæˆåŠŸå¤±è´¥  function æœ‰ä¸‰ä¸ªé¢å¤–å‚æ•°  response åŒ…å«æ¥è‡ªè¯·æ±‚çš„ç»“æœæ•°æ® status åŒ…å«è¯·æ±‚çš„çŠ¶æ€ xhr åŒ…å« XMLHttpRequest å¯¹è±¡</td></tr></tbody></table><p>ä¸‹é¢è¿™ä¸ªç¤ºä¾‹åŠ è½½äº†ä¸€ä¸ª html æ–‡ä»¶åˆ°é¡µé¢ä¸­æ¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;result&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;#result&#x27;</span>).load(<span class="hljs-string">&#x27;https://042bc5dd9bf0.simplelab.cn/load.html&#x27;</span>);</span><br><span class="javascript">        <span class="hljs-comment">//ä¸Šé¢æ˜¯åœ¨å®éªŒæ¥¼ç¯å¢ƒé‡Œè¿è¡Œè¿‡çš„ urlï¼Œä½ éœ€è¦æ ¹æ®æ³¨æ„é‡Œçš„æ­¥éª¤ï¼Œå°†åç«¯è¿è¡Œèµ·æ¥åï¼ŒæŠŠweb æœåŠ¡é¡µé¢ä¸­çš„ url æ›¿æ¢åˆ°å¯¹åº”ä½ç½®ï¼Œä¸‹é¢ä¸€è¡Œæ³¨é‡Šç»™å‡ºäº†éœ€è¦æ›¿æ¢çš„ä½ç½®ã€‚</span></span><br><span class="javascript">        <span class="hljs-comment">//$(&quot;#result&quot;).load(&quot;éœ€è¦å°† web æœåŠ¡ä¸­ url ç²˜è´´åˆ°è¿™é‡Œ/load.html&quot;);</span></span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="3-1-2-get"><a class="header-anchor" href="#3-1-2-get">Â¶</a>3.1.2 $.get()</h2><p>get() é€šè¿‡è¿œç¨‹ HTTP GET è¯·æ±‚è½½å…¥ä¿¡æ¯ã€‚è¯­æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$(selector).get(url, data, success(response, status, xhr), dataType);<br></code></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>url</td><td>å¿…é¡»ï¼Œè¯·æ±‚çš„ url</td></tr><tr><td>data</td><td>å¯é€‰ï¼Œå‘é€åˆ°æœåŠ¡å™¨çš„æ•°æ®</td></tr><tr><td>success(response,status,xhr)</td><td>å¯é€‰ï¼Œå½“è¯·æ±‚æˆåŠŸæ—¶è¿è¡Œè¯¥æ–¹æ³• response-åŒ…å«æ¥è‡ªè¯·æ±‚çš„ç»“æœæ•°æ® status-åŒ…å«è¯·æ±‚çš„çŠ¶æ€ xhr-XMLHttpRequest å¯¹è±¡</td></tr><tr><td>dataType</td><td>å¯é€‰ï¼Œè§„å®šé¢„è®¡æ¥æ”¶æœåŠ¡ç«¯çš„å“åº”çš„æ•°æ®ï¼Œå¯èƒ½çš„ç±»å‹æœ‰ xmlã€htmlã€textã€scriptã€json</td></tr></tbody></table><p>get() æ–¹æ³•æ˜¯ ajax æ–¹æ³•çš„ç®€å†™å½¢å¼ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ä»‹ç» ajax æ–¹æ³•ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬ç»™å‡º get ç­‰ä»·çš„ ajax å½¢å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">$.ajax(&#123;<br>  type: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>  url: url,<br>  data: data,<br>  success: success,<br>  dataType: dataType,<br>&#125;);<br></code></pre></td></tr></table></figure><h2 id="3-1-3-post"><a class="header-anchor" href="#3-1-3-post">Â¶</a>3.1.3 $.post()</h2><p>post() æ–¹æ³•é€šè¿‡ HTTP POST è¯·æ±‚ä»æœåŠ¡å™¨è½½å…¥æ•°æ®ï¼Œpost æ–¹æ³•å’Œ get æ–¹æ³•æ¯”è¾ƒç±»ä¼¼ã€‚ä½†è¿˜æ˜¯å­˜åœ¨ä¸€äº›åŒºåˆ«ï¼š</p><ul><li>get è¯·æ±‚ä¼šå°†å‚æ•°è·Ÿåœ¨ url åé¢è¿›è¡Œä¼ é€’ï¼Œè€Œ post è¯·æ±‚çš„å‚æ•°åˆ™æ˜¯ä½œä¸º HTTP çš„æ¶ˆæ¯çš„å®ä½“å†…å®¹ï¼Œåœ¨ AJAX è¯·æ±‚ä¸­ï¼Œè¿™ç§åŒºåˆ«å¯¹ç”¨æˆ·æ˜¯ä¸å¯è§çš„ã€‚</li><li>get è¯·æ±‚å¯¹ä¼ è¾“çš„æ•°æ®æœ‰å¤§å°é™åˆ¶ï¼Œä¸€èˆ¬æ˜¯å°äº 2KB çš„ï¼Œè€Œ post ç†è®ºä¸Šæ²¡æœ‰é™åˆ¶ã€‚</li><li>get è¯·æ±‚çš„æ•°æ®ä¼šè¢«æµè§ˆå™¨ç¼“å­˜èµ·æ¥ï¼Œä¸€äº›æ•æ„Ÿæ•°æ®åŒæ ·ä¼šè¢«ç¼“å­˜ï¼Œè€Œ post åˆ™å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚</li></ul><p>è¯­æ³•:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">jQuery.post(url, data, success(data, textStatus, jqXHR), dataType);<br></code></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>url</td><td>å¿…é¡»ï¼Œè¯·æ±‚çš„ url</td></tr><tr><td>data</td><td>å¯é€‰ï¼Œå‘é€åˆ°æœåŠ¡å™¨çš„æ•°æ®</td></tr><tr><td>success(data,textStatus,jqXHR)</td><td>å¯é€‰ï¼Œå½“è¯·æ±‚æˆåŠŸæ—¶è¿è¡Œè¯¥æ–¹æ³• data-åŒ…å«æ¥è‡ªè¯·æ±‚çš„ç»“æœæ•°æ® textStatus-åŒ…å«è¯·æ±‚çš„çŠ¶æ€ jqXHR-XMLHttpRequest å¯¹è±¡</td></tr><tr><td>dataType</td><td>å¯é€‰ï¼Œè§„å®šé¢„è®¡æ¥æ”¶æœåŠ¡ç«¯çš„å“åº”çš„æ•°æ®ï¼Œå¯èƒ½çš„ç±»å‹æœ‰ xmlã€htmlã€textã€scriptã€json</td></tr></tbody></table><p>post() æ–¹æ³•æ˜¯ ajax æ–¹æ³•çš„ç®€å†™å½¢å¼ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ä»‹ç» ajax æ–¹æ³•ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬ç»™å‡º post ç­‰ä»·çš„ ajax å½¢å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">$.ajax(&#123;<br>  type: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>  url: url,<br>  data: data,<br>  success: success,<br>  dataType: dataType,<br>&#125;);<br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>click me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">      <span class="hljs-keyword">var</span> data = &#123;</span><br><span class="javascript">        name: <span class="hljs-string">&#x27;syl&#x27;</span>,</span><br>        id: 1,<br>      &#125;;<br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;#btn&#x27;</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-comment">//ä¸‹é¢æ˜¯åœ¨å®éªŒæ¥¼ç¯å¢ƒé‡Œè¿è¡Œè¿‡çš„ urlï¼Œä½ éœ€è¦æ ¹æ®æ³¨æ„é‡Œçš„æ­¥éª¤ï¼Œå°†åç«¯è¿è¡Œèµ·æ¥åï¼ŒæŠŠweb æœåŠ¡é¡µé¢ä¸­çš„ url æ›¿æ¢åˆ°å¯¹åº”ä½ç½®ï¼Œä¸‹é¢ä¸€è¡Œæ³¨é‡Šç»™å‡ºäº†éœ€è¦æ›¿æ¢çš„ä½ç½®ã€‚</span></span><br><span class="javascript">          <span class="hljs-comment">//&quot;éœ€è¦å°† web æœåŠ¡ä¸­ url ç²˜è´´åˆ°è¿™é‡Œ/posttest&quot;</span></span><br><span class="javascript">          $.post(<span class="hljs-string">&#x27;https://042bc5dd9bf0.simplelab.cn/posttest&#x27;</span>, data, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span></span></span><br>            result<br>          ) &#123;<br>            alert(result);<br>          &#125;);<br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>post å’Œ get æ–¹æ³•åªå­˜åœ¨æ–¹æ³•åçš„åŒºåˆ«ã€‚å¦å¤–ï¼Œå½“ load() æ–¹æ³•å¸¦æœ‰å‚æ•°ä¼ é€’çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨ POST æ–¹å¼å‘é€è¯·æ±‚ï¼Œå› æ­¤ï¼Œä¸Šè¿°ä»£ç æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ load æ¥æ”¹å†™ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>click me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;result&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">      <span class="hljs-keyword">var</span> data = &#123;</span><br><span class="javascript">        name: <span class="hljs-string">&#x27;syl&#x27;</span>,</span><br>        id: 1,<br>      &#125;;<br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;#btn&#x27;</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-comment">//ä¸‹é¢æ˜¯åœ¨å®éªŒæ¥¼ç¯å¢ƒé‡Œè¿è¡Œè¿‡çš„ urlï¼Œä½ éœ€è¦æ ¹æ®æ³¨æ„é‡Œçš„æ­¥éª¤ï¼Œå°†åç«¯è¿è¡Œèµ·æ¥åï¼ŒæŠŠweb æœåŠ¡é¡µé¢ä¸­çš„ url æ›¿æ¢åˆ°å¯¹åº”ä½ç½®ï¼Œä¸‹é¢ä¸€è¡Œæ³¨é‡Šç»™å‡ºäº†éœ€è¦æ›¿æ¢çš„ä½ç½®ã€‚</span></span><br><span class="javascript">          <span class="hljs-comment">//&quot;éœ€è¦å°† web æœåŠ¡ä¸­ url ç²˜è´´åˆ°è¿™é‡Œ/posttest&quot;</span></span><br><span class="javascript">          $(<span class="hljs-string">&#x27;#result&#x27;</span>).load(</span><br><span class="javascript">            <span class="hljs-string">&#x27;https://042bc5dd9bf0.simplelab.cn/posttest&#x27;</span>,</span><br>            data,<br><span class="javascript">            <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>&#123;</span><br>              alert(result);<br>            &#125;<br>          );<br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://doc.shiyanlou.com/courses/uid920932-20190517-1558077410132" alt="å›¾ç‰‡æè¿°"></p><h2 id="getScript"><a class="header-anchor" href="#getScript">Â¶</a>$.getScript()</h2><p>jQuery æä¾›äº† $.getScript() æ–¹æ³•æ¥ç›´æ¥åŠ è½½ js æ–‡ä»¶ï¼ŒåŠ è½½çš„ js æ–‡ä»¶ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚getScript é€šè¿‡ HTTP GET è¯·æ±‚è½½å…¥å¹¶æ‰§è¡Œ JavaScript æ–‡ä»¶ï¼Œè¯­æ³•ï¼š</p><p><code>jQuery.getScript(url, success(response, status));</code></p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>url</td><td>è¯·æ±‚çš„ url åœ°å€</td></tr><tr><td>success(response,status)</td><td>å¯é€‰ï¼Œè¯·æ±‚æˆåŠŸåæ‰§è¡Œçš„å›è°ƒå‡½æ•°ã€‚  response-åŒ…å«æ¥è‡ªè¯·æ±‚çš„ç»“æœæ•°æ® status-åŒ…å«è¯·æ±‚çš„çŠ¶æ€</td></tr></tbody></table><p>è¿™ä¸ªå‡½æ•°åŒæ ·æ˜¯ç®€å†™çš„ ajax å‡½æ•°ï¼Œç­‰ä»·äº</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">$.ajax(&#123;<br>  type: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>  url: url,<br>  dataType: <span class="hljs-string">&#x27;script&#x27;</span>,<br>  success: success,<br>&#125;);<br></code></pre></td></tr></table></figure><h2 id="getJSON"><a class="header-anchor" href="#getJSON">Â¶</a>$.getJSON()</h2><p>.getJson() ç”¨äºåŠ è½½ JSON æ–‡ä»¶ï¼Œä¸.getJson()ç”¨äºåŠ è½½JSONæ–‡ä»¶ï¼Œä¸.getScript() çš„ç”¨æ³•ç›¸åŒã€‚è¯­æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">jQuery.getJSON(url, data, success(data, status, xhr));<br></code></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>url</td><td>è¯·æ±‚çš„ url åœ°å€</td></tr><tr><td>data</td><td>å¯é€‰ï¼Œå‘é€åˆ°æœåŠ¡ç«¯çš„æ•°æ®</td></tr><tr><td>success(data,status,xhr)</td><td>å¯é€‰ï¼Œè¯·æ±‚æˆåŠŸåæ‰§è¡Œçš„å›è°ƒå‡½æ•°ã€‚  data-åŒ…å«æ¥è‡ªè¯·æ±‚çš„ç»“æœæ•°æ® status-åŒ…å«è¯·æ±‚çš„çŠ¶æ€ xhr-XMLHttpRequest å¯¹è±¡</td></tr></tbody></table><p>è¯¥å‡½æ•°è¿˜æ˜¯ç®€å†™çš„ Ajax å‡½æ•°ï¼Œç­‰ä»·äºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">$.ajax(&#123;<br>  type: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>  url: url,<br>  data: data,<br>  success: callback,<br>  dataType: json,<br>&#125;);<br></code></pre></td></tr></table></figure><p>å‘é€åˆ°æœåŠ¡å™¨çš„æ•°æ® data å¯ä½œä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²é™„åŠ åˆ° URL ä¹‹åã€‚ä¼ é€’ç»™ success çš„è¿”å›æ•°æ® data å¯ä»¥æ˜¯ js å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ json ç»“æ„çš„æ•°ç»„ï¼Œéœ€è¦ä½¿ç”¨ $.parseJSON() è¿›è¡Œè§£æã€‚</p><p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>click me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;#btn&#x27;</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-comment">//ä¸‹é¢æ˜¯åœ¨å®éªŒæ¥¼ç¯å¢ƒé‡Œè¿è¡Œè¿‡çš„ urlï¼Œä½ éœ€è¦æ ¹æ®æ³¨æ„é‡Œçš„æ­¥éª¤ï¼Œå°†åç«¯è¿è¡Œèµ·æ¥åï¼ŒæŠŠweb æœåŠ¡é¡µé¢ä¸­çš„ url æ›¿æ¢åˆ°å¯¹åº”ä½ç½®ï¼Œä¸‹é¢ä¸€è¡Œæ³¨é‡Šç»™å‡ºäº†éœ€è¦æ›¿æ¢çš„ä½ç½®ã€‚</span></span><br><span class="javascript">          <span class="hljs-comment">//&quot;éœ€è¦å°† web æœåŠ¡ä¸­ url ç²˜è´´åˆ°è¿™é‡Œ/getjsontest&quot;</span></span><br><span class="javascript">          $.getJSON(<span class="hljs-string">&#x27;https://042bc5dd9bf0.simplelab.cn/getjsontest&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span></span></span><br>            data<br>          ) &#123;<br>            alert(<br><span class="javascript">              <span class="hljs-keyword">typeof</span> data +</span><br><span class="javascript">                <span class="hljs-string">&#x27;\n&#x27;</span> +</span><br>                data[0].id +<br><span class="javascript">                <span class="hljs-string">&#x27; &#x27;</span> +</span><br>                data[0].name +<br><span class="javascript">                <span class="hljs-string">&#x27;\n&#x27;</span> +</span><br>                data[1].id +<br><span class="javascript">                <span class="hljs-string">&#x27; &#x27;</span> +</span><br>                data[1].name +<br><span class="javascript">                <span class="hljs-string">&#x27;\n&#x27;</span> +</span><br>                data[2].id +<br><span class="javascript">                <span class="hljs-string">&#x27; &#x27;</span> +</span><br>                data[2].name +<br><span class="javascript">                <span class="hljs-string">&#x27;\n&#x27;</span></span><br>            );<br>          &#125;);<br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ajax-options"><a class="header-anchor" href="#ajax-options">Â¶</a>$.ajax(options);</h2><p>æœ€åŸºæœ¬è¯­æ³•</p><p>ä¾‹å­ï¼š</p><p>ä¸‹é¢ç»™å‡ºä¸€ä¸ª ajax æ–¹æ³•çš„ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jquery-3.3.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Game<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>çŒœæ•°å­—<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ç­”æ¡ˆæ˜¯0-100ä¹‹é—´çš„æ•´æ•°<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;content&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>guess<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">      $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        $(<span class="hljs-string">&#x27;#btn&#x27;</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-comment">//ä¸‹é¢é¢æ˜¯åœ¨å®éªŒæ¥¼ç¯å¢ƒé‡Œè¿è¡Œè¿‡çš„ urlï¼Œä½ éœ€è¦æ ¹æ®æ³¨æ„é‡Œçš„æ­¥éª¤ï¼Œå°†åç«¯è¿è¡Œèµ·æ¥åï¼ŒæŠŠweb æœåŠ¡é¡µé¢ä¸­çš„ url æ›¿æ¢åˆ°å¯¹åº”ä½ç½®ï¼Œä¸‹é¢ä¸€è¡Œæ³¨é‡Šç»™å‡ºäº†éœ€è¦æ›¿æ¢çš„ä½ç½®ã€‚</span></span><br><span class="javascript">          <span class="hljs-comment">//&quot;éœ€è¦å°† web æœåŠ¡ä¸­ url ç²˜è´´åˆ°è¿™é‡Œ/ajaxtest&quot;</span></span><br><span class="javascript">          $.ajax(&#123;</span><br><span class="javascript">            type: <span class="hljs-string">&#x27;POST&#x27;</span>,</span><br><span class="javascript">            url: <span class="hljs-string">&#x27;https://042bc5dd9bf0.simplelab.cn/ajaxtest&#x27;</span>,</span><br>            data: &#123;<br><span class="javascript">              value: $(<span class="hljs-string">&#x27;#content&#x27;</span>).val(),</span><br>            &#125;,<br><span class="javascript">            dataType: <span class="hljs-string">&#x27;text&#x27;</span>,</span><br><span class="javascript">            beforeSend: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">xhr</span>) </span>&#123;</span><br><span class="javascript">              <span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/^((?!0)\d&#123;1,2&#125;|100)$/</span>;</span><br><span class="javascript">              <span class="hljs-keyword">if</span> (!reg.test(<span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">&#x27;#content&#x27;</span>).val()))) &#123;</span><br>                xhr.abort();<br><span class="javascript">                alert(<span class="hljs-string">&#x27;è¯·è¾“å…¥ 0 - 100 çš„æ­£æ•´æ•°ï¼&#x27;</span>);</span><br>              &#125;<br>            &#125;,<br><span class="javascript">            success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>&#123;</span><br>              alert(result);<br>            &#125;,<br><span class="javascript">            error: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">xhr, e</span>) </span>&#123;</span><br><span class="javascript">              <span class="hljs-built_in">console</span>.log(e);</span><br>            &#125;,<br>          &#125;);<br>        &#125;);<br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªçŒœæ•°å­—æ¸¸æˆï¼Œåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ•°å­—ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œå‘é€ ajax è¯·æ±‚ï¼Œç”±åç«¯å¤„ç†åè¿”å›ç»“æœï¼Œä¸‹é¢ç»™å‡ºåç«¯å¤„ç†éƒ¨åˆ†çš„é€»è¾‘ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">router.post(<span class="hljs-string">&#x27;/ajaxtest&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (req.body.value == <span class="hljs-number">23</span>) res.send(<span class="hljs-string">&#x27;æ­å–œä½ ï¼ŒçŒœå¯¹äº†ï¼&#x27;</span>);<br>  <span class="hljs-keyword">else</span> res.send(<span class="hljs-string">&#x27;ä¸æ˜¯ &#x27;</span> + req.body.value + <span class="hljs-string">&#x27; å“¦ï¼Œåˆ«ç°å¿ƒï¼Œå†æ¥å†å‰ï¼&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨ beforeSend å‚æ•°ä¸­è®¾ç½®äº†ä¸€ä¸ªæ­£åˆ™åˆ¤æ–­ï¼Œéœ€è¦æ»¡è¶³è¾“å…¥çš„æ•°å­—ä¸º 0-100 çš„æ•´æ•°æ‰ä¼šå‘é€ ajax è¯·æ±‚ï¼Œå¦åˆ™ä¼šè°ƒç”¨ abort() å–æ¶ˆè¿™æ¬¡ ajax è¯·æ±‚ã€‚</p><p><img src="https://doc.shiyanlou.com/courses/uid920932-20190517-1558077495738" alt="å›¾ç‰‡æè¿°"></p><p><img src="https://doc.shiyanlou.com/courses/uid920932-20190517-1558077514606" alt="å›¾ç‰‡æè¿°"></p><h2 id="å…¨å±€-AJAX-äº‹ä»¶-é‡è¦ï¼"><a class="header-anchor" href="#å…¨å±€-AJAX-äº‹ä»¶-é‡è¦ï¼">Â¶</a>å…¨å±€ AJAX äº‹ä»¶ é‡è¦ï¼</h2><p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼Œç”¨æˆ·ç‚¹å‡»äº†ä¸€ä¸ªæŒ‰é’®ï¼Œè€Œè¿™ä¸ªè¯·æ±‚éœ€è¦ç›¸å½“é•¿çš„æ—¶é—´æ‰èƒ½è¿”å›ï¼Œå¦‚æœé¡µé¢ä¸Šæ²¡æœ‰æç¤ºä¿¡æ¯ï¼Œç”¨æˆ·å¾ˆå®¹æ˜“å°±å¤±å»è€å¿ƒï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ ajax è¯·æ±‚æœ‰ä¸€ä¸ªå…¨å±€çš„ç›‘æ§ã€‚jQuery ä¸­ AJAX çš„å…¨å±€äº‹ä»¶æœ‰ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>ajaxStart(callback)</td><td>Ajax è¯·æ±‚å¼€å§‹æ—¶æ‰§è¡Œçš„å‡½æ•°</td></tr><tr><td>ajaxComplete(callback)</td><td>Ajax è¯·æ±‚å®Œæˆæ—¶æ‰§è¡Œçš„å‡½æ•°</td></tr><tr><td>ajaxError(callback)</td><td>Ajax è¯·æ±‚å‘ç”Ÿé”™è¯¯æ—¶æ‰§è¡Œçš„å‡½æ•°ï¼Œæ•æ‰åˆ°çš„é”™è¯¯å¯ä»¥ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ä¼ é€’</td></tr><tr><td>ajaxSend(callback)</td><td>Ajax è¯·æ±‚å‘é€å‰æ‰§è¡Œçš„å‡½æ•°</td></tr><tr><td>ajaxSuccess(callback)</td><td>Ajax è¯·æ±‚æˆåŠŸæ—¶æ‰§è¡Œçš„å‡½æ•°</td></tr><tr><td>ajaxStop(callback)</td><td>Ajax è¯·æ±‚ç»“æŸæ—¶æ‰§è¡Œçš„å‡½æ•°</td></tr></tbody></table><p>ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">$(<span class="hljs-string">&#x27;$test&#x27;</span>).ajaxStart(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  $(<span class="hljs-built_in">this</span>).show();<br>&#125;);<br>$(<span class="hljs-string">&#x27;$test&#x27;</span>).ajaxStop(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  $(<span class="hljs-built_in">this</span>).hide();<br>&#125;);<br></code></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦æŸä¸ª ajax è¯·æ±‚ä¸å—å…¨å±€äº‹ä»¶ç›‘å¬å½±å“ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ä½¿ç”¨ $.ajax æ—¶ï¼ŒæŠŠå‚æ•°ä¸­çš„ global è®¾ç½®ä¸º falseã€‚</p>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JS</tag>
      
      <tag>jQuery</tag>
      
      <tag>front-end</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JavaScript Hands On Notes</title>
    <link href="/2021/03/02/JsHandsOn/"/>
    <url>/2021/03/02/JsHandsOn/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="è¿™ç¯‡æ–‡å­—éšæ‰‹ç”¨æ¥è®°å½•-Js-å’Œ-Python-çš„åŒºåˆ«"><a class="header-anchor" href="#è¿™ç¯‡æ–‡å­—éšæ‰‹ç”¨æ¥è®°å½•-Js-å’Œ-Python-çš„åŒºåˆ«">Â¶</a>è¿™ç¯‡æ–‡å­—éšæ‰‹ç”¨æ¥è®°å½• Js å’Œ Python çš„åŒºåˆ«</h1><p>ä¸»è¦å†…å®¹æ¥è‡ªYouTube è§†é¢‘ <a href="https://www.youtube.com/watch?v=PkZNo7MFNFg">Learn JavaScript - Full Course for Beginners</a></p><span id="more"></span><p>[TOC]</p><h1 id="Declare-Variable-Declare-Variable"><a class="header-anchor" href="#Declare-Variable-Declare-Variable">Â¶</a>Declare Variable{Declare Variable}:</h1><h2 id="Declaring"><a class="header-anchor" href="#Declaring">Â¶</a>Declaring</h2><p><code>var</code> can be declared for any types.</p><p>Without the <code>var</code> , the variable will be a global variable, which can be created in a function and accessed from outside of function.</p><h1 id="Declare-function"><a class="header-anchor" href="#Declare-function">Â¶</a><strong>Declare function</strong>:</h1><p><code>function function(val)</code></p><h1 id="Comparison"><a class="header-anchor" href="#Comparison">Â¶</a><strong>Comparison</strong>:</h1><p><code>===, ==</code></p><p><code>===</code> will looks at type difference, <code>==</code> will not</p><p><code>!==</code> will checks types, <code>!=</code> will not</p><h1 id="Js-has-switch"><a class="header-anchor" href="#Js-has-switch">Â¶</a><strong>Js has switch</strong></h1><figure class="highlight javascript"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sequentialSizes</span>(<span class="hljs-params">val</span>)</span>&#123;<br><span class="hljs-keyword">var</span> answer = <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-keyword">switch</span>(val)&#123;<br>case1: <br>case2:<br>case3:<br>answer = <span class="hljs-string">&quot;low&quot;</span>;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br><span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:<br><span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:<br>anwer = <span class="hljs-string">&#x27;mid&#x27;</span>;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="null"><a class="header-anchor" href="#null">Â¶</a><strong>null</strong></h1><p>null is called <code>undefined</code></p><h1 id="Dictionary-Object"><a class="header-anchor" href="#Dictionary-Object">Â¶</a>Dictionary(Object)</h1><p>(the person in video called this â€œObjectâ€) <strong>è¿™é‡Œæ˜¯JSON Objectï¼</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> Dogs = &#123;<br><span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Camper&quot;</span>, <span class="hljs-comment">// called property: value</span><br><span class="hljs-string">&quot;legs&quot;</span>: <span class="hljs-number">4</span>,<br><span class="hljs-string">&quot;tails&quot;</span>:<span class="hljs-number">1</span>,<br><span class="hljs-string">&quot;friends&quot;</span>:[<span class="hljs-string">&quot;haha&quot;</span>]<br>&#125;;<br><br><span class="hljs-keyword">var</span> name = Dogs.name <span class="hljs-comment">// one way of accessing</span><br><span class="hljs-keyword">var</span> name = Dogs[name]<br><br><span class="hljs-comment">//Delete</span><br><span class="hljs-keyword">delete</span> Dogs.name<br><span class="hljs-keyword">delete</span> Dogs[name]<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkObj</span>(<span class="hljs-params">checkProp</span>)</span>&#123;  <span class="hljs-comment">//check if a object has a certain property</span><br><span class="hljs-keyword">if</span> (myObj.hasOwnProperty(checkProp))&#123;<br><span class="hljs-keyword">return</span> myObj[checkProp];<br>&#125; <span class="hljs-keyword">else</span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Not Found&quot;</span><br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>Object Exercise:</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs xquery">var<span class="hljs-built_in"> collection</span> = &#123;<br><span class="hljs-string">&quot;2548&quot;</span>:&#123;<br><span class="hljs-string">&quot;album&quot;</span>: <span class="hljs-string">&quot;slippery When Wet&quot;</span>,<br><span class="hljs-string">&quot;artist&quot;</span>: <span class="hljs-string">&quot;Bon Jovi&quot;</span>,<br><span class="hljs-string">&quot;tracks&quot;</span>: [<br><span class="hljs-string">&quot;Let it Rock&quot;</span>,<br><span class="hljs-string">&quot;You Give Love a Bad Name&quot;</span><br>]<br>&#125;ï¼Œ<br><span class="hljs-string">&quot;2523&quot;</span>:&#123;<br><span class="hljs-string">&quot;album&quot;</span>: <span class="hljs-string">&quot;slippery When Wet&quot;</span>,<br><span class="hljs-string">&quot;artist&quot;</span>: <span class="hljs-string">&quot;Bon Jovi&quot;</span>,<br><span class="hljs-string">&quot;tracks&quot;</span>: [<br><span class="hljs-string">&quot;Let it Rock&quot;</span>,<br><span class="hljs-string">&quot;You Give Love a Bad Name&quot;</span><br>]<br>&#125;<br>&#125;<br><br>var collectionCopy = JSON.parse(JSON.stringify<span class="hljs-built_in">(collection</span>))<br><span class="hljs-keyword">function</span> updateRecords<span class="hljs-built_in">(id</span>, prop, <span class="hljs-keyword">value</span>)&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">value</span> === <span class="hljs-string">&quot;&quot;</span>)&#123;<br><span class="hljs-keyword">delete</span><span class="hljs-built_in"> collection</span><span class="hljs-built_in">[id</span>][pro];<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(prop === <span class="hljs-string">&quot;tracks&quot;</span>)&#123;<br><span class="hljs-built_in">collection</span><span class="hljs-built_in">[id</span>][prop] =<span class="hljs-built_in"> collection</span><span class="hljs-built_in">[id</span>][prop] || [];<br><span class="hljs-built_in">collection</span><span class="hljs-built_in">[id</span>][prop].push(<span class="hljs-keyword">value</span>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-built_in">collection</span><span class="hljs-built_in">[id</span>][prop] = <span class="hljs-keyword">value</span>;<br>&#125;<br><span class="hljs-keyword">return</span><span class="hljs-built_in"> collection</span><br>&#125;<br><br>console.log(updateRecords(<span class="hljs-number">5439</span>, <span class="hljs-string">&quot;artist&quot;</span>, <span class="hljs-string">&quot;ABBA&quot;</span>));<br><br></code></pre></td></tr></table></figure><h1 id="Traverse-the-Array"><a class="header-anchor" href="#Traverse-the-Array">Â¶</a><strong>Traverse the Array</strong></h1><p>å’ŒJavaä¸€æ ·</p><h1 id="Math"><a class="header-anchor" href="#Math">Â¶</a><strong>Math</strong></h1><p>Js also has Math module</p><h1 id="convert-str-to-int"><a class="header-anchor" href="#convert-str-to-int">Â¶</a><strong>convert str to int</strong></h1><p><code>parseInt(str) </code></p><p><code>parseInt(str, 2)</code>  parse in base 2</p><h1 id="Easy-condition"><a class="header-anchor" href="#Easy-condition">Â¶</a><strong>Easy condition</strong></h1><p>condition? statement-if-true: statement-if-false</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkSign</span>(<span class="hljs-params">num</span>)</span>&#123;<br>retun num &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">&quot;positive&quot;</span> : num &lt;<span class="hljs-number">0</span> ? <span class="hljs-string">&quot;negative&quot;</span> : <span class="hljs-string">&quot;zero&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="let-var-const"><a class="header-anchor" href="#let-var-const">Â¶</a><strong>let, var, const</strong></h1><p><code>let</code> cannot be declared twice</p><p><code>let</code> is defined in scope. <code>var</code> is not</p><p><code>const</code> is read-only, cannot write</p><p><code>const SENTENCE = &quot;good!&quot;;</code></p><h1 id="Array"><a class="header-anchor" href="#Array">Â¶</a><strong>Array</strong></h1><p>array is immutable</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">freezeObj</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-meta">&quot;use strict&quot;</span>;<br><span class="hljs-keyword">const</span> MATH_CONSTANTS = &#123;<br>PI: <span class="hljs-number">3.14</span><br>&#125;;<br><br><span class="hljs-built_in">Object</span>.freeze(MATH_CONSTANTS); <span class="hljs-comment">//make object immutalbe </span><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Anonymous-function"><a class="header-anchor" href="#Anonymous-function">Â¶</a><strong>Anonymous function</strong></h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> magic = <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(); <span class="hljs-comment">// () means function, =&gt; means return </span><br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> myConcat = <span class="hljs-function">(<span class="hljs-params">arr1, arr2</span>) =&gt;</span> &#123;arr1.concat(arr2)&#125;;<br></code></pre></td></tr></table></figure><h1 id="Array-filter"><a class="header-anchor" href="#Array-filter">Â¶</a><strong>Array filter</strong></h1><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">arr.filter(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> <span class="hljs-built_in">Number</span>.isInteger(num) &amp;&amp; num &gt;<span class="hljs-number">0</span>).map(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x *x);<br></code></pre></td></tr></table></figure><h1 id="Default-parameter"><a class="header-anchor" href="#Default-parameter">Â¶</a><strong>Default parameter</strong></h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> increment = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-keyword">return</span> funtion <span class="hljs-function"><span class="hljs-title">increment</span>(<span class="hljs-params"><span class="hljs-built_in">number</span>, value =<span class="hljs-number">1</span> </span>)</span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">number</span>+value;<br>&#125;;<br>&#125;)();<br></code></pre></td></tr></table></figure><h1 id="Rest-argument"><a class="header-anchor" href="#Rest-argument">Â¶</a>Rest argument</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> num = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>retuurn <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">...args</span>)</span>&#123;<br>   <span class="hljs-keyword">return</span> args.reduce(<span class="hljs-function">(<span class="hljs-params">a,b</span>) =&gt;</span> a+b, <span class="hljs-number">0</span>);<br>   &#125;;<br>&#125;)();<br><span class="hljs-built_in">console</span>.log(sum(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>));<br><br></code></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">arr2</span> = [...arr1]<span class="hljs-comment">; \\ copy values</span><br><span class="hljs-attr">arr2</span> = arr1<span class="hljs-comment">; \\copy the same reference</span><br><br></code></pre></td></tr></table></figure><p><code>const [, , ... arr] = list</code> we can specify which index should be changed.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> greeting = <span class="hljs-string">&quot;Hello, my name is $&#123;person.name&#125;&quot;</span> \\inside curly brase is Js<br></code></pre></td></tr></table></figure><h1 id="Create-an-object"><a class="header-anchor" href="#Create-an-object">Â¶</a><strong>Create an object</strong></h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> createPerson = <span class="hljs-function">(<span class="hljs-params">name, age, gender</span>) =&gt;</span> (&#123;name, age, gender&#125;);<br><span class="hljs-built_in">console</span>.log(createPerson(<span class="hljs-string">&quot;Zodiac Hasbro&quot;</span>, <span class="hljs-number">56</span>, <span class="hljs-string">&quot;male&quot;</span>));<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> SpaceShuttle = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">targetPlanet</span>)</span>&#123;<br><span class="hljs-built_in">this</span>.targetPlanet = targetPlanet;<br>&#125;<br><span class="hljs-keyword">var</span> zeus = <span class="hljs-keyword">new</span> SpaceShuttle(<span class="hljs-string">&quot;Jupiter&quot;</span>);<br><br><span class="hljs-built_in">console</span>.log(zeus.targetPlanet);<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpaceShuttle</span></span>&#123;<br><span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">targetPlanet</span>)</span>&#123;<br><span class="hljs-built_in">this</span>.targetPlanet = targetPlanet;<br>&#125;<br>&#125; <br><span class="hljs-keyword">var</span> zeus = <span class="hljs-keyword">new</span> SpaceShuttle(<span class="hljs-string">&quot;Jupiter&quot;</span>);<br><br><span class="hljs-built_in">console</span>.log(zeus.targetPlanet);<br></code></pre></td></tr></table></figure><h1 id="Getter-Setter"><a class="header-anchor" href="#Getter-Setter">Â¶</a><strong>Getter, Setter</strong></h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs javascript"> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Book</span></span>&#123;<br><span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">author</span>)</span>&#123;<br>        <span class="hljs-built_in">this</span>._author = author;<br>    &#125;<br>    <span class="hljs-keyword">get</span> <span class="hljs-title">writer</span>()&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>._author;<br>    &#125;<br>    <span class="hljs-keyword">set</span> <span class="hljs-title">writer</span>(<span class="hljs-params">updatedAuthor</span>)&#123;<br>            <span class="hljs-built_in">this</span>._author = updatedAuthor;<br>        &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeClass</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Thermostat</span></span>&#123;<br>        <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">temp</span>)</span>&#123;<br>            <span class="hljs-built_in">this</span>._temp = <span class="hljs-number">5</span>/<span class="hljs-number">9</span> * (temp-<span class="hljs-number">32</span>);<br>        &#125;  <br>        <span class="hljs-keyword">get</span> <span class="hljs-title">temperature</span>()&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>._temp;<br>        &#125;<br>        <span class="hljs-keyword">set</span> <span class="hljs-title">temperature</span>(<span class="hljs-params">updatedTemp</span>)&#123;<br>            <span class="hljs-built_in">this</span>._temp = updatedTemp;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> Thermostat;<br>&#125;<br><br><span class="hljs-keyword">const</span> Thermostat = makeClass();<br><span class="hljs-keyword">const</span> thermos = <span class="hljs-keyword">new</span> Thermostat(<span class="hljs-number">76</span>);<br><br><span class="hljs-built_in">console</span>.log(thermos._temp)<br></code></pre></td></tr></table></figure><h1 id="export-import"><a class="header-anchor" href="#export-import">Â¶</a><strong>export, import</strong></h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123;capitalizeString&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./string_function&quot;</span><br><span class="hljs-keyword">const</span> cap = capitalizeString(<span class="hljs-string">&quot;hello!&quot;</span>);<br><br><span class="hljs-built_in">console</span>.log(cap)<br><br><span class="hljs-comment">//åœ¨å¦ä¸€ä¸ªæ–‡ä»¶é‡Œ</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> capitalizeString = <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> str.toUpperCase()<br><span class="hljs-comment">//capitalizeString æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œparameter æ˜¯str</span><br><br><span class="hljs-keyword">export</span>&#123;capitalizeString&#125;;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> foo = <span class="hljs-string">&#x27;bar&#x27;</span>;<br><br><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> capitalizing <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./where&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subtract</span>(<span class="hljs-params">x,y</span>)</span>&#123;<span class="hljs-keyword">return</span> x-y&#125;;<br><span class="hljs-keyword">import</span> subtract <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./where&quot;</span><br></code></pre></td></tr></table></figure><p>å·®ä¸å¤šè¿™å°±æ˜¯ä¸€äº›SyntaxåŒºåˆ«ï¼Œå…·ä½“è¦ç”¨å†æŸ¥æ‰¾å§ï¼ ğŸ˜„</p>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Briefly</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DivideConquer Reci4</title>
    <link href="/2021/02/24/DivideConquerReci4/"/>
    <url>/2021/02/24/DivideConquerReci4/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å¼€å§‹-Starting"><a class="header-anchor" href="#å¼€å§‹-Starting">Â¶</a>å¼€å§‹ Starting</h1><p>ç»å…¸é¢˜ç›®ï¼Œæœ€å¤§è‡ªåºå’Œ ï¼ŒRecitation 4</p><span id="more"></span><h1 id="é¢˜ç›®-Question"><a class="header-anchor" href="#é¢˜ç›®-Question">Â¶</a>é¢˜ç›® Question</h1><p>The Maximum Subarray Problem: Suppose you are given an array of n integers.  The integers may contain negative numbers. We want to find a (contiguous) subarray whose numbers sum to the most possible.  For example, if A= (âˆ’5,âˆ’6,3,âˆ’2,7,âˆ’6,2,1), then the maximum subarray would be(3,âˆ’2,7)because it sums to 8 and there is no other subarray that sums that high. Solve the problem using divide and conquer, in time O(nlogn).</p><h1 id="æƒ³æ³•-Thinking"><a class="header-anchor" href="#æƒ³æ³•-Thinking">Â¶</a>æƒ³æ³• Thinking</h1><p>Brutal force will consider all possible subarrays, there are $n^2$ subarrays, so the total time is $O(n^2)$ time.</p><p>There are three possible ways of locating the ideal (i,j) for the max array:</p><ol><li>in left half</li><li>in right half</li><li>in the region that cross the middle</li></ol><p>The third case is not a recursion process. All three cases return the max array for that part.(Correctness).</p><p>The termination should be when high == low, return (low, high, A[low ])</p><p>After returning three cases, we should do comparison between them.</p><p>The recursion should return (lower, higher, sum)</p><p>å’ŒReci ä¸€æ ·çš„è§£æ³•ï¼šä¸­æ–‡</p><p>æœ€ä¼˜è§£ä¹Ÿå¹¶éè¿™ä¸ª åˆ†æ²»æ³•ï¼Œä½†æ˜¯æ€ç»´æ¯”è¾ƒå·§å¦™</p><p><a href="https://leetcode-cn.com/problems/maximum-subarray/solution/zui-da-zi-xu-he-by-shi-yue-40/">https://leetcode-cn.com/problems/maximum-subarray/solution/zui-da-zi-xu-he-by-shi-yue-40/</a></p><h1 id="ç®—æ³•-Algorithm"><a class="header-anchor" href="#ç®—æ³•-Algorithm">Â¶</a>ç®—æ³• Algorithm</h1><figure class="highlight python"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></div></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxSubArray</span>(<span class="hljs-params">self, nums</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        :type nums: List[int]</span><br><span class="hljs-string">        :rtype: int</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">crossMaxSubArray</span>(<span class="hljs-params">nums, left, right, middle</span>):</span><br>            <span class="hljs-comment"># left part, summing</span><br>            leftSum = nums[middle]<br>            return_i = middle<br>            i = middle -<span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> i &gt;= left:<br>                currentSum = <span class="hljs-built_in">sum</span>(nums[i:middle+<span class="hljs-number">1</span>])  <span class="hljs-comment"># middle is included in this case</span><br>                <span class="hljs-keyword">if</span> currentSum &gt;leftSum:<br>                    leftSum = currentSum<br>                    return_i = i<br>                i-=<span class="hljs-number">1</span><br>            <br>            <span class="hljs-comment"># right part</span><br>            rightSum = nums[middle+<span class="hljs-number">1</span>]<br>            return_j = middle + <span class="hljs-number">1</span><br>            j = middle +<span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> j &lt;= right:<br>                currentSum = <span class="hljs-built_in">sum</span>(nums[middle+<span class="hljs-number">1</span>:j+<span class="hljs-number">1</span>]) <span class="hljs-comment"># j is not included in this case </span><br>                <span class="hljs-keyword">if</span> currentSum &gt; rightSum:<br>                    rightSum = currentSum<br>                    return_j = j<br>                j+=<span class="hljs-number">1</span><br>            <br>            <br>            totalSum = leftSum+rightSum<br>            <span class="hljs-keyword">return</span> (return_i, return_j, totalSum)<br>        <br>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">recursionMax</span>(<span class="hljs-params">nums, left, right</span>):</span><br>            <span class="hljs-comment"># base case</span><br>            <span class="hljs-keyword">if</span> (left == right):<br>                <span class="hljs-keyword">return</span> (left, right, nums[left])<br>            <br>            middle = (right+left)//<span class="hljs-number">2</span><br>            (leftLow, leftHigh, leftSum) = recursionMax(nums, left, middle)<br>            (rightLow, rightHigh, rightSum) = recursionMax(nums, middle+<span class="hljs-number">1</span>, right)<br>            (crossLow, crossHigh, crossSum) = crossMaxSubArray(nums, left, right, middle)<br>            <span class="hljs-comment"># comparison</span><br>            <span class="hljs-keyword">if</span> leftSum &gt;= rightSum <span class="hljs-keyword">and</span> leftSum &gt;= crossSum:<br>                <span class="hljs-keyword">return</span> (leftLow, leftHigh, leftSum)<br>            <span class="hljs-keyword">elif</span> rightSum &gt;= leftSum <span class="hljs-keyword">and</span> rightSum &gt;= crossSum:<br>                <span class="hljs-keyword">return</span> (rightLow, rightHigh, rightSum)<br>            <span class="hljs-keyword">elif</span> crossSum &gt;= leftSum <span class="hljs-keyword">and</span> crossSum &gt;= rightSum:<br>                <span class="hljs-keyword">return</span> (crossLow, crossHigh, crossSum)<br>            <br>        (_,_, s) = recursionMax(nums, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span>)<br>        <br>        <span class="hljs-keyword">return</span> s<br></code></pre></td></tr></table></figure><h1 id="è¿è¡Œæ—¶é—´-Run-time"><a class="header-anchor" href="#è¿è¡Œæ—¶é—´-Run-time">Â¶</a>è¿è¡Œæ—¶é—´ Run-time</h1><p>T(n) = 2T(n/2) + O(1) (comparing) + O(n)(cross) + O(1)(sum)</p><p>â€‹        = 2T(n/2) + O(n)</p><p>â€‹        = O(nlogn) by mastering theorem</p><h1 id="åæ€-Introspection"><a class="header-anchor" href="#åæ€-Introspection">Â¶</a>åæ€ Introspection</h1><p>å› ä¸ºåœ¨cross é‡Œé¢çš„boundary é‡Œé¢çš„bugæ”¹æ¥æ”¹å»ï¼Œå°±æ˜¯åšä¸å¥½ï¼Œä»”ç»†çœ‹äº†å¥½ä¸€ä¼šï¼ˆ1ä¸ªå°æ—¶ä»¥ä¸Šï¼‰æ‰å‘ç°æ˜¯ä¸€ä¸ªå°é”™è¯¯ã€‚æ‰€ä»¥ä¸€å®šè¦åœ¨è„‘å­é‡Œæƒ³å¥½boundary çš„æƒ…å†µï¼ï¼ï¼</p><p>ãŠã‚„ã™ã¿</p>]]></content>
    
    
    <categories>
      
      <category>algo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CMPSC465</tag>
      
      <tag>DivideAndConquer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Algo(0) Majority-Element</title>
    <link href="/2021/02/17/Algorithm-Majority-Element/"/>
    <url>/2021/02/17/Algorithm-Majority-Element/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å¼€å§‹"><a class="header-anchor" href="#å¼€å§‹">Â¶</a>å¼€å§‹</h1><p>æœ€è¿‘æƒ³å‡ºæ¥ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºæœ€è¿‘ä¹Ÿåœ¨å­¦ä¹ ä¸Šç®—æ³•è¯¾ï¼Œæ‰“ç®—æŠŠå­¦æ ¡å­¦äº†çš„ç®—æ³•è¯¾ç”¨åœ¨LeetCodeåˆ·é¢˜å½“ä¸­ã€‚</p><p>æˆ‘ç°åœ¨éƒ½è¿˜åœ¨æƒ³æ˜¯ç”¨ä¸­æ–‡å†™ä½œè¿˜æ˜¯è‹±æ–‡å†™ä½œæ–¹ä¾¿ä¸€äº›å‘¢ã€‚æœ€åè§‰å¾— æ™®é€šæ—¥å¸¸éƒ¨åˆ†ä¸»è¦ç”¨ä¸­æ–‡ï¼Œä»£ç æ–¹é¢çš„è¯ä¸­è‹±å¤¹æ‚çš„æƒ…å†µè‚¯å®šæ¯”è¾ƒå¤šã€‚</p><p>é‚£å…ˆæ¥ç¬¬ä¸€é¢˜å§ï¼Œæ­£å¥½è¿™é“é¢˜æ˜¯è¿™æ˜ŸæœŸ465ä½œä¸šçš„ä¸€é“é¢˜ï¼Œç”¨Divide and Conquer è§£ Majority element</p><p>åœ°å€ï¼š <a href="https://leetcode.com/problems/majority-element/">Majority Element  </a><span id="more"></span></p><h1 id="é¢˜ç›®"><a class="header-anchor" href="#é¢˜ç›®">Â¶</a>é¢˜ç›®</h1><h2 id="Leetcode-æè¿°"><a class="header-anchor" href="#Leetcode-æè¿°">Â¶</a>Leetcode æè¿°</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><pre><code class="hljs livecodeserver">Given <span class="hljs-keyword">an</span> array nums <span class="hljs-keyword">of</span> size n, <span class="hljs-literal">return</span> <span class="hljs-keyword">the</span> majority <span class="hljs-keyword">element</span>.<br><br>The majority <span class="hljs-keyword">element</span> is <span class="hljs-keyword">the</span> <span class="hljs-keyword">element</span> that appears more than âŒŠn / <span class="hljs-number">2</span>âŒ‹ times. You may assume that <span class="hljs-keyword">the</span> majority <span class="hljs-keyword">element</span> always exists <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> array.<br><br> <br><br>Example <span class="hljs-number">1</span>:<br><br>Input: nums = [<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>Output: <span class="hljs-number">3</span><br>Example <span class="hljs-number">2</span>:<br><br>Input: nums = [<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>]<br>Output: <span class="hljs-number">2</span><br> <br><br>Constraints:<br><br>n == nums.<span class="hljs-built_in">length</span><br><span class="hljs-number">1</span> &lt;= n &lt;= <span class="hljs-number">5</span> * <span class="hljs-number">104</span><br><span class="hljs-number">-231</span> &lt;= nums[i] &lt;= <span class="hljs-number">231</span> - <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h2 id="ä½œä¸šæè¿°"><a class="header-anchor" href="#ä½œä¸šæè¿°">Â¶</a>ä½œä¸šæè¿°</h2><p>(16 pts.) Divide-and-Conquer An array A[1â€¦n] is said to have a majority element if more than half of its entries are the same.</p><p>Given an array, the task is to design an efficient algorithm to tell whether the array has a majority element, and, if so, to find that element. The elements of the array are not necessarily from some ordered domain like the integers, and so there can be no comparisons of the form â€œis A[i] &gt; A[ j]?â€ (Think of the array elements as GIF files, say.) However you can answer questions of the form: â€œis A[i] = A[ j]?â€ in constant time.</p><p>Design a dynamic programming algorithm to solve this problem in O(nlogn) time. You may assume that n is a power of two. (Hint: the divide step is simple: just split the array into the left half and right half. How does knowing the majority elements (if they exist) of the two halves help you figure out the majority element in the whole array? Consider all the possibilities.)</p><ol><li><p>Describe the algorithm, either in pseudo-code or English.</p></li><li><p>Argue why your algorithm is correct</p></li><li><p>Do a running time analysis of your algorithm.</p></li></ol><h1 id="æƒ³æ³•"><a class="header-anchor" href="#æƒ³æ³•">Â¶</a>æƒ³æ³•</h1><p>ä½œä¸šä¸­å·²ç»æåˆ°æå‡ºä¸€ä¸ª $O(nlogn)$ æ—¶é—´çš„ç®—æ³•ï¼Œä¸”æåˆ°äº† æŠŠ array ç­‰åˆ†ä¸¤ä»½ï¼Œå³$T(n) = 2(T/2)+O(?)$ ï¼ŒIn worst case, if ?=n, the algorithm will be $T(n) = 2(T/2) + O(n)$ï¼Œ ç”¨master theoremï¼Œ å°±èƒ½å¾—åˆ° $O(nlogn)$.</p><p>æ­¤é¢˜çš„é‡ç‚¹åœ¨äºå¦‚æœå·²çŸ¥ ä¸¤ä¸ªpartæ˜¯å¦å·²ç»æœ‰meï¼ˆmajority elementï¼‰èƒ½ä¸èƒ½å¸®åŠ©å¾—åˆ°æ•´å—çš„majority elementã€‚ä¸€æ—¦æŠŠæ‰€æœ‰çš„caseæƒ³æ¸…æ¥šï¼Œé‚£ä¹ˆè¿™é“é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚</p><h1 id="ç®—æ³•-å¹¶éæœ€ä¼˜è§£"><a class="header-anchor" href="#ç®—æ³•-å¹¶éæœ€ä¼˜è§£">Â¶</a>ç®—æ³• (å¹¶éæœ€ä¼˜è§£)</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">majorityElement</span>(<span class="hljs-params">self, nums</span>):</span><br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        :type nums: List[int]</span><br><span class="hljs-string">        :rtype: int</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br><br>        leng = <span class="hljs-built_in">len</span>(nums);<br>        <span class="hljs-keyword">return</span> self.maj(nums, <span class="hljs-number">0</span>, leng);<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maj</span>(<span class="hljs-params">self, nums, left, right</span>):</span><br>        <span class="hljs-keyword">if</span>(right-left ==<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">return</span> nums[left];<br>        <span class="hljs-keyword">else</span>:<br>            x= self.maj(nums, left, (left+right)//<span class="hljs-number">2</span>);<br>            y= self.maj(nums, (left+right)//<span class="hljs-number">2</span>, right);<br><br>            <span class="hljs-keyword">if</span>(x==y):<br>                <span class="hljs-keyword">return</span> x;<br>            <span class="hljs-keyword">elif</span>(x!=y):<br>                <span class="hljs-keyword">return</span> x <span class="hljs-keyword">if</span> (nums[left:right+<span class="hljs-number">1</span>].count(x) &gt; nums[left:right+<span class="hljs-number">1</span>].count(y)) <span class="hljs-keyword">else</span> y;<br>            <span class="hljs-keyword">elif</span>(x == <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> y != <span class="hljs-literal">None</span>):<br>                <span class="hljs-keyword">return</span> y;<br>            <span class="hljs-keyword">elif</span>(y == <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> x != <span class="hljs-literal">None</span>):<br>                <span class="hljs-keyword">return</span> x;<br>                <br></code></pre></td></tr></table></figure><h1 id="åæ€"><a class="header-anchor" href="#åæ€">Â¶</a>åæ€</h1><ul><li>åšä½œä¸šæ—¶å€™è§‰å¾—å°±ä¸ç®€å•ï¼ˆå¥½å§å…¶å®è¿™æ˜¯ leetcode ç®€å•çº§åˆ«çš„é¢˜ç›®ï¼Œä¸»è¦è¿˜æ˜¯æˆ‘å¤ªèœäº† ğŸ˜¢ ï¼‰å› ä¸ºä½œä¸šå·²ç»è¦æ±‚ç”¨divide and conquer åšï¼Œæ‰€ä»¥æˆ‘ä¹Ÿæ˜¯ç›´æ¥æŠŠä½œä¸š çš„pseudo-code è½¬åŒ–æˆäº†pythonï¼ˆä¸€å¼€å§‹ç”¨java ä¸€ç›´ç¼–è¯‘å¤±è´¥ï¼Œç´¢æ€§æ¢æˆpythonå§ ğŸ˜‚ ï¼‰ã€‚</li><li>éœ€è¦ç†Ÿæ‚‰ å¹³å° å›ç­”ç•Œé¢çš„æ¥å£ï¼Œç‰¹åˆ«æ˜¯javaã€‚</li><li>éœ€è¦äº†è§£è§£é¢˜æ—¶å€™å…è®¸çš„åº“ã€‚</li></ul><p>ç¬¬ä¸€æ¬¡æäº¤leetcode çš„ ç»“æœï¼š</p><p><img src="/images/1.png" alt="1"></p><p>ğŸ˜‚ ä¸‡äº‹å¼€å¤´éš¾ï¼ŒåŠ æ²¹ï¼</p>]]></content>
    
    
    <categories>
      
      <category>algo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CMPSC465</tag>
      
      <tag>DivideAndConquer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Recent Update</title>
    <link href="/2021/02/12/Recent/"/>
    <url>/2021/02/12/Recent/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘æˆåŠŸæŠŠæœåŠ¡å™¨ä»WordPressè¿ç§»åˆ°Hexoæ¡†æ¶ä¸Šï¼Œè¯•è¯•çœ‹ä»€ä¹ˆæ•ˆæœ~</p><p>Moe-Counter Test:  name: post001</p><p><img src="https://count.getloli.com/get/@post002?theme=rule34" alt="post002"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hexo Intro</title>
    <link href="/2021/02/11/hexo-intro/"/>
    <url>/2021/02/11/hexo-intro/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Hexo-Simple-Command-Collection"><a class="header-anchor" href="#Hexo-Simple-Command-Collection">Â¶</a>Hexo Simple Command Collection</h1><figure class="highlight markdown"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><pre><code class="hljs markdown">hexo new  \\new post<br>hexo g -d   \\generate and push<br>hexo g -w  \\ watch for change<br>hexo s    \\start server<br>hexo pubish \\draft -&gt; post<br>hexo d  \\deploy<br>hexo migrate \\ è¦ç”¨<br>hexo clean<br><br></code></pre></td></tr></table></figure><h1 id="Font-Matter"><a class="header-anchor" href="#Font-Matter">Â¶</a>Font Matter</h1><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-keyword">Uses</span> the Yamo grammer<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>è¿‘å†µ</title>
    <link href="/2021/01/18/%E8%BF%91%E5%86%B5/"/>
    <url>/2021/01/18/%E8%BF%91%E5%86%B5/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ¸…ç†äº†å¾ˆå¤šåƒåœ¾è¯„è®ºï¼Œä¿®æ”¹äº†è¯„è®ºå¯è§æ–¹å¼</p><p>æœ€è¿‘æ²¡æœ‰æ›´æ–°ï¼Œä½†æ˜¯æ¥ä¸‹æ¥åº”è¯¥ä¼šæœ‰æ›´æ–°</p><p>æœ‰æ›´æ¢æœåŠ¡å™¨æä¾›å•†å¯èƒ½ï¼ŒåŠ å¿«æµ·å¤–è®¿é—®é€Ÿåº¦</p>]]></content>
    
    
    <categories>
      
      <category>uncategorized</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ©ç”¨Flaskæ­å»ºä¸€ä¸ªç®€æ˜“çš„åšå®¢ç½‘ç«™(5)</title>
    <link href="/2020/08/29/%E5%88%A9%E7%94%A8flask%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%995/"/>
    <url>/2020/08/29/%E5%88%A9%E7%94%A8flask%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%995/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬åœ°åŒ–æ—¶é—´</p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Flask-Moment æ¥å¯¹ç½‘ç«™åšç»Ÿä¸€çš„æ—¶é—´è§„åˆ’</p><p>åœ¨å®‰è£…å’Œimport è¿› <a href="http://app.py">app.py</a> åï¼Œé€šè¿‡ Moment(app) æ³¨å†Œ</p><p>è¿›å…¥æ¨¡æ¿æ–‡ä»¶Â <code>templates/base.html</code>Â ï¼Œæ·»åŠ </p><p><code>&#123;% block scripts %&#125;`  `&#123;&#123; super() &#125;&#125;`  `&#123;&#123; moment.include_moment() &#125;&#125;`  `&#123;&#123; moment.lang('zh-cn') &#125;&#125;`  `&#123;% endblock %&#125;</code></p><p>è¿™æ ·æˆ‘ä»¬å°±åœ¨æ¨¡æ¿ä¸ŠæˆåŠŸæ³¨å†Œäº†Moment</p><p><a href="http://xn--front-ln2hk9lejk64bfn9ahl7f1ip.py">å†è¿›å…¥è§†å›¾æ–‡ä»¶front.py</a> import datetime</p><figure class="highlight angelscript"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>():</span><br>    <span class="hljs-string">&#x27;&#x27;&#x27;ç½‘ç«™é¦–é¡µ&#x27;&#x27;&#x27;</span><br>    date_time = datetime.utcnow() <span class="hljs-comment"># Moment é»˜è®¤è‡ªåŠ¨è½¬æ¢åˆ°å½“åœ°æ—¶åŒº</span><br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;index.html&#x27;</span>, date_time=date_time)<br></code></pre></td></tr></table></figure><p>å†åœ¨indexä¸‹ æŠŠdate_time ä¼ å…¥index.html, é€šè¿‡å·²ç»æ³¨å†Œäº†çš„Moment èƒ½å¸®åŠ©æˆ‘ä»¬æ˜¾ç¤ºå½“å‰æ—¶é—´</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-header&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰æ—¶é—´ï¼š</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">moment</span>(<span class="hljs-name">date_time</span>).format(<span class="hljs-name">&#x27;LLL&#x27;</span>) &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¸Šæ¬¡åˆ·æ–°é¡µé¢æ—¶é—´æ®ç°åœ¨ï¼š</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">moment</span>(<span class="hljs-name">date_time</span>).fromNow(<span class="hljs-name">refresh</span>=<span class="hljs-literal">True</span>) &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>å†å¯åŠ¨åº”ç”¨ï¼Œå°±èƒ½è‡ªåŠ¨æ˜¾ç¤ºå‡ºæ—¶é—´å’Œæ—¥æœŸå•¦</p>]]></content>
    
    
    <categories>
      
      <category>uncategorized</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>äºŒå‰æ ‘ç›¸å…³é—®é¢˜</title>
    <link href="/2020/07/22/%E5%85%88%E5%BA%8F%E4%B8%AD%E5%BA%8F%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    <url>/2020/07/22/%E5%85%88%E5%BA%8F%E4%B8%AD%E5%BA%8F%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>åŒã˜äººãªã‚“ã¦ ã„ãªã„ã‹ã‚‰<br>å­¤ç‹¬ã§ã‚‚ä»•æ–¹ãªã„<br>ã§ã‚‚ã­<br>ã‚ã è´ããŸã„ æ­Œã‚„ å£°ãŒ ã‚ã‚‹ã‹ã‚‰<br>ã‚ã æ³£ã„ãŸ æœ¬ã‚„ æ˜ ç”»ãŒ ã‚ã‚‹ã‹ã‚‰<br>ã‚ãªãŸã‚’å°ãå¤¢ã¯ã‚ã‚‹<br>ç…§ã‚‰ã—ã¦ã¿ã›ã¦ã‚ˆ</p><p>Gifts</p></blockquote><p><strong><em>Gifts - Superfly</em></strong></p><h3 id="Pre-In-Post-Traversal-Successor-Node-Serialization-Origami"><a class="header-anchor" href="#Pre-In-Post-Traversal-Successor-Node-Serialization-Origami">Â¶</a><em>Pre,In,Post Traversal; Successor Node; Serialization; Origami</em></h3><p>ä¹‹å‰å‡ å‘¨éƒ½æ¯”è¾ƒæ°´ï¼Œç®—æ³•è¯¾ä¹Ÿæ²¡æœ‰æ€ä¹ˆè®¤çœŸçœ‹ï¼Œæœ€è¿‘å¾—æ…¢æ…¢è¡¥ä¸Šæ¥<br>ä¸è¿‡ç®—æ³•è¿˜æ˜¯éœ€è¦æ…¢æ…¢æ¶ˆåŒ–ï¼ŒçœŸæ­£ç†è§£å¹¶ä¸”å¤šå¤ä¹ ï¼Œè®°å¿†æ‰æ˜¯æœ€é‡è¦çš„</p><h3 id="DFS"><a class="header-anchor" href="#DFS">Â¶</a><em>DFS</em></h3><p>Pre, In, Post Order Traversal in Binary Tree</p><figure class="highlight python"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, data</span>):</span><br>        self.value = data<br>        self.left = <span class="hljs-literal">None</span><br>        self.right = <span class="hljs-literal">None</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">preOrderTraversal</span>(<span class="hljs-params">head</span>):</span><br>    <span class="hljs-keyword">if</span> head <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    print(head.value + <span class="hljs-string">&#x27; &#x27;</span>)<br>    preOrderTraversal(head.left)<br>    preOrderTraversal(head.right)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inOrderTraversal</span>(<span class="hljs-params">head</span>):</span><br>    <span class="hljs-keyword">if</span> head <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    inOrderTraversal(head.left)<br>    print(head.value + <span class="hljs-string">&#x27; &#x27;</span>)<br>    inOrderTraversal(head.right)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">postOrderTraversal</span>(<span class="hljs-params">head</span>):</span><br>    <span class="hljs-keyword">if</span> head <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    postOrderTraversal(head.left)<br>    postOrderTraversal(head.right)<br>    print(head.value + <span class="hljs-string">&#x27; &#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="Breadth-First-Search-BFS"><a class="header-anchor" href="#Breadth-First-Search-BFS">Â¶</a><em>Breadth First Search (BFS)</em></h3><h4 id="è¿™é‡Œæ˜¯å…³äºä¸€é“æ±‚æ ‘æœ€å¤§å®½åº¦çš„è§£ï¼Œæœ¬è´¨æ˜¯ç”¨äº†BFS"><a class="header-anchor" href="#è¿™é‡Œæ˜¯å…³äºä¸€é“æ±‚æ ‘æœ€å¤§å®½åº¦çš„è§£ï¼Œæœ¬è´¨æ˜¯ç”¨äº†BFS">Â¶</a><em>è¿™é‡Œæ˜¯å…³äºä¸€é“æ±‚æ ‘æœ€å¤§å®½åº¦çš„è§£ï¼Œæœ¬è´¨æ˜¯ç”¨äº†BFS</em></h4><p>è¿™é‡Œæœ€æ ¸å¿ƒçš„BFSæ˜¯ç”¨javaå†™çš„</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">public</span> static <span class="hljs-literal">void</span> treeBFS(Node head) &#123;<br><span class="hljs-keyword">if</span> (head == <span class="hljs-built_in">null</span>) &#123;<br><span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-built_in">Queue</span>&lt;Node&gt; <span class="hljs-built_in">queue</span> = <span class="hljs-literal">new</span> LinkedList&lt;&gt;();<br><span class="hljs-built_in">queue</span>.add(head);<br><span class="hljs-keyword">while</span> (!<span class="hljs-built_in">queue</span>.isEmpty()) &#123;<br>Node cur = <span class="hljs-built_in">queue</span>.poll();<br>System.out.println(cur.value+<span class="hljs-string">&quot; &quot;</span>);<br><span class="hljs-keyword">if</span> (cur.left != <span class="hljs-built_in">null</span>) &#123;<br><span class="hljs-built_in">queue</span>.add(cur.left);<br>&#125;<br><span class="hljs-keyword">if</span> (cur.right != <span class="hljs-built_in">null</span>) &#123;<br><span class="hljs-built_in">queue</span>.add(cur.right);<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­¤é¢˜çš„pythonè§£ä»¥åŠæµ‹è¯•ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs vim">from collections import deque<br><br>def breathFirstSearch(head):<br>    queue = deque()<br>    <span class="hljs-keyword">if</span> head <span class="hljs-keyword">is</span> None:<br>        <span class="hljs-keyword">return</span> None<br>    levelMap = &#123;&#125;<br>    levelMap[head] = <span class="hljs-number">1</span><br>    queue.<span class="hljs-keyword">append</span>(head)<br><br>    cLevel = <span class="hljs-number">1</span><br>    cNodes = <span class="hljs-number">0</span> # <span class="hljs-keyword">set</span> <span class="hljs-keyword">to</span> <span class="hljs-number">0</span> because we need <span class="hljs-keyword">to</span> use +=<span class="hljs-number">1</span> in <span class="hljs-keyword">while</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">make</span> loop run<br>    maxa = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> queue:<br>        cur = queue.popleft()<br>        level = levelMap.<span class="hljs-built_in">get</span>(cur)<br><br>        <span class="hljs-keyword">if</span> level == cLeve<span class="hljs-variable">l:</span><br>            cNodes += <span class="hljs-number">1</span> # nodes <span class="hljs-keyword">on</span> current level +=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">print</span>(<span class="hljs-string">&quot;level: &#123;&#125;, nodes: &#123;&#125;&quot;</span>.format(cLevel, cNodes))<br>            <span class="hljs-keyword">if</span> cNodes &gt; <span class="hljs-built_in">max</span><span class="hljs-variable">a:</span><br>                maxa = cNodes<br>            cLevel += <span class="hljs-number">1</span><br>            cNodes = <span class="hljs-number">1</span> # cNodes <span class="hljs-keyword">is</span> the <span class="hljs-keyword">first</span> element of the level, (it <span class="hljs-built_in">has</span> been popped)<br><br>        <span class="hljs-keyword">print</span>(<span class="hljs-string">&quot;Node: &#123;&#125;, level: &#123;&#125;&quot;</span>.format(cur.value, level))<br>        <span class="hljs-keyword">if</span> cur.<span class="hljs-keyword">left</span> <span class="hljs-keyword">is</span> not None:<br>            levelMap[cur.<span class="hljs-keyword">left</span>] = level + <span class="hljs-number">1</span><br>            queue.<span class="hljs-keyword">append</span>(cur.<span class="hljs-keyword">left</span>)<br>        <span class="hljs-keyword">if</span> cur.<span class="hljs-keyword">right</span> <span class="hljs-keyword">is</span> not None:<br>            levelMap[cur.<span class="hljs-keyword">right</span>] = level + <span class="hljs-number">1</span><br>            queue.<span class="hljs-keyword">append</span>(cur.<span class="hljs-keyword">right</span>)<br><br>    <span class="hljs-keyword">print</span>(<span class="hljs-string">&quot;level: &#123;&#125;, nodes: &#123;&#125;&quot;</span>.format(level, cNodes))<br><br>    <span class="hljs-string">&#x27;&#x27;</span><span class="hljs-string">&#x27;catch the max of the last level: it will not enter the while as all stuffs has been poped&#x27;</span><span class="hljs-string">&#x27;&#x27;</span><br><br>    <span class="hljs-keyword">print</span>(<span class="hljs-string">&quot;the max level is &#123;&#125;&quot;</span>.format(<span class="hljs-built_in">max</span>(maxa, cNodes)))<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    head = Node(<span class="hljs-number">1</span>)<br>    head.<span class="hljs-keyword">left</span> = Node(<span class="hljs-number">2</span>)<br>    head.<span class="hljs-keyword">right</span> = Node(<span class="hljs-number">3</span>)<br>    head.<span class="hljs-keyword">left</span>.<span class="hljs-keyword">left</span> = Node(<span class="hljs-number">4</span>)<br>    head.<span class="hljs-keyword">left</span>.<span class="hljs-keyword">right</span> = Node(<span class="hljs-number">5</span>)<br>    head.<span class="hljs-keyword">right</span>.<span class="hljs-keyword">left</span> = Node(<span class="hljs-number">6</span>)<br>    head.<span class="hljs-keyword">right</span>.<span class="hljs-keyword">right</span> = Node(<span class="hljs-number">7</span>)<br>    breathFirstSearch(head)<br></code></pre></td></tr></table></figure><hr><h3 id="åœ¨ä¸­åºéå†ä¸­åç»§èŠ‚ç‚¹ä¸å‰é©±èŠ‚ç‚¹çš„ç›´æ¥æŸ¥æ‰¾"><a class="header-anchor" href="#åœ¨ä¸­åºéå†ä¸­åç»§èŠ‚ç‚¹ä¸å‰é©±èŠ‚ç‚¹çš„ç›´æ¥æŸ¥æ‰¾">Â¶</a><em>åœ¨ä¸­åºéå†ä¸­åç»§èŠ‚ç‚¹ä¸å‰é©±èŠ‚ç‚¹çš„ç›´æ¥æŸ¥æ‰¾</em></h3><h4 id="A-direct-way-of-finding-the-successor-node-and-previous-node-in-the-in-order-traversal"><a class="header-anchor" href="#A-direct-way-of-finding-the-successor-node-and-previous-node-in-the-in-order-traversal">Â¶</a><em>A direct way of finding the successor node and previous node in the in-order traversal</em></h4><p><strong>S_uccessor:_</strong><br><strong><em>Two situations:</em></strong></p><ol><li>the leftest child in the right tree of a node X is the next node in the traversal of node X.</li><li>if the X does not have right tree, go to the parent node, and continue if the parent is always the right child of its parent, until it is the left child of the parent Y. this Y is the next node of X. However, there is no such y, means x does not have the next node.</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27; to find the next node of a node in the in-order traversal&#x27;&#x27;&#x27;</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, val</span>):</span><br>        self.value = val<br>        self.left = <span class="hljs-literal">None</span><br>        self.right = <span class="hljs-literal">None</span><br>        self.parent = <span class="hljs-literal">None</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">two situations:</span><br><span class="hljs-string">1. the leftest child in the right tree of a node X is the next node in the traversal of node X</span><br><span class="hljs-string">2. if the X does not have right tree, go to the parent node, and continue if the parent</span><br><span class="hljs-string">is always the right child of its parent, until it is the left child of the parent Y. this Y</span><br><span class="hljs-string">is the next node of X. However, there is no such y, means x does not have the next node.</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findSuccessor</span>(<span class="hljs-params">node</span>):</span><br>    <span class="hljs-keyword">if</span> node <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    <span class="hljs-keyword">if</span> node.right <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">return</span> getMostLeft(node.right)<br>    <span class="hljs-keyword">else</span>:<br>        parent = node.parent<br>        <span class="hljs-keyword">while</span> parent <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> node != parent.left:<br>            node = parent<br>            parent = node.parent<br>        <span class="hljs-keyword">return</span> parent<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getMostLeft</span>(<span class="hljs-params">node</span>):</span><br>    <span class="hljs-keyword">if</span> node <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    <span class="hljs-keyword">while</span> node.left <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>        node = node.left<br>    <span class="hljs-keyword">return</span> node<br></code></pre></td></tr></table></figure><p><strong><em>Previous Node:</em></strong><br><strong><em>Two situations:</em></strong></p><ol><li>if the node has left child, the prev node is rightest of the left child.</li><li>if the node X does not have left child, we keep going to its parent. if the parent is also the left child of its parent, keep going until it is the right child of a parent. the parent here is its previous node X.</li></ol><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">def getPreviousNode(<span class="hljs-keyword">node</span><span class="hljs-title">):</span><br><span class="hljs-title">    if</span> <span class="hljs-keyword">node</span> <span class="hljs-title">is</span> None:<br>        return None<br>    elif node.left:<br>        return getMostRight(node.left)<br>    else:<br>        parent = node.parent<br>        while parent <span class="hljs-keyword">and</span> <span class="hljs-keyword">node</span> <span class="hljs-title">!= parent</span>.right:<br>            <span class="hljs-keyword">node</span> <span class="hljs-title">= parent</span><br>            parent = node.parent<br>        return parent<br><br>def getMostRight(<span class="hljs-keyword">node</span><span class="hljs-title">):</span><br><span class="hljs-title">    if</span> not <span class="hljs-keyword">node</span><span class="hljs-title">:</span><br><span class="hljs-title">        return</span> None<br>    while node.right:<br>        <span class="hljs-keyword">node</span> <span class="hljs-title">= node</span>.right<br>    return <span class="hljs-keyword">node</span><span class="hljs-title"></span><br></code></pre></td></tr></table></figure><hr><h3 id="Serialization-and-Deserialization"><a class="header-anchor" href="#Serialization-and-Deserialization">Â¶</a>_Serialization and Deserialization</h3><p>åºåˆ—åŒ– å’Œ ååºåˆ—åŒ–_</p><p>Serialization:<br>serialize the binary tree in the memory into string and<br>deserialize it from the string to memory.<br>Structure and Data should be preserved.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, val</span>):</span><br>        self.value = val<br>        self.left = <span class="hljs-literal">None</span><br>        self.right = <span class="hljs-literal">None</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__repr__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Node &lt;&#123;&#125;&gt;&quot;</span>.<span class="hljs-built_in">format</span>(self.value)<br><br>    __str__ = __repr__<br><br><span class="hljs-string">&#x27;&#x27;&#x27;record a node by _ and do not ignore the None node&#x27;&#x27;&#x27;</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">preOrderSerialize</span>(<span class="hljs-params">head</span>):</span><br>    <span class="hljs-keyword">if</span> head <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;#_&#x27;</span><br>    output = <span class="hljs-built_in">str</span>(head.value) + <span class="hljs-string">&quot;_&quot;</span><br>    output += preOrderSerialize(head.left)  <span class="hljs-comment"># output is waiting for further recursion from the left</span><br>    output += preOrderSerialize(head.right)  <span class="hljs-comment"># waiting for the right</span><br>    <span class="hljs-keyword">return</span> output  <span class="hljs-comment"># return output itself to append to the output on the upper level</span><br><br><br><br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">preOrderDeserialize_String</span>(<span class="hljs-params">string</span>):</span><br>    values = string.split(<span class="hljs-string">&#x27;_&#x27;</span>)<br>    queue = deque()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> values:<br>        queue.append(i)<br>    <span class="hljs-keyword">return</span> preOrderDeserialize_Tree_subprocess(queue)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">preOrderDeserialize_Tree_subprocess</span>(<span class="hljs-params">queue</span>):</span><br>    value = queue.popleft()<br>    <span class="hljs-keyword">if</span> value == <span class="hljs-string">&#x27;#&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    head = Node(<span class="hljs-built_in">int</span>(value))<br>    head.left = preOrderDeserialize_Tree_subprocess(queue)<br>    head.right = preOrderDeserialize_Tree_subprocess(queue)<br>    <span class="hljs-keyword">return</span> head<br></code></pre></td></tr></table></figure><p>åº”ç”¨ï¼š ä¸€ä¸ªæ ‘æ˜¯å¦æ˜¯å¦å¤–ä¸€ä¸ªæ ‘çš„å­æ ‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">application: is a tree t1 the subtree of another tree t2 ?</span><br><span class="hljs-string">answer: serialize both and check t1_string is part of t2_string</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isSubtreeOf</span>(<span class="hljs-params">t1, t2</span>):</span><br>    t1_string = preOrderSerialize(t1)<br>    t2_string = preOrderSerialize(t2)<br>    <span class="hljs-keyword">return</span> t1_string <span class="hljs-keyword">in</span> t2_string<br></code></pre></td></tr></table></figure><p>Test:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">if __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    head = <span class="hljs-keyword">Node</span><span class="hljs-title">(1</span>)<br>    head.left = <span class="hljs-keyword">Node</span><span class="hljs-title">(2</span>)<br>    head.right = <span class="hljs-keyword">Node</span><span class="hljs-title">(3</span>)<br>    head.left.left = <span class="hljs-keyword">Node</span><span class="hljs-title">(4</span>)<br>    head.left.right = <span class="hljs-keyword">Node</span><span class="hljs-title">(5</span>)<br>    head.right.left = <span class="hljs-keyword">Node</span><span class="hljs-title">(6</span>)<br>    head.right.right = <span class="hljs-keyword">Node</span><span class="hljs-title">(7</span>)<br>    serial = preOrderSerialize(head)<br>    print(<span class="hljs-string">&quot;this is a serialized tree: \n&#123;&#125;&quot;</span>.format(serial))<br>    head = preOrderDeserialize_String(serial)<br>    print(<span class="hljs-string">&quot;Now the tree has be deserialized, start to check&quot;</span>)<br>    print(head, head.left, head.right, head.left.left, head.left.right, head.right.left, head.right.right)<br>    print(<span class="hljs-string">&quot;\nnow check if t2 is a subtree of t1:&quot;</span>)<br>    head_2 = <span class="hljs-keyword">Node</span><span class="hljs-title">(3</span>)<br>    head_2.left = <span class="hljs-keyword">Node</span><span class="hljs-title">(6</span>)<br>    head_2.right = <span class="hljs-keyword">Node</span><span class="hljs-title">(7</span>)<br>    print(isSubtreeOf(head_2, head))<br></code></pre></td></tr></table></figure><hr><h3 id="Origami-æŠ˜çº¸é—®é¢˜"><a class="header-anchor" href="#Origami-æŠ˜çº¸é—®é¢˜">Â¶</a><em>Origami æŠ˜çº¸é—®é¢˜</em></h3><p>è¿™é“é¢˜éœ€è¦å†å®é™…æŠ˜ä¸€ä¸‹æ›´å¥½ç†è§£</p><p>_Fold the paper inwards (always), everytime after the first inward folding, we will have two new fold mark (one inward mark upon and outward mark below every fold marks in current level<br>(current times of folding))</p><p>Solution: the folding process is a tree with inward mark. all heads of left child is inward, and all head of right child is outward_</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">printAllFolds</span>(<span class="hljs-params">N</span>):</span><br>    printProcess(<span class="hljs-number">1</span>, N, <span class="hljs-literal">True</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">printProcess</span>(<span class="hljs-params">i, N, down</span>):</span>  <span class="hljs-comment"># args: (level, the total times of folding, inwards)</span><br>    <span class="hljs-keyword">if</span> i &gt; N:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    printProcess(i+<span class="hljs-number">1</span>, N, <span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">if</span> down:<br>        print(<span class="hljs-string">&#x27;inwards&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        print(<span class="hljs-string">&#x27;outwards&#x27;</span>)<br>    printProcess(i+<span class="hljs-number">1</span>, N, <span class="hljs-literal">False</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    printAllFolds(<span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>algo</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ©ç”¨Flaskæ­å»ºä¸€ä¸ªç®€æ˜“çš„åšå®¢ç½‘ç«™(4)</title>
    <link href="/2020/07/11/%E5%88%A9%E7%94%A8flask%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%994/"/>
    <url>/2020/07/11/%E5%88%A9%E7%94%A8flask%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%994/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é…ç½®æ˜ å°„ç±»å’Œæ•°æ®åº“"><a class="header-anchor" href="#é…ç½®æ˜ å°„ç±»å’Œæ•°æ®åº“">Â¶</a>é…ç½®æ˜ å°„ç±»å’Œæ•°æ®åº“</h2><p><img src="https://azumeow.com/wp-content/uploads/2020/08/wm-1024x415.gif" alt=""></p><p>ç›´æ¥è´´ä¸€ä¸ªå®éªŒæ¥¼çš„å›¾æ¥æ›´å¥½é˜è¿°æ•´ä¸ªæµç¨‹ã€‚<br>å›¾ç‰‡ç‰ˆæƒä¸ºå®éªŒæ¥¼æ‰€æœ‰</p><p>æˆ‘ä»¬ä¹‹å‰è¯´åˆ°äº†MVT modelï¼Œ å³æ•´ä¸ªæœåŠ¡çš„åŸºæœ¬æ¶æ„æ˜¯ç”± modelï¼Œviewï¼Œtemplateæ¥å®ç°çš„ã€‚é‚£æˆ‘ä»¬å°±å¼€å§‹modeléƒ¨åˆ†çš„å›é¡¾å§ï¼</p><p>å¦‚å›¾æ‰€ç¤ºï¼ŒMæ¨¡å‹çš„åŠŸèƒ½æ˜¯æ˜ å°„ç±»ï¼ˆORMï¼‰ï¼Œå³å¯¹æ•°æ®åº“ï¼ˆæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯MySQL)è¿›è¡Œäº¤äº’ã€‚ä¸ºäº†æ›´åŠ ä¾¿æ·å¾—èƒ½å¤Ÿä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œé¿å…ç›´æ¥ä½¿ç”¨SQLè¯­å¥æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ flask-sqlalchemyæ’ä»¶æ¥è¿›è¡ŒORMçš„éƒ¨ç½²ï¼Œå®ƒæ˜¯ä¸“é—¨ä¸ºflaskæä¾›æ”¯æŒçš„sqlalchemyæ‹“å±•ã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœä¸ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å°±å¿…é¡»è‡ªå·±æ­å»ºORMï¼Œè¿™å°±æ¶‰åŠåˆ°pythonçš„å…ƒç»„ï¼ˆmetaclassï¼‰å’ŒåŠ¨æ€åˆ›å»ºç±»çš„å†…å®¹äº† ï¼ˆæˆ‘è¿™é‡Œå½“æ—¶è‡ªå­¦æ—¶æ²¡æœ‰æ‡‚ = =ï¼‰</p><p>æ—¢ç„¶æœ‰ç°æˆçš„å·¥å…·ï¼Œæˆ‘ä»¬å°±éœ€è¦å¥½å¥½åˆ©ç”¨å®ƒï¼ˆä¸ºè‡ªå·±çš„ç¬¨æ‰¾åˆ°äº†çœ‹ä¼¼åˆç†çš„å€Ÿå£ ğŸ˜ƒ ï¼‰ã€‚</p><p><code>pip install flask-sqlalchemy   pip install flask-moment</code></p><p>é¦–å…ˆå®‰è£…ç›¸å…³çš„æ’ä»¶ï¼Œ<a href="http://xn--model-ep5hjj3315b.py">å†è¿›å…¥model.py</a> ä¸­importè¿™äº›æ’ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹çš„ä»£ç ã€‚<br>å¯ä»¥å…ˆå¿½ç•¥å…·ä½“çš„è¡¨ä¸­ æŸäº›Columnçš„å†…å®¹</p><figure class="highlight pgsql"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">from</span> flask_sqlalchemy <span class="hljs-keyword">import</span> SQLAlchemy<br>db = SQLAlchemy()<br><span class="hljs-keyword">class</span> <span class="hljs-keyword">Role</span>(db.Model):<br>    id = db.<span class="hljs-keyword">Column</span>(db.Integer, primary_key=<span class="hljs-keyword">True</span>)<br>    <span class="hljs-type">name</span> = db.<span class="hljs-keyword">Column</span>(db.String(<span class="hljs-number">64</span>), <span class="hljs-keyword">unique</span>=<span class="hljs-keyword">True</span>)<br>    default = db.<span class="hljs-keyword">Column</span>(db.Boolean, default=<span class="hljs-keyword">False</span>, <span class="hljs-keyword">index</span>=<span class="hljs-keyword">True</span>)<br>    permissions = db.<span class="hljs-keyword">Column</span>(db.Integer)<br><br>    def __repr__(self):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;Role: &#123;&#125;&gt;&#x27;</span>.format(self.name)<br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">class</span> <span class="hljs-keyword">User</span>(db.Model, UserMixin):<br>    def __init__(self, **kw):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;default role&#x27;&#x27;&#x27;</span><br>        # <span class="hljs-keyword">inherit</span> the core <span class="hljs-keyword">of</span> ORM<br>        super().__init__(**kw)<br>        self.<span class="hljs-keyword">role</span> = <span class="hljs-keyword">Role</span>.query.filter_by(default=<span class="hljs-keyword">True</span>).first()<br><br>    # necessary<br>    id = db.<span class="hljs-keyword">Column</span>(db.Integer, primary_key=<span class="hljs-keyword">True</span>)<br>    <span class="hljs-type">name</span> = db.<span class="hljs-keyword">Column</span>(db.String(<span class="hljs-number">64</span>), <span class="hljs-keyword">unique</span>=<span class="hljs-keyword">True</span>, <span class="hljs-keyword">index</span>=<span class="hljs-keyword">True</span>)<br>    email = db.<span class="hljs-keyword">Column</span>(db.String(<span class="hljs-number">64</span>), <span class="hljs-keyword">unique</span>=<span class="hljs-keyword">True</span>, <span class="hljs-keyword">index</span>=<span class="hljs-keyword">True</span>)  # <span class="hljs-keyword">index</span> helps <span class="hljs-keyword">to</span> <span class="hljs-keyword">do</span> query <span class="hljs-keyword">in</span> front<br><br>    # <span class="hljs-keyword">info</span> related<br>    _password = db.<span class="hljs-keyword">Column</span>(<span class="hljs-string">&#x27;password&#x27;</span>, db.String(<span class="hljs-number">128</span>))<br>    confirmed = db.<span class="hljs-keyword">Column</span>(db.Boolean, default=<span class="hljs-keyword">False</span>)<br>    role_id = db.<span class="hljs-keyword">Column</span>(db.Integer, db.ForeignKey(<span class="hljs-string">&#x27;role.id&#x27;</span>))<br>    <span class="hljs-keyword">role</span> = db.relationship(<span class="hljs-string">&#x27;Role&#x27;</span>, backref=db.backref(<span class="hljs-string">&#x27;users&#x27;</span>, lazy=<span class="hljs-string">&#x27;dynamic&#x27;</span>))<br><br>    # personalize<br>    age = db.<span class="hljs-keyword">Column</span>(db.Integer)<br>    gender = db.<span class="hljs-keyword">Column</span>(db.Enum(Gender))<br>    phone_num = db.<span class="hljs-keyword">Column</span>(db.String(<span class="hljs-number">32</span>), <span class="hljs-keyword">unique</span>=<span class="hljs-keyword">True</span>)<br>    <span class="hljs-keyword">location</span> = db.<span class="hljs-keyword">Column</span>(db.String(<span class="hljs-number">64</span>))<br>    about_me = db.<span class="hljs-keyword">Column</span>(db.Text())<br>    avatar_hash = db.<span class="hljs-keyword">Column</span>(db.String(<span class="hljs-number">128</span>))<br>    small_avatar_hash = db.<span class="hljs-keyword">Column</span>(db.String(<span class="hljs-number">128</span>))<br><br>    # other<br>    create_at = db.<span class="hljs-keyword">Column</span>(db.DateTime, default=datetime.utcnow())<br>    last_seen = db.<span class="hljs-keyword">Column</span>(db.DateTime, default=datetime.utcnow())<br><br>    # getter<br>    @property<br>    def <span class="hljs-keyword">password</span>(self):<br>        <span class="hljs-keyword">return</span> self._password<br></code></pre></td></tr></table></figure><p>å…³äºæœ€åè¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯passwordçš„getterï¼Œ ä¸€ä¸ªæ˜¯ passwordçš„setter</p><p>è¿™Userç±»ä¾¿æ˜¯ä¸€ä¸ªç»å…¸çš„ORMæ˜ å°„å…³ç³»çš„å®ç°ï¼Œå³ä¸€ä¸ªç±»æ˜ å°„åˆ°æ•°æ®åº“çš„ä¸€ä¸ªè¡¨ã€‚</p><p>Roleè¡¨åé»˜è®¤ä¸ºç±»åï¼Œè¿™ä¸ªè¡¨å†…æœ‰è¿™å‡ ä¸ªColumnï¼šid, name, default, permissionsã€‚ __repr__æ˜¯ç”¨æ¥æ˜¾ç¤ºè¿™ä¸ªç±»çš„å®ä¾‹ï¼Œå³è¡¨çš„æŸä¸ªrowï¼ˆåœ¨è¿™é‡Œæ˜¯å…·ä½“çš„æŸä¸ªæƒé™ï¼‰ã€‚æˆ‘ä»¬æ˜¾ç¤º &lt;Role: <a href="http://self.name">self.name</a>&gt; æ¥ä»£è¡¨è¿™ä¸ªæƒé™ã€‚</p><p>ç›¸åº”çš„ï¼Œ userç±»ä»£è¡¨çš„æ˜¯userè¡¨ï¼ŒæŸä¸ªrowä»£è¡¨çš„æ˜¯å…·ä½“çš„ç”¨æˆ·ï¼Œæ¯ä¸ªrowéƒ½éœ€è¦æœ‰å¯¹ç”¨çš„id, name, email, passwordä¿¡æ¯ã€‚db.Column()ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¿™ä¸ªcolumnçš„ç±»å‹æˆ–è€…æ˜¯åå­—ï¼Œå…·ä½“çš„ä¿¡æ¯å¯ä»¥æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://flask-sqlalchemy.palletsprojects.com/en/2.x/models/">https://flask-sqlalchemy.palletsprojects.com/en/2.x/models/</a></p><p>è¿™æ ·ï¼ŒåŸºç¡€çš„æ˜ å°„ç±»å°±åˆ›å»ºå¥½äº†ï¼Œæˆ‘ä»¬ç°åœ¨éœ€è¦åˆ›å»ºç›¸å¯¹äºçš„æ•°æ®åº“ï¼ˆè¡¨ï¼‰</p><p>è¿›å…¥mysql command line, ç™»å½•ï¼Œ å¹¶ä¸”è¾“å…¥<code>CREATE SCHEMA flaska CHARSET = UTF8</code> , é€šè¿‡mysqlè¯­å¥åˆ›å»ºæ–°çš„æ•°æ®åº“ã€‚å†è¿›å…¥flask shellï¼Œ</p><p><code>from models import db   db.create_all()</code></p><p>è¿™æ ·å†æŸ¥è¯¢mysql ä¸­çš„è¡¨ï¼Œå°±ä¼šå‡ºç° Role å’Œ Userã€‚è¿™å°±è¯´æ˜æˆ‘ä»¬çš„æ•°æ®åº“åŸºæœ¬åœ°å°±é…ç½®å¥½äº†</p>]]></content>
    
    
    <categories>
      
      <category>Flask</category>
      
    </categories>
    
    
    <tags>
      
      <tag>flask</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºç¡€ç®—æ³•æ€»è§ˆå¤ä¹ </title>
    <link href="/2020/07/01/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95%E6%80%BB%E8%A7%88%E5%A4%8D%E4%B9%A0/"/>
    <url>/2020/07/01/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95%E6%80%BB%E8%A7%88%E5%A4%8D%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘æ­£åœ¨ä¸Šå·¦ç¥çš„ç®—æ³•åŸºç¡€è¯¾ï¼Œå·¦ç¥è®²çš„éå¸¸é€å½»ï¼Œé‡è¦çš„è¿˜æ˜¯è¯¾ä¸‹æŠŠè¯¾ä¸Šè®²çš„å’Œä½œä¸šçš„è‡ªå·±å®ç°å¹¶ä¸”åŠ ä»¥å¤ä¹ ã€‚</p><p>è¿™ç¯‡å¤ä¹ é›†ï¼ˆå§‘ä¸”å–ä¸ªåå­—ï¼‰æ€»ç»“ä¸‹ä¸ªäººåœ¨è¿™æ®µæ—¶é—´å­¦ä¹ åˆ°çš„ç®—æ³•topicsï¼Œè¿™æ ·æ–¹ä¾¿æˆ‘ä»¥åå›æ¥å¤ä¹ ã€‚</p><hr><h2 id="æ’åº-Sort"><a class="header-anchor" href="#æ’åº-Sort">Â¶</a>æ’åº Sort</h2><p>ç›´æ¥ä¸Šå¹²è´§</p><p><strong><em>Sort Algorithm</em></strong></p><p><strong><em>Time Complexity</em></strong></p><p><strong><em>Space Complexity</em></strong></p><p><strong><em>Stability</em></strong></p><p>Selection Sort</p><p>O(NÂ²)</p><p>O(1)</p><p>False</p><p>Bubble Sort</p><p>O(NÂ²)</p><p>O(1)</p><p>True</p><p>Insertion Sort</p><p>O(NÂ²)</p><p>O(1)</p><p>True</p><p><strong>Merge Sort</strong></p><p><strong>O(N*logN)</strong></p><p><strong>O(N)</strong></p><p><strong>True</strong></p><p><strong>Heap Sort</strong></p><p><strong>O(N*logN)</strong></p><p><strong>O(1)</strong></p><p><strong>False</strong></p><p><strong>Quick Sort</strong></p><p><strong>O(N*logN)</strong></p><p><strong>O(logN)</strong></p><p><strong>False</strong></p><p>Bucket Sort</p><p>O(N)</p><p>O(N)</p><p>True</p><p>å½’å¹¶æ’åºï¼Œå †æ’åºï¼Œå’Œå¿«é€Ÿæ’åºæ˜¯æœ€å¿«å¹¶ä¸”æœ€æ–¹ä¾¿ä½¿ç”¨çš„ä¸‰ç§æ’åºã€‚æ ¹æ®éœ€æ±‚é€‰æ‹©éœ€è¦çš„æ’åºç®—æ³•ã€‚</p><p>æ¡¶æ’åºåŒ…æ‹¬äº† è®¡æ•°æ’åºå’ŒåŸºæ•°æ’åºï¼Œæ¡¶æ’åºå°½ç®¡å¾ˆå¿«ä½†æ˜¯å¯¹æ•°æ®çŠ¶å†µæœ‰è¦æ±‚ï¼Œä¾‹å¦‚è®¡æ’è¦æ±‚æ•°æ®çŠ¶å†µå¤„äºä¸€ä¸ªç›¸å¯¹çª„çš„åŸŸï¼ŒåŸºæ•°æ’åºè¦æ±‚æ ·æœ¬éƒ½ä¸ºåè¿›åˆ¶æ•°</p><p>å¯¹äºä½¿ç”¨é€’å½’è°ƒç”¨çš„æ’åºç®—æ³•å¯åˆ©ç”¨Master Theoremåˆ†ææ—¶é—´å¤æ‚åº¦ï¼š</p><p><img src="https://azumeow.com/wp-content/uploads/2020/07/6a2b5943d03e647b0061f4c327cc38cf7d43ff03.svg" alt=""></p><p>é€‚ç”¨äºå­è¿‡ç¨‹ï¼ˆsubprocessï¼‰ç¼©å°çš„è§„æ¨¡éƒ½æ˜¯ n/bï¼Œè°ƒç”¨aæ¬¡subprocessï¼ˆä¸”éƒ½æ˜¯ç­‰è§„æ¨¡åœ°ç¼©å°ï¼‰ï¼ŒåŠ ä¸Šå…¶ä»–çš„ f(n) æˆ–è€… å¯ä»¥è¡¨ç¤ºä¸º O(n^d)çš„ æ—¶é—´æ“ä½œã€‚</p><p>è¿™æ ·å°±èƒ½ç»†åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š</p><ul><li>log b (a) &lt; d =&gt; O(n^d)</li><li>log b (a) &gt; d =&gt; O(n^(log b (a)))</li><li>log b (a) = d =&gt; O(n^(d) * log(n))</li></ul><p>å¿«æ’ï¼šä¸è¿½æ±‚ç¨³å®šæ€§ï¼ŒæŒ‡æ ‡æœ€ä¼˜ï¼Œå¸¸æ•°æœ€ä¼˜ã€‚<br>å †æ’ï¼šè¿½æ±‚æ›´å°‘çš„é¢å¤–ç©ºé—´å¤æ‚åº¦ã€‚<br>å½’å¹¶ï¼šè¿½æ±‚ç¨³å®šæ€§ã€‚</p><h3 id="æ’åºç›¸å…³ç»ƒä¹ é¢˜ç›®"><a class="header-anchor" href="#æ’åºç›¸å…³ç»ƒä¹ é¢˜ç›®">Â¶</a>æ’åºç›¸å…³ç»ƒä¹ é¢˜ç›®</h3><ul><li>å±€éƒ¨æœ€å°ï¼š arræ— åºï¼Œç›¸é‚»ä¸ç›¸ç­‰ï¼Œè¿”å›ä»»æ„ä¸€ä¸ªå±€å°index</li><li>æå‡ºå¥‡æ¬¡æ•°ï¼šarrä¸­åªæœ‰ä¸€ä¸ªæ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä½™ä¸ºå¶æ•°æ¬¡ï¼Œæ‰¾åˆ°è¿™ä¸ªæ•°<ul><li>æ‹“å±•ï¼šæœ‰ä¸¤ä¸ªæ•°å‡ºç°å¥‡æ•°æ¬¡ï¼Œå…¶ä½™ä¸ºå¶æ•°æ¬¡ï¼Œæ‰¾åˆ°è¿™ä¸¤æ•°</li></ul></li><li>å°å’Œï¼ˆsmall sumï¼‰ï¼šarrä¸­ä¸€ä¸ªæ•°å·¦è¾¹æ¯”å½“å‰æ•°å°çš„æ•°ç´¯åŠ èµ·æ¥ï¼Œå«åšè¿™ä¸ªæ•°ç»„çš„å°å’Œï¼Œæ±‚arr çš„å°å’Œ</li><li>é€†åºå¯¹ï¼šä¸€ä¸ªarrä¸­å·¦è¾¹çš„æ•°å¦‚æœæ¯”å³è¾¹çš„æ•°å¤§ï¼Œåˆ™è¿™ä¸¤ä¸ªæ•°æ„æˆé€†åºå¯¹ï¼Œæ‰“å°æ‰€æœ‰é€†åºå¯¹</li><li>å‡ ä¹æœ‰åºçš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ æ’å¥½åºæœ€å¤šä¸ç§»åŠ¨kè·ç¦»ï¼Œæ±‚æœ€å¥½çš„æ’åºç®—æ³•æ’åº</li><li>è·å…°å›½æ——</li></ul><hr><h2 id="é“¾è¡¨-Linked-List-å’Œ"><a class="header-anchor" href="#é“¾è¡¨-Linked-List-å’Œ">Â¶</a>é“¾è¡¨ Linked List å’Œ</h2><h2 id="å“ˆå¸Œè¡¨ï¼ˆå­—å…¸ï¼‰Hash-Table"><a class="header-anchor" href="#å“ˆå¸Œè¡¨ï¼ˆå­—å…¸ï¼‰Hash-Table">Â¶</a>å“ˆå¸Œè¡¨ï¼ˆå­—å…¸ï¼‰Hash Table</h2><p>å•é“¾è¡¨å’ŒåŒå‘é“¾è¡¨æ˜¯é‡è¦çš„æ•°æ®ç»“æ„</p><p>å…³äºé“¾è¡¨ï¼Œ åŸºç¡€çš„é—®é¢˜æœ‰ï¼š</p><ul><li>åè½¬å•å‘é“¾è¡¨å’ŒåŒå‘é“¾è¡¨</li><li>æ‰“å°ä¸¤ä¸ªæœ‰åºé“¾è¡¨çš„å…¬å…±éƒ¨åˆ†</li></ul><p>è¿›é˜¶ä¸€ç‚¹çš„é—®é¢˜æœ‰ï¼š</p><ul><li>åˆ¤æ–­ä¸€ä¸ªé“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡ç»“æ„ï¼ˆpalindromeï¼‰</li><li>å¤åˆ¶å«æœ‰éšæœºæŒ‡é’ˆèŠ‚ç‚¹çš„é“¾è¡¨</li><li>ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„é—®é¢˜</li></ul>]]></content>
    
    
    <categories>
      
      <category>algo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Sorting</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é¦–é¡µ</title>
    <link href="/2020/06/23/%E9%A6%96%E9%A1%B5/"/>
    <url>/2020/06/23/%E9%A6%96%E9%A1%B5/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
    
    
    <categories>
      
      <category>uncategorized</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ©ç”¨Flaskæ­å»ºä¸€ä¸ªç®€æ˜“çš„åšå®¢ç½‘ç«™(3)</title>
    <link href="/2020/06/20/%E5%88%A9%E7%94%A8flask%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%993/"/>
    <url>/2020/06/20/%E5%88%A9%E7%94%A8flask%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%993/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="http://manage.py">manage.py</a> å’Œ <a href="http://configs.py">configs.py</a> çš„åº”ç”¨</p><p>æˆ‘ä»¬çŸ¥é“å½“æˆ‘ä»¬åˆ›å»ºå¥½ appæ–‡ä»¶ï¼Œå³å®Œæˆä¸€ä¸ªå¯ä»¥åˆ›å»ºæ–°çš„flaskå¯¹è±¡çš„å‡½æ•°æ—¶ï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œè¿™ä¸ªå‡½æ•°æ—¶ï¼Œå°±ä¼šè¿›å…¥flaskæœåŠ¡å™¨ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªmanageçš„æ¨¡å—æ¥æ–¹ä¾¿æˆ‘ä»¬è°ƒè¯•æœåŠ¡å™¨ï¼Œå³åœ¨manageä¸­æ¥å¯ç”¨è¿™ä¸ªcreate_appçš„å‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å¤šç§å¯åŠ¨æœåŠ¡å™¨çš„æ–¹å¼ï¼Œä¾‹å¦‚å¼€å‘æ¨¡å¼æˆ–è€…æµ‹è¯•æ¨¡å¼ã€‚</p><p><a href="http://xn--configs-nw3kg06borhj9wf5am81dsf9c.py">åœ¨åŒç›®å½•ä¸‹æ–°å»ºconfigs.py</a></p><p>å…·ä½“çš„è®¾ç½®çœ‹æºä»£ç å°±å¯ä»¥äº†ï¼Œä¸»è¦åŒ…å«SECRET_KEY, FLASK_ENV å’Œä¸€äº›MAIL_SERVERç­‰çš„è®¾ç½®ã€‚æˆ‘ä»¬æŠŠè¿™äº›é…ç½®å®šä¹‰åœ¨å…·ä½“çš„ç±»ä¸‹é¢ï¼Œ è¿™æ ·å½“è¿™ä¸ªç±»åé€šè¿‡æœ€åè®¾ç½®çš„å­—å…¸ç®€å†™çš„æ–¹å¼ä¼ å…¥create_appä¸­ï¼Œ <code>app.config.from_object(configs.get(config))</code> è®©ç±»é‡Œçš„é…ç½®ç›´æ¥ä¼ å…¥flaskå¯¹è±¡çš„é…ç½®ã€‚</p><p>å…³äºä¸€äº›ä¸èƒ½è¢«å…¬å¼€çš„é…ç½®ï¼Œä¾‹å¦‚SECRETE_KEY, MAIL_PASSWORDç­‰ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åˆ°ä¸€ä¸ªdotenvæ’ä»¶æ¥æ–¹ä¾¿æˆ‘ä»¬é…ç½®ã€‚</p><p>æŸ¥ä¸€ä¸‹å¦‚ä½•import dotenvï¼Œæˆ‘ä»¬åœ¨å½“å‰æ–‡ä»¶å¤¹æ–°å»º.env å’Œ .flaskenvã€‚ .envå¯ä»¥ç”¨æ¥é…ç½®ä¸€äº›æ¶‰å¯†çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚æˆ‘ä¸Šè¿°ã€‚.flaskenvæ˜¯ç”¨æ¥é…ç½®ä¸€äº›å…³äºflaskæœåŠ¡å™¨çš„é…ç½®ï¼Œæ˜¯å¯å…¬å¼€çš„ã€‚è¿™æ ·æˆ‘ä»¬è®¾ç½®å¥½äº†ä¹‹åï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨æ·»åŠ è¿™äº›é…ç½®ä¿¡æ¯ï¼Œæˆ‘ä»¬åœ¨configs.pyå°±å¯ä»¥ç”¨åˆ°ä¾‹å¦‚<code>MAIL_PASSWORD = os.getenv('MAIL_PASSWORD')</code> æ¥å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„é…ç½®ä¿¡æ¯ã€‚</p><p>è®°ä½ï¼Œå¿…é¡»åœ¨manage.pyæˆ–è€…configs.pyä¸­å¯ç”¨dotenvæ‰å¯ä»¥ä½¿ç”¨</p><p><code>from dotenv import load_dotenv   load_dotenv(override=True)</code></p><p>overrideç¡®è®¤äº†envä¸­ä¼šoverrideç³»ç»Ÿä¸­çš„é…ç½®ä¿¡æ¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Flask</category>
      
    </categories>
    
    
    <tags>
      
      <tag>flask</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é»˜è®¤å·¥å…·åŒ…</title>
    <link href="/2020/06/18/%E9%BB%98%E8%AE%A4%E5%B7%A5%E5%85%B7%E5%8C%85/"/>
    <url>/2020/06/18/%E9%BB%98%E8%AE%A4%E5%B7%A5%E5%85%B7%E5%8C%85/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
    
    
    <categories>
      
      <category>uncategorized</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ©ç”¨Flaskæ­å»ºä¸€ä¸ªç®€æ˜“çš„åšå®¢ç½‘ç«™(2)</title>
    <link href="/2020/06/17/%E5%88%A9%E7%94%A8flask%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%992/"/>
    <url>/2020/06/17/%E5%88%A9%E7%94%A8flask%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%992/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="app-py-çš„å®ç°å’ŒåŠŸèƒ½"><a class="header-anchor" href="#app-py-çš„å®ç°å’ŒåŠŸèƒ½">Â¶</a><a href="http://app.py">app.py</a> çš„å®ç°å’ŒåŠŸèƒ½</h2><p><a href="http://app.py">app.py</a> åœ¨æ•´ä¸ªproject ä¸­ä¸»è¦ä½œç”¨æ˜¯æŠŠå„ç§æ’ä»¶æ·»åŠ è¿›Flaskã€‚å¤§è‡´å°±æ˜¯ åˆ›å»ºä¸€ä¸ªFlaskå¯¹è±¡ï¼Œå¹¶æŠŠæ‰€æœ‰æ’ä»¶æ³¨å†Œåˆ°è¿™ä¸ªå¯¹è±¡ä¸Šï¼Œå³ä¸€ä¸ªæ’ä»¶æ§åˆ¶å™¨ã€‚</p><figure class="highlight elm"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><pre><code class="hljs elm"><span class="hljs-keyword">import</span> sys<br><span class="hljs-title">sys</span>.path.append(<span class="hljs-string">&#x27;.&#x27;</span>)<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬é¦–å…ˆimportå„ç§flask çš„æ’ä»¶:<br>1. pagedownæ˜¯commentéœ€è¦çš„markdown æ’ä»¶<br>2. Flaskæ˜¯flaskæœ¬ä½“ï¼Œä¸è¯´äº†å§<br>3. bootstrap æ˜¯ä¸€ä¸ªæŠŠå„ç§å¸¸ç”¨blocksï¼ˆå³å„ç§CSSå’ŒJSçš„æ¨¡æ¿ï¼‰åŒ…å«çš„package,è¿™æ ·åœ¨templateä¸­å¯ä»¥ç›´æ¥extend bootstrap ä¾‹å¦‚ï¼š</p><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs twig"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-keyword">extends</span></span> &#x27;bootstrap/base.html&#x27; %&#125;</span><br><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-keyword">from</span></span> &#x27;bootstrap/wtf.html&#x27; import quick_form %&#125;</span><br></code></pre></td></tr></table></figure><p>è¿™æ ·templateå°±å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨è¿™äº›æ¨¡æ¿</p><p>4. moment æ˜¯ä¸€ä¸ªæ–¹ä¾¿åˆ©ç”¨æ—¶é—´çš„æ’ä»¶<br>5. migrate æ˜¯ä¸ºdatabaseæä¾›ç‰ˆæœ¬å¤‡ä»½çš„æ’ä»¶ã€‚åŠŸèƒ½å¯ä»¥ç­‰ä»·äº git ä¹‹äºcode<br>6. loginæ˜¯ä¸€ä¸ªç®¡ç†ç”¨æˆ·ç™»å½•çš„æ’ä»¶</p><p>appä¸­çš„ register_blueprintå‡½æ•°æŠŠblueprint_listä¸­æ‰€æœ‰çš„è§†å›¾moduleï¼ˆåŒ…å«æ‰€æœ‰è§†å›¾å‡½æ•°ï¼‰æ³¨å†Œåˆ°flask å¯¹è±¡ä¸Šã€‚</p><p>register_extensionså‡½æ•°æŠŠæ‰€æœ‰ä¸Šè¿°çš„æ’ä»¶æ³¨å†Œåˆ°å¯¹è±¡ä¸Šï¼Œä¹‹ååœ¨æˆ‘ä»¬åˆ›å»ºäº†flaskå¯¹è±¡åï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@login_manager.user_loader</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">user_loader</span>(<span class="hljs-params"><span class="hljs-built_in">id</span></span>):</span><br><span class="hljs-comment"># åªæœ‰ä¸»é”®æ‰å¯ä»¥ä½¿ç”¨ query.get æ–¹æ³•æŸ¥è¯¢</span><br><span class="hljs-keyword">return</span> User.query.get(<span class="hljs-built_in">id</span>)<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°ä¼šå‘Šè¯‰login_managerç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼Œ å³callbackï¼ˆå›è°ƒå‡½æ•°ï¼‰è¿™æ ·ç³»ç»Ÿä¾¿èƒ½è¯†åˆ«ç™»å½•ç”¨æˆ·çš„èº«ä»½ã€‚è¿”å›çš„æ˜¯userå¯¹è±¡ã€‚</p><p>create_app å‡½æ•°åˆ™æ˜¯ç”¨æ¥ åˆå§‹åŒ–å¯¹è±¡ï¼Œæ·»åŠ ç›¸å…³é…ç½®ï¼Œ å¹¶æ³¨å†Œæ’ä»¶å’Œè“å›¾ï¼Œæœ€åè¿”å›å¯¹è±¡ã€‚</p><p>å…³äºæ·»åŠ ç›¸å…³é…ç½®çš„æ–¹æ³•ï¼Œæˆ‘åœ¨ä¸‹ä¸€ç« ä¼šæåˆ°ã€‚</p><p>è¿™æ ·ä¸€ä¸ªæœ€ä¸ºé‡è¦çš„ä¸€ä¸ªç¯èŠ‚å°±å®Œæˆäº†ï¼[]<sub>(ï¿£â–½ï¿£)</sub>*åº†ç¥ä¸€ä¸‹å§ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Flask</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ©ç”¨Flaskæ­å»ºä¸€ä¸ªç®€æ˜“çš„åšå®¢ç½‘ç«™(1)</title>
    <link href="/2020/06/17/%E5%88%A9%E7%94%A8flask%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/"/>
    <url>/2020/06/17/%E5%88%A9%E7%94%A8flask%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3c/Flask_logo.svg/220px-Flask_logo.svg.png" alt=""></p><h2 id="ä¸»è¦åŸºæœ¬ç»“æ„"><a class="header-anchor" href="#ä¸»è¦åŸºæœ¬ç»“æ„">Â¶</a>ä¸»è¦åŸºæœ¬ç»“æ„</h2><p>Flask æ˜¯ä¸€ä¸ªæ–¹ä¾¿ç®€æ´çš„webæ­å»ºçš„pythonæ¡†æ¶ï¼Œå¦‚æœåˆšåˆšå­¦ä¹ å®ŒpythonåŸºç¡€ï¼Œå¯ä»¥å°è¯•åˆ©ç”¨Flask æ­å»ºä¸€ä¸ªç®€æ˜“çš„åšå®¢ç½‘ç«™ã€‚</p><p>æœ¬æ–‡æ—¨åœ¨åˆ©ç”¨æˆ‘ä¸ºæ•°ä¸å¤šçš„pythonçŸ¥è¯†å’Œæ­é…ç½‘ä¸Šçš„æ•™ç¨‹ ï¼ˆä¸»è¦æ¥æºäºå®éªŒæ¥¼çš„æ•™ç¨‹ï¼‰æä¾›ä¸€ä¸ªè¾ƒä¸ºå…¨é¢ï¼ˆä¸ï¼‰çš„self-reflectionã€‚ è¿™ç¯‡æ–‡ç« ä¹Ÿç”¨äºå¸®åŠ©æˆ‘ç†é¡ºæ­å»ºæœåŠ¡å™¨æ—¶çš„æ€è·¯å’Œå…·ä½“ä¸€äº›åŠŸèƒ½å®ç°çš„å†æ‘¸ç´¢ã€‚</p><p>é¦–å…ˆç¡®å®šè¿™ä¸ªæœåŠ¡å™¨çš„åŸºç¡€ç»“æ„ï¼šä¸‹é¢æ˜¯projectçš„packagesç»“æ„ï¼š</p><ul><li>handlers<ul><li><a href="http://init.py">init.py</a></li><li><a href="http://front.py">front.py</a></li><li><a href="http://user.py">user.py</a></li></ul></li><li>scripts<ul><li>generate_fake_data.py</li></ul></li><li>static</li><li>migrations</li><li>templates<ul><li>users</li><li>front</li></ul></li><li><a href="http://app.py">app.py</a></li><li><a href="http://config.py">config.py</a></li><li><a href="http://decorator.py">decorator.py</a></li><li>email_app.py</li><li><a href="http://forms.py">forms.py</a></li><li><a href="http://manage.py">manage.py</a></li><li><a href="http://models.py">models.py</a></li></ul><p>flaska æ˜¯è‡ªå·±ç»™è¿™ä¸ªæœåŠ¡å™¨å–å¾—åå­—ï¼ˆæ— æ‰€è°“ï¼‰ï¼Œ handlersæ˜¯ç”¨æ¥å¤„ç†view function çš„æ–‡ä»¶å¤¹ï¼Œ<a href="http://xn--user-4h0gi65f.xn--pyfront-9r4l.py">åŒ…æ‹¬user.pyå’Œfront.py</a>.</p><p>è¿™é‡Œé¡ºä¾¿è¡¥å……ä¸€ä¸‹ä»€ä¹ˆæ˜¯view functionï¼Œ å¦‚æœè¦äº†è§£view function, æˆ‘ä»¬éœ€è¦æ‡‚å¾—ä»€ä¹ˆæ˜¯MVT software design pattern. MVT means Model, View, and Template. It is a popular pattern or model to design a web server of software by using Flask or Django.</p><p>I can briefly introduce this concept by showing a picture, and this is more straightforward as well.</p><ul><li><p><img src="https://azumeow.com/wp-content/uploads/2020/06/MTV-Diagram.png" alt=""></p><p>A flowchart of how MVT works</p></li><li><p><img src="https://azumeow.com/wp-content/uploads/2020/06/mtv_drawing1.png" alt=""></p><p>Stack way of thinking MVT</p></li></ul><p>To talk about the view part in this chart, what I simply think about the <strong>view</strong> is the logic behind the webpage, which directs how will <strong>one link connects to another link</strong> in the webserver. Also, it is used to help to know in what circumstance the webpage is available to a certain user or not. Generally, it is the logic behind the webserver.</p><p>Model(æ¨¡å—) refers to where ORM mapping located in the server framework.<br>æˆ‘ä»¬æƒ³è¦æŠŠæ•°æ®åº“çš„å…³ç³»è¡¨ï¼ˆæˆ‘ä½¿ç”¨çš„æ˜¯relational databaseï¼‰èƒ½å¤Ÿç®€æ˜“åœ°åœ¨py file é‡Œå¾—åˆ°ä½¿ç”¨ï¼Œè¿™ä¸ªæ—¶å€™å°±å¾—ä½¿ç”¨ ORM æŠŠå…³ç³»æ˜ å°„åˆ°ç±»é‡Œã€‚æ¯”å¦‚æŠŠä¸€ä¸ªè¡¨æ˜ å°„æˆä¸€ä¸ªç±»ã€‚</p><p>Templateï¼ˆæ ·æ¿ï¼‰å±äºå‰ç«¯å†…å®¹ï¼Œå³æˆ‘ä»¬è¦ä¸ºå®¢æˆ·å‘ˆç°ä»€ä¹ˆæ ·çš„å†…å®¹ï¼Œå…·ä½“å¸ƒå±€æ˜¯æ€æ ·çš„ï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ©ç”¨ htmlï¼Œcssï¼Œjsæ¥å®ç°ã€‚æˆ‘ä»¬åœ¨viewé‡Œè°ƒç”¨æ ·æ¿ï¼Œæ¥è¾¾åˆ°æŸä¸ªç½‘é¡µé“¾æ¥å‘ˆç°æŸä¸ªé¡µé¢çš„æ•ˆæœã€‚</p><p>æ•´ä¸ªçš„æµç¨‹èƒ½å¤Ÿé€šè¿‡å›¾ä¸€æ¥å¾—åˆ°å®Œæ•´çš„è¯ é‡Šã€‚å³ modelæ˜¯æ•°æ®åº“çš„æ˜ å°„ï¼Œtemplateæ˜¯å…·ä½“ç½‘é¡µçš„å‘ˆç°ï¼Œviewæ˜¯æœåŠ¡å™¨å†…éƒ¨çš„è¿ç”¨templateçš„é€»è¾‘ã€‚</p><p>viewè¿˜ä¼šcreate, update, delete æ•°æ®åº“ï¼Œæ¯”å¦‚æˆ‘ä»¬åˆ›å»ºæ–°ç”¨æˆ·æ—¶ï¼Œå°±æ˜¯åœ¨æ›´æ–°æ•°æ®åº“ã€‚viewä¹Ÿæä¾›æ•°æ®ç”¨æ¥å‘ˆç°ç»™ç”¨æˆ·ã€‚åè¿‡æ¥æ ·æ¿ä¼šä¼ å…¥ç”¨æˆ·çš„formç”¨ä»¥æ›´æ–°æ•°æ®åº“ã€‚</p><p>å¥½äº†ï¼Œhandlerså’Œtemplatesè§£é‡Šå®Œæ¯•ã€‚scriptsåœ¨è¿™é‡Œä¸»è¦ç”¨äºæµ‹è¯•ç”¨ã€‚staticæ˜¯é™æ€æ–‡ä»¶ï¼Œå³æˆ‘ä»¬ç½‘ç«™çš„å›¾æ ‡å’Œcssæ–‡ä»¶å­˜å‚¨äºæ­¤ã€‚</p><p>ä»‹ç»å®Œäº†åŸºæœ¬çš„package ç»“æ„ï¼Œä¸»è¦çš„å‡ ä¸ªmodulesä¸€ä¸€æ¥è¯´ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Flask</category>
      
    </categories>
    
    
    <tags>
      
      <tag>flask</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello, World!</title>
    <link href="/2020/06/13/hello-world-1/"/>
    <url>/2020/06/13/hello-world-1/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Hi, guys. I am Lucheng!</p><p>This is my first time of building a blog, and I am very excited with this!</p><p>I used to build a blog website with Flask model and python as the server. In fact, it is somehow not that easy to build from zero. However, it is very worthy to go through the process, which allows me to learn a lot regarding the basic structrue and flowchart for how the data be transmitted through the server, database, and the front side.</p><p>If you have any chance, please have a try! It must be a rewarding experience. I truely recommend to learn how database, html, css, and python â€¦ etc. At the end, you will probably have the same thought as me: the Wordpress saved my life!</p><p>I will update this blog as a place to store my pieces of knowledge such as programming experience, Anime recommendation and relating personal understanding, and anything that I would like to share with you! I would be very grateful for any recommendation or advice to build a better and stronger blog webiste! I hope you could enjoy here at AzuMeow!</p><blockquote><p>ã‚¢ã‚ºï½ãƒ‹ãƒ£ï½ãƒ‹ãƒ£ï½ãƒ‹ãƒ£ãƒ¼</p><p><em>Azu<sub>Meow</sub>Meow<sub>Meow</sub></em></p><p>å¹³æ¾¤ å”¯</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Miscellaneous</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Azumeow</tag>
      
      <tag>Introduction</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
